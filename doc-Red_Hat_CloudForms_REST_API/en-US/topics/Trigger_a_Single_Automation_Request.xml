<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Red_Hat_CloudForms_REST_API.ent">
%BOOK_ENTITIES;
]>
<section id="Trigger_a_Single_Automation_Request" remap="TID_44429">
	<title>Trigger a Single Automation Request</title>
	<para>
		With automation requests:
	</para>
	<itemizedlist>
		<listitem>
			<simpara>
				version defaults to "1.1" if not specified.
			</simpara>
		</listitem>
		<listitem>
			<simpara>
				user_name defaults to the REST API authenticated user if not specified.
			</simpara>
		</listitem>
	</itemizedlist>
	<para>
		Request:
	</para>
	<screen>POST /api/automation_requests</screen>
	<programlisting>{
  "version" : "1.1",
  "uri_parts" : {
    "namespace" : "System",
    "class" : "Request",
    "instance" : "InspectME",
    "message" : "create"
  },
  "parameters" : {
    "var1" : "xxxxx",
    "var2" : "yyyyy",
    "var3" : 1024,
    "var4" : true,
    "var5" : "last value"
  },
  "requester" : {
    "user_name" : "admin",
    "auto_approve" : true
  }
}</programlisting>
	<simpara>
		Optionally, the action-based request format is also supported.
	</simpara>
	<para>
		Request:
	</para>
	<screen>POST /api/automation_requests</screen>
	<programlisting>{
  "action" : "create",
  "resource" : {
    "version" : "1.1",
    "uri_parts" : {
      "namespace" : "System",
      "class" : "Request",
      "instance" : "InspectME",
      "message" : "create"
    },
    "parameters" : {
      "var1" : "xxxxx",
      "var2" : "yyyyy",
      "var3" : 1024,
      "var4" : true,
      "var5" : "last value"
    },
    "requester" : {
      "user_name" : "admin",
      "auto_approve" : true
    }
  }
}</programlisting>
	<para>
		Response:
	</para>
	<programlisting>{
  "results": [
    {
      "id": 12,
      "description": "Automation Task",
      "approval_state": "approved",
      "type": "AutomationRequest",
      "created_on": "2015-04-16T21:49:55Z",
      "updated_on": "2015-04-16T21:49:55Z",
      "requester_id": 1,
      "requester_name": "Administrator",
      "request_type": "automation",
      "request_state": "pending",
      "status": "Ok",
      "options": {
        "message": "create",
        "namespace": "System",
        "class_name": "Request",
        "instance_name": "InspectME",
        "user_id": 1,
        "attrs": {
          "var1": "xxxxx",
          "var2": "yyyyy",
          "var3": 1024,
          "var4": true,
          "var5": "last value",
          "userid": "admin"
        }
      },
      "userid": "admin"
    }
  ]
}</programlisting>
</section>