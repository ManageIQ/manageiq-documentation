<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Red Hat CloudForms 4.0 Integration with AWS CloudFormation and OpenStack Heat</title><link rel="stylesheet" type="text/css" href="pdfmain.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/><meta name="generator" content="publican v4.3.2"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script></head><body class=" pdf"><div id="poptoc" class="hidden"> </div><div xml:lang="en-US" class="book" id="idm139920934542736"><div class="titlepage"/><div class="part" id="Introduction"><div class="titlepage"><div><div><h1 class="title">Part I. Introduction</h1></div></div></div><div class="partintro" id="idm139920933200880"><div/><p>
				AWS CloudFormation enables users to orchestrate the instantiation of multi-instance services via templates. You can use CloudFormation’s sample templates or create your own templates to describe the AWS resources, and any associated dependencies or runtime parameters, required to run your applications. Similarly, you can configure and monitor cloud resources in Red Hat Enterprise Linux OpenStack Platform using the Orchestration service. The Orchestration service provides a framework through which you can define an instance’s resource parameters (for example, floating IPs, volumes, or security groups) and properties (for example, key pairs, image to be used, or flavor) using OpenStack Heat templates.
			</p><p>
				Instances deployed using templates through the orchestration service are known as stacks. A user can author the stack templates, or can upload them from other sources. Red Hat CloudForms has enabled CloudFormation and Heat integration, and now allows you to launch, delete, and update stacks using the dashboard.
			</p></div><section class="chapter" id="Integration_with_AWS_CloudFormation_and_OpenStack_Heat"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Integration with AWS CloudFormation and OpenStack Heat</h1></div></div></div><p>
				Red Hat CloudForms' integration with AWS CloudFormation and OpenStack Heat provides an ability to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Inventory all AWS CloudFormation and OpenStack Heat stacks and elements into CFME’s VMDB.
					</li><li class="listitem">
						Model the relationships of instances to their stacks, inclusive of the UI. Example, selecting an instance within a region that is within a stack, the UI shows this on the standard instance view.
					</li><li class="listitem">
						Model the stack and its elements in the UI.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					When importing a template into Red Hat CloudForms, the selected elements are converted according to their type. For example, lists convert to list boxes, and single items convert to text boxes.
				</p></div></div></section><section class="chapter" id="Cloud_Orchestration"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Cloud Orchestration</h1></div></div></div><p>
				Cloud Orchestration is a service that allows you to create, update and manage cloud resources and their software components as a single unit and then deploy them in an automated, repeatable way through a template. Templates use a human-readable syntax and can be defined in text files (thereby allowing users to check them into version control). Templates allow you to easily deploy and re-configure infrastructure for applications within your cloud. A user can author the stack templates, or can upload them from other sources.
			</p><section class="section" id="adding_a_new_orchestration_template"><div class="titlepage"><div><div><h2 class="title">2.1. Adding a New Orchestration Template</h2></div></div></div><p>
					Use this procedure to add new orchestration templates using the dashboard UI.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to Services → Catalog and select Orchestration Templates in the accordion menu.
						</li><li class="listitem">
							Click 
							<span class="inlinemediaobject"><img src="images/1847.png" alt="Configuration"/></span>
							 Configuration, then click 
							<span class="inlinemediaobject"><img src="images/1848.png" alt="Green_Plus_Sign"/></span>
							 Create a new Orchestration Template. The Adding a new Orchestration Template window is displayed. 
							<span class="inlinemediaobject"><img src="images/7148.png" alt="Adding_a_new_Orchestration_Template"/></span>
						</li><li class="listitem">
							In Name, enter a name for the new template.
						</li><li class="listitem">
							In Description, enter a description for the template. Select Amazon CloudFormation or OpenStack Heat from the Template Type list. The default is Amazon CloudFormation.
						</li><li class="listitem">
							You can select the Draft box to create a draft template.
						</li><li class="listitem">
							Define your new template following the specification structure of the selected Template Type.
						</li><li class="listitem">
							Click Add.
						</li></ol></div></section><section class="section" id="editing_orchestration_templates"><div class="titlepage"><div><div><h2 class="title">2.2. Editing Orchestration Templates</h2></div></div></div><p>
					Use this procedure to edit orchestration templates using the dashboard UI.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to Services → Catalog and select Orchestration Templates in the accordion menu.
						</li><li class="listitem">
							Select the orchestration template you want to edit from the All Orchestration Templates list.
						</li><li class="listitem">
							Click 
							<span class="inlinemediaobject"><img src="images/1847.png" alt="Configuration"/></span>
							 Configuration, then click 
							<span class="inlinemediaobject"><img src="images/1851.png" alt="Edit_Sign"/></span>
							 Edit selected Orchestration Template. The Edit selected Orchestration Template window is displayed.
						</li><li class="listitem">
							You can only edit the Name and Description of a read-only template as there can be stacks associated with the selected template. For templates that are not read-only, you can edit all content in the template as required.
						</li><li class="listitem">
							Click Save.
						</li></ol></div></section><section class="section" id="copying_orchestration_templates"><div class="titlepage"><div><div><h2 class="title">2.3. Copying Orchestration Templates</h2></div></div></div><p>
					Use this procedure to copy an orchestration template to create a new template.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to Services → Catalog and select Orchestration Templates in the accordion menu.
						</li><li class="listitem">
							Click 
							<span class="inlinemediaobject"><img src="images/1847.png" alt="Configuration"/></span>
							 Configuration, then click 
							<span class="inlinemediaobject"><img src="images/1859.png" alt="Copy"/></span>
							 Copy selected Orchestration Template. The Copy selected Orchestration Template window is displayed.
						</li><li class="listitem">
							You can copy the selected template to create a new template, and include the changes as required. Note that in order to create the new template its content must be unique.
						</li><li class="listitem">
							Click Save.
						</li></ol></div></section><section class="section" id="deleting_orchestration_templates"><div class="titlepage"><div><div><h2 class="title">2.4. Deleting Orchestration Templates</h2></div></div></div><p>
					Use this procedure to delete orchestration templates using the dashboard UI.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to Services → Catalog and select Orchestration Templates in the accordion menu.
						</li><li class="listitem">
							Select the orchestration template you want to delete from the All Orchestration Templates list.
						</li><li class="listitem">
							Click 
							<span class="inlinemediaobject"><img src="images/1848.png" alt="Configuration"/></span>
							 Configuration, then click 
							<span class="inlinemediaobject"><img src="images/1861.png" alt="Delete"/></span>
							 Remove selected Orchestration Template.
						</li><li class="listitem">
							A warning window to confirm the permanent removal of the selected item from the VMDB appears.
						</li><li class="listitem">
							Click OK.
						</li></ol></div><p>
					This instantly deletes the selected orchestration template. Note that only non read-only templates can be removed.
				</p></section></section><section class="chapter" id="CloudFormation_Provisioning_via_Services"><div class="titlepage"><div><div><h1 class="title">Chapter 3. CloudFormation Provisioning via Services</h1></div></div></div><p>
				After creating your template, you can add it as a catalog item to the Service Catalog. Stacks can then be created from templates and launched from the Service Catalog.
			</p></section><section class="chapter" id="adding_a_new_catalog"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Adding a New Catalog</h1></div></div></div><p>
				Use this procedure to add a new catalog using the dashboard UI.
			</p><p>
				<span class="inlinemediaobject"><img src="images/7149.png" alt="Adding_a_New_Catalog"/></span>
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Navigate to Services → Catalog and select Catalogs in the accordion menu. .Click 
						<span class="inlinemediaobject"><img src="images/1847.png" alt="Configuration"/></span>
						 Configuration, then click 
						<span class="inlinemediaobject"><img src="images/1848.png" alt="Green_Plus_Sign"/></span>
						 Add a New Catalog. The Adding a new Catalog window is displayed.
					</li><li class="listitem">
						In Basic Info, add Name and Description for the new catalog.
					</li><li class="listitem">
						You can assign catalog items in Assign Catalog Item.
					</li><li class="listitem">
						Click Add.
					</li></ol></div></section><section class="chapter" id="adding_a_new_service_dialog"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Adding a New Service Dialog</h1></div></div></div><p>
				Use this procedure to add a new service dialog based on the input parameters defined in the orchestration template.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Navigate to Services → Catalog and click Orchestration Templates in the accordion menu.
					</li><li class="listitem">
						From All Orchestration Templates, select the orchestration template you want to create a service dialog from.
					</li><li class="listitem">
						Click 
						<span class="inlinemediaobject"><img src="images/1847.png" alt="Configuration"/></span>
						 Configuration, then click 
						<span class="inlinemediaobject"><img src="images/1848.png" alt="Green_Plus_Sign"/></span>
						 Create Service Dialog from Orchestration Template. The Adding a new Service Dialog from Orchestration Template window is displayed. 
						<span class="inlinemediaobject"><img src="images/7156.png" alt="Adding_a_new_Service_Dialog_from_Orchestration_Template"/></span>
					</li><li class="listitem">
						In Service Dialog Information, add a Service Dialog Name.
					</li><li class="listitem">
						Click Save.
					</li></ol></div></section><section class="chapter" id="adding_a_new_catalog_item"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Adding a New Catalog Item</h1></div></div></div><p>
				Use this procedure to add a new service catalog item using the dashboard UI.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Navigate to Services → Catalog and select Catalog Items in the accordion menu.
					</li><li class="listitem">
						Click images:1847.png[Configuration] Configuration, then click 
						<span class="inlinemediaobject"><img src="images/1848.png" alt="Green_Plus_Sign"/></span>
						 Add a New Catalog Item. The Adding a new Service Catalog Item window is displayed. 
						<span class="inlinemediaobject"><img src="images/7146.png" alt="Adding_a_new_Service_Catalog_Item"/></span>
					</li><li class="listitem">
						Choose Orchestration from Catalog Item Type.
					</li><li class="listitem">
						In Basic Info, add Name and Description. Select the Display in Catalog box. 
						<span class="inlinemediaobject"><img src="images/7147.png" alt="Basic_Info"/></span>
					</li><li class="listitem">
						Select the Catalog, Dialog, and Orchestration Template from their respective list.
					</li><li class="listitem">
						Select Provisioning Entry Point. The default is
					</li></ol></div><pre class="screen">/Cloud/Orchestration/Provisioning/StateMachines/Provision/default.</pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Click Add.
					</li></ol></div></section><section class="chapter" id="ordering_service"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Ordering Service</h1></div></div></div><p>
				Use this procedure to order a service catalog item using the dashboard UI.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Navigate to Services → Catalog and select Service Catalogs in the accordion menu. From All Services catalogs, select the catalog item that you want to order. The Service window with the name and description of the service to be ordered is displayed. 
						<span class="inlinemediaobject"><img src="images/7172.png" alt="Service_Catalog"/></span>
					</li><li class="listitem">
						Click Order. The Order Service window with Options and Parameter is displayed. 
						<span class="inlinemediaobject"><img src="images/7173.png" alt="Order_Service"/></span>
					</li><li class="listitem">
						Enter stack name in Stack Name.
					</li><li class="listitem">
						The On Failure value is Rollback by default.
					</li><li class="listitem">
						Timeout is optional. You can type the number of seconds to timeout the provision at the provider side. Note that the number of seconds get converted (rounded) to minutes when ordering the provision through OpenStack. For example, 100 seconds rounds to two minutes.
					</li><li class="listitem">
						You can use the default parameter values from the template, or enter new values as appropriate. Note that the Parameters vary per dialog; therefore, the parameters shown in the above screenshot may or may not exist depending on the dialog.
					</li><li class="listitem">
						Click Submit.
					</li></ol></div><p>
				The order request is submitted. After a request has been approved, the various stages of fulfillment are executed. You can see the progress status of the provisioning process in Services → Requests.
			</p></section><section class="chapter" id="orchestration_stacks"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Orchestration Stacks</h1></div></div></div><p>
				After ordering a service, you can see the progress state of the provisioning process in Services → Requests.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Initially, the Request State shows Pending with its Approval State as Pending Approval. 
						<span class="inlinemediaobject"><img src="images/7177.png" alt="Requests"/></span>
					</li><li class="listitem">
						After the request is Approved, the various stages of fulfillment are executed, and reflect accordingly under Request State. 
						<span class="inlinemediaobject"><img src="images/7178.png" alt="Request_State"/></span>
						<span class="inlinemediaobject"><img src="images/7179.png" alt="Request_State"/></span>
					</li><li class="listitem">
						After the Request State is Finished, you can see the stack entry created in Clouds → Stacks. In the screen capture below, you can see the heat-stack we created from the catalog item ordered from the Service Catalog as shown in the previous section. 
						<span class="inlinemediaobject"><img src="images/7180.png" alt="Catalog_Item_State"/></span>
					</li><li class="listitem">
						You can click on the stack to see a summary of its properties and relationships, and the instance(s) included in the stack. You can click on the instance(s) to see all instance details. 
						<span class="inlinemediaobject"><img src="images/7181.png" alt="Stack_Summary"/></span>
					</li></ol></div><p>
				You have now deployed instances and its associated collection of resources (called a stack) using an orchestration template.
			</p></section></div></div><script type="text/javascript">
                jQuery(document).ready(function() {
                    jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                });
            </script></body></html>