<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Red_Hat_CloudForms_REST_API.ent">
%BOOK_ENTITIES;
]>
<section id="Delete_Virtual_Machines" remap="TID_44439">
	<title>Delete Virtual Machines</title>
	<formalpara>
		<title> Deleting a single virtual machine </title>
		<para>
			Request:
		</para>
	</formalpara>
	<screen>DELETE /api/vms/334</screen>
	<simpara>
		On success, the virtual machine targeted for deletion asynchronously and no response content with an HTTP status code of 204 are returned.
	</simpara>
	<formalpara>
		<title> Deleting multiple virtual machines </title>
		<para>
			Request:
		</para>
	</formalpara>
	<screen>DELETE /api/vms</screen>
	<programlisting>{
  "action" : "delete",
  "resources" : [
    "href" : "http://localhost:3000/api/vms/348",
    "href" : "http://localhost:3000/api/vms/349",
    "href" : "http://localhost:3000/api/vms/3"
  ]
}</programlisting>
	<para>
		Response:
	</para>
	<programlisting>{
  "results": [
    {
      "success": true,
      "message": "VM id:348 name:'aab-temp1' deleting",
      "task_id": 616,
      "task_href": "http://localhost:3000/api/tasks/616",
      "href": "http://localhost:3000/api/vms/348"
    },
    {
      "success": true,
      "message": "VM id:349 name:'aab-temp2' deleting",
      "task_id": 617,
      "task_href": "http://localhost:3000/api/tasks/617",
      "href": "http://localhost:3000/api/vms/349"
    }
  ]
}</programlisting>
	<simpara>
		Optionally, monitor the asynchronous virtual machine deletion by accessing the related task as follows:
	</simpara>
	<para>
		Request:
	</para>
	<screen>GET /api/tasks/616</screen>
	<para>
		Response:
	</para>
	<programlisting>{
  "href": "http://localhost:3000/api/tasks/616",
  "id": 616,
  "name": "VM id:348 name:'aab-temp1' deleting",
  "state": "Finished",
  "status": "Ok",
  "message": "Task completed successfully",
  "userid": "admin",
  "created_on": "2015-05-05T19:33:35Z",
  "updated_on": "2015-05-05T19:33:40Z"
}</programlisting>
</section>