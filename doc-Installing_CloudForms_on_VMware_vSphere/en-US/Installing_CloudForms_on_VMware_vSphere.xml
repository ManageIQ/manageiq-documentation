<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Installing_CloudForms_on_VMware_vSphere.ent">
%BOOK_ENTITIES;
]>
<article>
	<xi:include href="Article_Info.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	<section id="sect-Installing_CloudForms">
		<title>Installing CloudForms</title> 
		<para>
			CloudForms Management Engine is able to be installed and ready to configure in a few quick steps. After downloading CloudForms Management Engine as a virtual machine image template from the Red Hat Customer Portal, the installation process takes you through the steps of uploading the appliance to a supported virtualization or cloud provider.
		</para>
		<important>
			<title>Important</title>
			<para>
				After installing the CloudForms Management Engine Appliance, you must configure the database for Red Hat CloudForms. See <xref linkend="Configuring_a_Database_for_CloudForms_Management_Engine" />.
			</para>
		</important>
		<xi:include href="topics/Obtaining_the_CloudForms_Management_Engine_Appliance.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="topics/Uploading_the_CloudForms_Management_Engine_Appliance.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	</section>
	<section id="sect-Configuring_CloudForms">
		<title>Configuring CloudForms</title> 
		<para>
			Although the <productname>CloudForms Management Engine Appliance</productname> comes configured to be integrated immediately into your environment, you can make some changes to its configuration.
		</para>
		<note>
			<para>
				The <productname>CloudForms Management Engine</productname> Appliance is intended to have minimal configuration options.
			</para>
		</note>
		<para /> 
		<!--<para>
		After startup, a summary screen appears showing some basic information about the <productname>CloudForms Management Engine</productname> Appliance. It is password protected and configured as a DHCP client with bridged networking.
	</para>
	<para>
		Change the appliance configuration using Advanced Settings. You have the following menu items.
	</para>
	<itemizedlist>
		<listitem>
			<para>
				Use <guilabel>Set DHCP Network Configuration</guilabel> to use DHCP to obtain the IP address and network configuration for your <productname>CloudForms Management Engine Appliance</productname>.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Set Static Network Configuration</guilabel> if you have a specific IP address and network settings you need to use for the <productname>CloudForms Management Engine Appliance</productname>.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Test Network Configuration</guilabel> to check that name resolution is working correctly.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Set Hostname</guilabel> to specify a hostname for the <productname>CloudForms Management Engine</productname> Appliance.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Set Timezone, Date, and Time</guilabel> to configure the time zone, date, and time for the <productname>CloudForms Management Engine</productname> Appliance.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Disable PostgreSQL Database Server</guilabel> if you know that you will be using another database server and do not want these additional services loaded. This option will disable <application>PostgreSQL</application> and unmount the disk associated with the database. The <productname>CloudForms Management Engine Appliance</productname> will need a restart.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Restore Factory Configuration</guilabel> to overwrite any changes you have made to the <productname>CloudForms Management Engine</productname> Appliance, restore the factory configuration, add the <application>PostgreSQL</application> service, and restart the <productname>CloudForms Management Engine</productname> Appliance. Note that this does not set the Appliance to use the internal PostgreSQL database.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Restore Database from Backup</guilabel> to restore the VMDB database from a previous backup.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Setup Database Region</guilabel> to create regions for VMDB replication.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Configure Database</guilabel> to configure the VMDB database. Use this option to configure the database for the appliance after installing and running it for the first time.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Stop Server Processes</guilabel> to stop all server processes. You may need to do this to perform maintenance.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Start Server Processes</guilabel> to start the server. You may need to do this after performing maintenance.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Restart Appliance</guilabel> to restart the <productname>CloudForms Management Engine</productname> Appliance. You can either restart the appliance and clear the logs or just restart the appliance.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Shut Down Appliance</guilabel> to power down the appliance and exit all processes.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Summary Information</guilabel> to go back to the network summary screen for the <productname>CloudForms Management Engine Appliance</productname>.
			</para>
		</listitem>
		<listitem>
			<para>
				Use <guilabel>Log Off</guilabel> to log out of the <productname>CloudForms Management Engine</productname> Appliance console.
			</para>
		</listitem>
	</itemizedlist> -->
		<xi:include href="topics/To_change_settings_on_the_CloudForms_Management_Engine_Appliance.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="topics/Advanced_Configuration_Settings.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="topics/Configuring_a_Database_for_CloudForms_Management_Engine.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="topics/Configuring_an_Internal_Database.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="topics/Configuring_an_External_Database.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="topics/Configuring_a_Worker_Appliance_for_CloudForms_Management_Engine.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	</section>
	<section id="sect-Additional_Requirements">
		<title>Additional Requirements</title>
		<xi:include href="topics/Installing_VMware_VDDK_on_CloudForms_Management_Engine.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	</section>
	<section id="sect-Planning">
		<title>Planning</title>
		<xi:include href="topics/Regions.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="topics/CPU_Sizing_Assistant.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="topics/Database_Sizing_Assistant.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="topics/Example_PostgreSQL_Configuration_File.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	</section>
	<section id="sect-Security">
		<title>Security</title> 
		<table frame="all">
			<title>Ports Used by CloudForms Management Engine</title>
			<tgroup cols="6">
				<colspec colwidth="4*" />
				<colspec colwidth="2*" />
				<colspec colwidth="2*" />
				<colspec colwidth="2*" />
				<colspec colwidth="2*" />
				<colspec colwidth="4*" />
				<thead>
					<row>
						<entry>
							<para>
								Initiator (CFME Role if applicable)
							</para>
						</entry>
						<entry>
							<para>
								Receiver (CFME Role if applicable)
							</para>
						</entry>
						<entry>
							<para>
								Application
							</para>
						</entry>
						<entry>
							<para>
								TCP Port
							</para>
						</entry>
						<entry>
							<para>
								UDP Port
							</para>
						</entry>
						<entry>
							<para>
								Purpose/Reason
							</para>
						</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>
							<para>
								Administrator (Internet Browser)
							</para>
						</entry>
						<entry>
							<para>
								CFME Appliance (User Interface)
							</para>
						</entry>
						<entry>
							<para>
								HTTPS
							</para>
						</entry>
						<entry>
							<para>
								443
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								Access to CFME Appliance User Interface
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								Administrator (Internet Browser)
							</para>
						</entry>
						<entry>
							<para>
								CFME Appliance (User Interface)
							</para>
						</entry>
						<entry>
							<para>
								HTTP
							</para>
						</entry>
						<entry>
							<para>
								80
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								Redirect Web Browser to HTTPS service (443)
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								Service Catalog or other integration through Web Service
							</para>
						</entry>
						<entry>
							<para>
								CFME Appliance (Web Service)
							</para>
						</entry>
						<entry>
							<para>
								HTTPS
							</para>
						</entry>
						<entry>
							<para>
								443
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								Access to CFME Appliance Web Service
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance
							</para>
						</entry>
						<entry>
							<para>
								NFS Server
							</para>
						</entry>
						<entry>
							<para>
								NFS
							</para>
						</entry>
						<entry>
							<para>
								2049
							</para>
						</entry>
						<entry>
							<para>
								2049
							</para>
						</entry>
						<entry>
							<para>
								Embedded NFS VM scanning
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (User Interface)
							</para>
						</entry>
						<entry>
							<para>
								Any Virtual Machine
							</para>
						</entry>
						<entry>
							<para>
								TCP
							</para>
						</entry>
						<entry>
							<para>
								903
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								VM Remote Console (if using MKS plugin)
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (User Interface)
							</para>
						</entry>
						<entry>
							<para>
								Any Hypervisor Host
							</para>
						</entry>
						<entry>
							<para>
								TCP
							</para>
						</entry>
						<entry>
							<para>
								5900-5999
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								VM Remote Console (if using VNC)
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (any role)
							</para>
						</entry>
						<entry>
							<para>
								CFME Appliance running the VMDB (or MS SQL)
							</para>
						</entry>
						<entry>
							<para>
								PostgreSQL Named Pipes
							</para>
						</entry>
						<entry>
							<para>
								5432 (1433 MS SQL)
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								CFME Appliance connectivity to the CFME Database (PostgreSQL or MS SQL)
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Subordinate Region VMDB Appliance(Database Synchronization)
							</para>
						</entry>
						<entry>
							<para>
								CFME Master Region VMDB Appliance
							</para>
						</entry>
						<entry>
							<para>
								PostgreSQL Named Pipes
							</para>
						</entry>
						<entry>
							<para>
								5432 (1433 MS SQL)
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								Regional VMDB node replication up to Master VMDB node (PostgreSQL only)
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance(Authentication through LDAP)
							</para>
						</entry>
						<entry>
							<para>
								LDAP Server (AD or other)
							</para>
						</entry>
						<entry>
							<para>
								LDAP
							</para>
						</entry>
						<entry>
							<para>
								389
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								LDAP integration
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (Authentication through LDAPs)
							</para>
						</entry>
						<entry>
							<para>
								LDAP Server (AD or other)
							</para>
						</entry>
						<entry>
							<para>
								LDAPs
							</para>
						</entry>
						<entry>
							<para>
								636
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								LDAPS integration
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								SNMP Agent
							</para>
						</entry>
						<entry>
							<para>
								CFME Appliance (Notifier)
							</para>
						</entry>
						<entry>
							<para>
								SNMP (UDP)
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								161
							</para>
						</entry>
						<entry>
							<para>
								SNMP Polling
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (Notifier)
							</para>
						</entry>
						<entry>
							<para>
								SNMP Server
							</para>
						</entry>
						<entry>
							<para>
								SNMP (TCP)
							</para>
						</entry>
						<entry>
							<para>
								162
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								SNMP Trap Send
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (Notifier)
							</para>
						</entry>
						<entry>
							<para>
								Mail server
							</para>
						</entry>
						<entry>
							<para>
								SMTP
							</para>
						</entry>
						<entry>
							<para>
								25
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								SNMP Trap Send
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (any role)
							</para>
						</entry>
						<entry>
							<para>
								NTP Server
							</para>
						</entry>
						<entry>
							<para>
								NTP
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								123
							</para>
						</entry>
						<entry>
							<para>
								Time Source
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance
							</para>
						</entry>
						<entry>
							<para>
								CFME SmartProxy installed on Windows or Linux
							</para>
						</entry>
						<entry>
							<para>
								HTTPS
							</para>
						</entry>
						<entry>
							<para>
								1139
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								Communication with SmartProxy
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME SmartProxy installed on Windows or Linux
							</para>
						</entry>
						<entry>
							<para>
								CFME Appliance
							</para>
						</entry>
						<entry>
							<para>
								HTTPS
							</para>
						</entry>
						<entry>
							<para>
								443
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								SmartProxy Heartbeat
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance
							</para>
						</entry>
						<entry>
							<para>
								DNS Server
							</para>
						</entry>
						<entry>
							<para>
								UDP
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								53
							</para>
						</entry>
						<entry>
							<para>
								DNS Lookups
							</para>
						</entry>
					</row>
				</tbody>
			</tgroup>
		</table>  
		<table frame="all">
			<title>VMware vSphere Ports Used by CloudForms Management Engine</title>
			<tgroup cols="6">
				<colspec colwidth="4*" />
				<colspec colwidth="2*" />
				<colspec colwidth="2*" />
				<colspec colwidth="2*" />
				<colspec colwidth="2*" />
				<colspec colwidth="4*" />
				<thead>
					<row>
						<entry>
							<para>
								Initiator (CFME Role if applicable)
							</para>
						</entry>
						<entry>
							<para>
								Receiver (CFME Role if applicable)
							</para>
						</entry>
						<entry>
							<para>
								Application
							</para>
						</entry>
						<entry>
							<para>
								TCP Port
							</para>
						</entry>
						<entry>
							<para>
								UDP Port
							</para>
						</entry>
						<entry>
							<para>
								Purpose/Reason
							</para>
						</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>
							<para>
								CFME Appliance(Management System Inventory, Management System Operations, C &amp; U Data Collection, SmartProxy)
							</para>
						</entry>
						<entry>
							<para>
								vCenter
							</para>
						</entry>
						<entry>
							<para>
								HTTPS
							</para>
						</entry>
						<entry>
							<para>
								443
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								CFME Appliance running any of these roles will initiate communication with vCenter on this port.
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (SmartProxy)
							</para>
						</entry>
						<entry>
							<para>
								ESX, ESXi Host
							</para>
						</entry>
						<entry>
							<para>
								HTTPS
							</para>
						</entry>
						<entry>
							<para>
								443
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								CFME Appliance
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (SmartProxy)
							</para>
						</entry>
						<entry>
							<para>
								ESX Hosts(if analyzing VMs through Host)
							</para>
						</entry>
						<entry>
							<para>
								SOAP over HTTPS
							</para>
						</entry>
						<entry>
							<para>
								902
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								Communication from CFME Appliance to Hosts.
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance (SmartProxy)
							</para>
						</entry>
						<entry>
							<para>
								vCenter (if analyzing VMs through VC)
							</para>
						</entry>
						<entry>
							<para>
								SOAP over HTTPS
							</para>
						</entry>
						<entry>
							<para>
								902
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								Communication from CFME Appliance to vCenters.
							</para>
						</entry>
					</row>
					<row>
						<entry>
							<para>
								CFME Appliance(SmartProxy)
							</para>
						</entry>
						<entry>
							<para>
								ESX Hosts (not needed for ESXi)
							</para>
						</entry>
						<entry>
							<para>
								SSH
							</para>
						</entry>
						<entry>
							<para>
								22
							</para>
						</entry>
						<entry>
							<para />
						</entry>
						<entry>
							<para>
								CFME Appliance console access (ssh) to ESX hosts
							</para>
						</entry>
					</row>
				</tbody>
			</tgroup>
		</table>
	</section>
	<xi:include href="Revision_History.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
</article>