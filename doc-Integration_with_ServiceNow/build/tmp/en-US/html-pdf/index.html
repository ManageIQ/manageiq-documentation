<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Red Hat CloudForms 4.0 Integration with ServiceNow</title><link rel="stylesheet" type="text/css" href="pdfmain.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.78.1"/><meta name="generator" content="publican v4.3.2"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script></head><body class=" pdf"><div id="poptoc" class="hidden"> </div><div xml:lang="en-US" class="book" id="idm139806296270720"><div class="titlepage"/><section class="chapter" id="Overview"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Overview</h1></div></div></div><p>
			Red Hat CloudForms' integration with ServiceNow enables authentication with an existing ServiceNow database and add/amend items in the ServiceNow database during state machine processing, for example, the VM provision state machine. Note that information in this guide assumes you have credentials and access to a ServiceNow database instance.
		</p><p>
			The following new namespace and class delivers support for the management of ServiceNow Configuration Management Database (CMDB) records using ServiceNow’s RESTful web service.
		</p><pre class="screen">/RedHat/Integration/ServiceNow/CMDB</pre><p>
			You can manage records in the CMDB_CI_SERVER table, including create, update, and/or delete. The following methods are included:
		</p><section class="section" id="cmdb_ci_server"><div class="titlepage"><div><div><h2 class="title">1.1. CMDB_CI_SERVER</h2></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; ">Method</th><th style="text-align: left; vertical-align: top; ">Action</th><th style="text-align: left; vertical-align: top; "> </th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; ">
							<p>
								create
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								Create record in specified ServiceNow table.
							</p>
							</td><td style="text-align: left; vertical-align: top; "> </td></tr><tr><td style="text-align: left; vertical-align: top; ">
							<p>
								delete
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								Delete record in specified ServiceNow table.
							</p>
							</td><td style="text-align: left; vertical-align: top; "> </td></tr><tr><td style="text-align: left; vertical-align: top; ">
							<p>
								get
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								Get record from specified ServiceNow table and list its attributes.
							</p>
							</td><td style="text-align: left; vertical-align: top; "> </td></tr><tr><td style="text-align: left; vertical-align: top; ">
							<p>
								get_all
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								Get all records in ServiceNow and list attributes.
							</p>
							</td><td style="text-align: left; vertical-align: top; "> </td></tr><tr><td style="text-align: left; vertical-align: top; ">
							<p>
								update
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								Get specified record, update required attributes and post updated record.
							</p>
							</td><td style="text-align: left; vertical-align: top; "> </td></tr><tr><td style="text-align: left; vertical-align: top; ">
							<p>
								update_patch
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								Post required attributes to specified record.
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								+ [Note] ======= Configuration item (CI) and record are used interchangeably and refer to items in a ServiceNow database table. ======= +
							</p>
							<p>
								<span id="Managing_Record_Attributes"/> == Managing Record Attributes
							</p>
							<p>
								You can specify any attribute via the <code class="literal">URI</code> or <code class="literal">CMDB</code> class instance. If neither exists, the value is determined from the CloudForms <code class="literal">VM</code> or <code class="literal">miq_provision</code> objects.
							</p>
							<p>
								The attributes can be reduced or extended as required by amending the Ruby methods.
							</p>
							<p>
								+ [Note] ======= Some attributes are not free-text (variable) fields, that is, they must be specific values. For example, Vendor value must already exist in the ServiceNow Vendor table beforehand. =======
							</p>
							<p>
								=== Create and Update (_patch) Record You can use the following attributes when creating and/or updating a record.
							</p>
							<p>
								==== Attribute [width="50%"]
							</p>
							</td></tr></tbody></table></div><p>
				|Attribute |Value |
			</p><p>
				|virtual |Boolean true or false, set to true. |
			</p><p>
				|name VM’s |Virtual Infrastructure name. |
			</p><p>
				|short_description |CloudForms VM GUID. |
			</p><p>
				|host_name |VM’s Operating System hostname. |
			</p><p>
				|cpu_count |VM’s CPU count. |
			</p><p>
				|ram |VM’s memory. |
			</p><p>
				|vendor |VM’s hardware vendor (provider). |
			</p><p>
				|sys_id <a href="#ftn.a" class="footnote"><sup class="footnote" id="a">[1]</sup></a> |ServiceNow record unique system ID. |=================================================== |
			</p></section><section class="section" id="get_and_delete_record"><div class="titlepage"><div><div><h2 class="title">1.2. Get and Delete Record</h2></div></div></div><p>
				You can use the following attribute for getting or deleting a record.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Attribute
					</li><li class="listitem">
						Value
					</li><li class="listitem">
						sys_id
					</li></ul></div><p>
				ServiceNow record unique system ID.
			</p></section><section class="section" id="get_all_records"><div class="titlepage"><div><div><h2 class="title">1.3. Get All Records</h2></div></div></div><p>
				There are no attributes required to get all records. Method gets all records in the specified ServiceNow table and writes their attributes to automation.log.
			</p></section><div class="footnotes"><br/><hr width="100" align="left"/><div id="ftn.a" class="footnote"><div class="para"><a href="#a" class="simpara"><sup class="simpara">[1] </sup></a>
					sys_id attribute is not required during create. Its value is returned from create request and the CloudForms object custom attribute servicenow_sys_id is created and updated.
				</div></div></div></section><section class="chapter" id="Configuring_ServiceNow_Connection"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Configuring ServiceNow Connection</h1></div></div></div><p>
			Configure the connection to the ServiceNow database by specifying the credentials in the CMDB schema or instances within.
		</p><p>
			The following methods are included:
		</p><section class="section" id="attribute"><div class="titlepage"><div><div><h2 class="title">2.1. Attribute</h2></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; ">snow_server</th><th style="text-align: left; vertical-align: top; ">ServiceNow database IP address or resolvable hostname.</th><th style="text-align: left; vertical-align: top; "> </th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; ">
							<p>
								snow_user
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								ServiceNow user account with the necessary permissions.
							</p>
							</td><td style="text-align: left; vertical-align: top; "> </td></tr><tr><td style="text-align: left; vertical-align: top; ">
							<p>
								snow_password
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								Associated user account password.
							</p>
							</td><td style="text-align: left; vertical-align: top; "> </td></tr><tr><td style="text-align: left; vertical-align: top; ">
							<p>
								table_name
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								ServiceNow cmdb_ci_server database table.
							</p>
							</td><td style="text-align: left; vertical-align: top; ">
							<p>
								The table name cannot be changed unless there is a specific requirement to manage records elsewhere. Entries in this table appear in the Configuration → Base Items → Servers menu in the ServiceNow web user interface.
							</p>
							<p>
							</p>
							<p>
								<span id="Use_Cases"/> == Use Cases
							</p>
							<p>
								See the following use case examples of how ServiceNow can be integrated with automation workflow.
							</p>
							<p>
								=== Provision VM from Template The Cloud and Infrastructure Provision VM from Template state machines contain RegisterCMDB and ActivateCMDB states.
							</p>
							<p>
								To create a new ServiceNow record during VM provisioning, amend the ActiveCMDB state to call the create method, for example: ------- /Integration/ServiceNow/CMDB/create ------- 
								<span class="inlinemediaobject"><img src="images/6667.png" alt="StateActiveCMDBActiveCMDBstate"/></span>
							</p>
							<p>
								=== VM Retirement
							</p>
							<p>
								The Cloud and Infrastructure Default retirement state machines contain DeactivateCMDB and RemoveFromCMDB states.
							</p>
							<p>
								To update a VM ServiceNow record during VM retirement, amend the DeactivateCMDB state to call the update_patch method, for example: ------- Integration/ServiceNow/CMDB/update_patch?description=VM%20${/#vm.guid}%20retired%20from%20CloudForms ------- 
								<span class="inlinemediaobject"><img src="images/6668.png" alt="StateActiveCMDBDeactiveCMDBstate"/></span>
							</p>
							<p>
							</p>
							<p>
								To delete a VM ServiceNow record during VM retirement, amend the RemoveFromCMDB state to call the delete method, for example: ------- /Integration/ServiceNow/CMDB/delete ------- 
								<span class="inlinemediaobject"><img src="images/6669.png" alt="StateRemoveFromCMDBRemovefromCMDBstate"/></span>
							</p>
							<p>
							</p>
							<p>
								=== VM Reconfiguration (VMware Only)
							</p>
							<p>
								Create a new System Event instance to update the ServiceNow record after a VM reconfiguration request has been approved and completed.
							</p>
							<p>
								Create a new /System/Event/ReconfigVM_Task_Complete instance with a relationship value: ------- /Integration/ServiceNow/CMDB/update_patch ------- 
								<span class="inlinemediaobject"><img src="images/6670.png" alt="ReconfigVMTaskComplete"/></span>
							</p>
							</td></tr></tbody></table></div></section></section></div><script type="text/javascript">
                jQuery(document).ready(function() {
                    jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                });
            </script></body></html>