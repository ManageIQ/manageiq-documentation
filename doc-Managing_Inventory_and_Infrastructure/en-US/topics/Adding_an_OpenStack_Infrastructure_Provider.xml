<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Managing_Inventory_and_Infrastructure.ent">
%BOOK_ENTITIES;
]>
<section id="Adding_an_OpenStack_Infrastructure_Provider" remap="TID_44307">
	<title>Adding an OpenStack Infrastructure Provider</title>
	<para>
		After initial installation and creation of a <productname>CloudForms Management Engine</productname> environment, add an OpenStack Infrastructure provider to the appliance.
	</para>
	<procedure>
		<title>To Add a Provider</title>
		<step>
			<para>
				Navigate to <menuchoice><guimenu>Infrastructure</guimenu><guisubmenu>Providers</guisubmenu></menuchoice>.
			</para>
		</step>
		<step>
			<para>
				Click 
				<inlinemediaobject>
					<imageobject>
						<imagedata fileref="images/1847.png" />
					</imageobject>
				</inlinemediaobject> <guibutton>(Configuration)</guibutton>, then click 
				<inlinemediaobject>
					<imageobject>
						<imagedata fileref="images/1848.png" />
					</imageobject>
				</inlinemediaobject><guibutton>(Add a New Infrastructure Provider)</guibutton>.
			</para>
		</step>
		<step>
			<para>
				Enter the <guilabel>Name</guilabel> of the provider to add. The <guilabel>Name</guilabel> is how the device is labeled in the console.
			</para>
		</step>
		<step>
			<para>
				Select <guilabel>OpenStack Infrastructure</guilabel> from the <guilabel>Type</guilabel> list.
			</para>
		</step>
		<step>
			<para>
				Enter the <guilabel>Host Name (or IPv4 or IPv6 address)</guilabel> of the provider.
			</para>
			<important>
				<para>
					The <guilabel>Host Name</guilabel> must use a unique fully qualified domain name.
				</para>
			</important>
		</step>
		<step>
			<para>
				Enter the <guilabel>API Port</guilabel> of your Keystone service. The default port is <literal>5000</literal>.
			</para>
			<important>
				<para>
					If the Keystone service is configured to use SSL, you must enter the SSL port for Keystone.
				</para>
			</important>
		</step>
		<step>
			<para>
				Select the appropriate <guilabel>Zone</guilabel> for the provider. By default, the zone is set to <guilabel>default</guilabel>.
			</para>
		</step>
		<step>
			<para>
				In the <guilabel>Credentials</guilabel> area, under <guilabel>Default</guilabel>, provide the login credentials required for the OpenStack Infrastructure administrative user:
			</para>
			<itemizedlist>
				<listitem>
					<para>
						Enter the user name in the <guilabel>User ID</guilabel> field.
					</para>
				</listitem>
				<listitem>
					<para>
						Enter the user password in the <guilabel>Password</guilabel> field.
					</para>
				</listitem>
				<listitem>
					<para>
						Confirm the user password in the <guilabel>Verify Password</guilabel> field.
					</para>
				</listitem>
				<listitem>
					<para>
						Click <guilabel>Validate</guilabel> to confirm that the CloudForms Management Engine can connect to the OpenStack Infrastructure instance using the user name and password.
					</para>
				</listitem>
			</itemizedlist>
		</step>
		<step>
			<para>
				In the <guilabel>Credentials</guilabel> area, under <guilabel>AMQP</guilabel>, provide the login credentials required for the Advanced Message Queuing Protocol messaging service:
			</para>
			<itemizedlist>
				<listitem>
					<para>
						Enter the administrative user name in the <guilabel>User ID</guilabel> field.
					</para>
				</listitem>
				<listitem>
					<para>
						Enter the user password in the <guilabel>Password</guilabel> field.
					</para>
				</listitem>
				<listitem>
					<para>
						Confirm the user password in the <guilabel>Verify Password</guilabel> field.
					</para>
				</listitem>
				<listitem>
					<para>
						Click <guilabel>Validate</guilabel> to confirm that the CloudForms Management Engine can connect to the messaging service using the user name and password.
					</para>
				</listitem>
			</itemizedlist>
		</step>
		<step>
			<para>
				In the <guilabel>Credentials</guilabel> area, under <guilabel>RSA key pair</guilabel>, provide the user name and private key required to connect via SSH to all hosts in the provider:
			</para>
			<itemizedlist>
				<listitem>
					<para>
						Enter the administrative user name in the <guilabel>User ID</guilabel> field.
					</para>
				</listitem>
				<listitem>
					<para>
						Enter the private key from the machine on which OpenStack was deployed in the <guilabel>Private Key</guilabel> field.
					</para>
				</listitem>
			</itemizedlist>
		</step>
		<step>
			<para>
				Click <guilabel>Save</guilabel>.
			</para>
		</step>
	</procedure>
	<note>
		<para>
			CloudForms Management Engine requires that the adminURL endpoint for all OpenStack services be on a non-private network.
			Accordingly, assign the adminURL endpoint an IP address of something other than <literal>192.168.x.x</literal>.
			The adminURL endpoint must be accessible to the CFME Appliance that is responsible for collecting inventory and gathering metrics from the OpenStack environment.
		</para>
	</note>
</section>