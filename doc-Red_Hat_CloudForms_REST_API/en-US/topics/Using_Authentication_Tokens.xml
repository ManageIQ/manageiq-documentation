<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Red_Hat_CloudForms_REST_API.ent">
%BOOK_ENTITIES;
]>
<section id="Using_Authentication_Tokens" remap="TID_30355">
	<title>Using Authentication Tokens</title>
	<itemizedlist>
		<title>Authentication Tokens:</title>
		<listitem>
			<para>
				are associated with the user credential
			</para>
		</listitem>
		<listitem>
			<para>
				provide the necessary identify for RBAC in subsequent REST calls
			</para>
		</listitem>
		<listitem>
			<para>
				expire after a certain amount of time - 10 minutes by default.
			</para>
		</listitem>
	</itemizedlist>
	<formalpara>
		<title>Request</title>
		<para>
			<programlisting>
$ curl --user username:password
        -i X GET -H &quot;Accept: application/json&quot;
        https://hostname/api/auth
</programlisting>
		</para>
	</formalpara>
	<formalpara>
		<title>Response</title>
		<para>
			<programlisting>
HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;auth_token&quot; : &quot;af0245-238722-4d23db&quot;,
  &quot;expires_on&quot; : &quot;2013-12-07T18:20:07Z&quot;
}
</programlisting>
		</para>
	</formalpara>
	<formalpara>
		<title>Request using Token based authentication</title>
		<para>
			<programlisting>
$ curl -i -X GET -H &quot;Accept: application/json&quot;
       -H &quot;X-Auth-Token: af0245-238722-4d23db&quot;
       https://hostname/api/services/1013
</programlisting>
		</para>
	</formalpara>
	<formalpara>
		<title>Failed response due to invalid token</title>
		<para>
			<programlisting>
HTTP/1.1 401 Unauthorized
WWW-Authenticate: Basic realm=&quot;Application&quot;
...
</programlisting>
		</para>
	</formalpara>
	<para>
		When a request fails due to an invalid token, the client must re-authenticate with the user credentials to obtain a new Authentication Token.
	</para>
</section>