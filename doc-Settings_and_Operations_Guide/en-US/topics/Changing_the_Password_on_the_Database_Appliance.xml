<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../Settings_and_Operations_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="Changing_the_Password_on_the_Database_Appliance" remap="TID_42024">
	<title>Changing the Password on the Database Appliance</title>
	<para> 
		<productname>CloudForms Management Engine</productname> provides a default database password for the internal PostgreSQL database.
	</para>
	<para>
		To change the password, you need to stop the <productname>CloudForms Management Engine</productname> Service, change the password for the PostgreSQL database, run a command to change the password in the configuration file that emserverd uses to access the server, and restart the <productname>CloudForms Management Engine</productname> Appliance.
	</para>
	<procedure>
		<step>
			<para>
				Stop the <productname>CloudForms Management Engine</productname> Service. 
				<itemizedlist>
					<listitem>
						<para> 
							<command>SSH</command> into the appliance.
						</para>
					</listitem>
					<listitem>
						<para>
							To stop the <productname>CloudForms Management Engine</productname> service, run the following command: 
							<screen>service evmserverd stop</screen>
						</para>
					</listitem>
				</itemizedlist>
			</para>
		</step>
		<step>
			<para>
				Use <command>pgadmin</command> to change the password for your <productname>CloudForms Management Engine</productname> database (default is vmdb_production). If you do not have <command>pgadmin</command>, then you can change the password by running: 
				<itemizedlist>
					<listitem>
						<para>
							<screen>psql -U root -d vmdb_production</screen>
						</para>
					</listitem>
					<listitem>
						<para>
							At the vmdb# prompt, type: 
							<screen>ALTER USER root WITH PASSWORD 'newpassword';</screen>
						</para>
					</listitem>
					<listitem>
						<para>
							To exit psql, type: 
							<screen>\q</screen>
						</para>
					</listitem>
				</itemizedlist>
			</para>
		</step>
		<step>
			<para>
				Run the following command to change the password in the configuration file that emserverd uses to access the server: 
				<screen>/var/www/miq/vmdb/tools/fix_auth.rb --databaseyml --password newpassword
</screen>
			</para>
		</step>
		<step>
			<para>
				To restart the <productname>CloudForms Management Engine</productname> service, run the following command: 
				<screen>service evmserverd start</screen>
			</para>
		</step>
		<step>
			<para>
				Verify that you can log in to the <productname>CloudForms Management Engine</productname> Console.
			</para>
		</step>
	</procedure>
</section>