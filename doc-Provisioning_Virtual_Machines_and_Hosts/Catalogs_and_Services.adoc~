[[catalogs-services]]
== Catalogs and Services

=== About Catalogs and Services

Through the use of catalogs, CloudForms Management Engine provides support for multi-tier service provisioning to deploy layered workloads across hybrid environments. You can create customized dialogs that will give consumers of the services the ability to input just a few parameters and provision the entire service.
        
=== Terminology

*Terminology*

Catalog Bundle:: A grouping of Templates.
Catalog Item:: A single Template or a group of Templates (catalog bundle).
Dialog Tabs:: Part of a Service Dialog.
Element:: An item on a tab in a Dialog. It can be a Button, Check Box, Drop Down List, Radio Button, Tag Control, Text Area Box, or a Text Box.
Provisioning Dialogs:: Dialogs created for Host Provisioning, VM Migration, or VM Provisioning. The dialog name must be added to the appropriate provision instance to be processed.
Service Catalog:: A catalog item or Catalog bundle that is available for provisioning.
Service Dialogs:: Made up of fully customizable tabs, items, and values for use with Service provisioning.
Template:: A template is a copy of a preconfigured virtual machine, designed to capture installed software and software configurations, as well as the hardware configuration, of the original virtual machine.

=== Catalogs

==== Catalogs

Catalogs are used to create groups of virtual machines or instances for provisioning. For example, a complete package of a database server, desktop with specialized software already on it, and a firewall. You will need to complete the following steps to create and provision a service catalog.

. Create +Catalog Items+ for each virtual machine or instance that will be part of the service.
. Create a +Service+ dialog. For example, create a dropdown with three options small, medium, and large.
. Create a method for the Service Dialog. This method defines what each of the options means to each of the individual virtual machines or cloud instances for the service. This method is called from a service provisioning instance in the Automate model.
. Create an instance in the +DOMAIN/Service/Provisioning/StateMachines/ServiceProvision_Template+ class that calls the method.
[NOTE]
======
DOMAIN must be a user-defined Domain and not the locked ManageIQ Domain. If necessary, you can copy the class from the ManageIQ domain into a custom domain.
======
. Associate method with Automate instance.
. Create a +Catalog Bundle+, adding each of the catalog items to it. Select the +Service Dialog+ you created. Use the instance created in the DOMAIN/Service/Provisioning/StateMachines/ServiceProvision_Template class as the +Entry Point+. Check +Display in Catalog+ box.
. Provision a service.

==== Creating a Catalog Item

Create a catalog item for each virtual machine or cloud instance that will be part of the service.

. Navigate to +Services â†’ Catalogs+.
. Click the +Catalog Items+ accordion.
. Click image:1847.png[](+Configuration+), and then image:2055.png[](+Add a New Catalog Item+).
. Select the +Catalog Item Type+ you are adding. The dialogs that appear will be filtered based on the selected type of provider. For example, you will only see templates residing on Red Hat Providers, if the +Catalog Item Type+ is +Redhat+.
image:2357.png[]
. In the +Basic Info+ subtab:
.. Type a +Name/Description+.
.. Check +Display in Catalog+ to edit +Catalog+, +Dialog+, and +Entry Point(NS/Cls/Inst)+ options.
... +Provisioning Entry Point (Domain/NS/Cls/Inst)+ requires you to select an Automate instance to run upon provisioning.
... +Retirement Entry Point (Domain/NS/Cls/Inst)+ requires you to select an Automate instance to run upon retirement.
... image:Catalogitem-statemachine.png[]

[NOTE]
======
The entry point must be a State Machine since the +Provisioning Entry Point+ list is filtered to only show State Machine class instances. No other entry points will be available from the +Provisioning Entry Point+ field.									
======
[NOTE]
======
You can only choose from the catalogs and dialogs you have already created. If you haven't done so, leave the values blank and edit later.
======
. In the +Details+ subtab, write a +Long Description+ for the catalog item.
. In the +Request Info+ subtab, select provisioning options that apply to the provider chosen. For more information, refer to the sections on Provisioning Virtual Machines and Provisioning Instances.
. Click +Add+.


