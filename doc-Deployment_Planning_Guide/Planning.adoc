[[planning]]
== Planning

This guide provides some general guidelines to planning Red Hat CloudForms Management Engine. This includes creating multiple regions containing Red Hat CloudForms Management Engine appliances, CPU sizing recommendations, database sizing recommendations, and database configuration.

=== Regions

Use regions for centralizing data which is collected from public and private virtualization environments. A region is ultimately represented as a single database for the VMDB. Regions are particularly useful when multiple geographical locations need to be managed as they enable all the data collection to happen at each particular location and avoids data collection traffic across slow links between networks.
	
When multiple regions are being used, each with their own unique ID, a master region can be created to centralize the data of all the children regions into a single master database. To do this, configure each child region to replicate its data to the master region database (Red Hat recommends use of region 99). This parent and child region is a one-to-many relationship.

Regions can contain multiple zones, which in turn contain appliances. Zones are used for further segregating network traffic along with enabling failover configurations. Each appliance has the capability to be configured for a number of specialized server roles. These roles are limited to the zone containing the appliance they run on.

Only one failover type of each server role can run in a zone. If multiple appliances have the same failover role, the extras are used as backups that activate only if the primary appliance fails. Non-failover server roles can run on multiple appliances simultaneously in a zone, so resources can be adjusted according to the workload those roles are responsible for.

The following diagram demonstrates an example of the multiple regions working together in a CloudForms environment.

image:7151.png[]
			
The Master appliance is located in Chicago and contains a master region and a subregion that manages the worker appliances. The Mahwah technology center contains a single subregion that manages two zones.
Likewise the San Diego technology center contains a single subregion managing a single zone.

[NOTE]
==========
* Replicating a parent region to a higher-level parent is not supported.
* Parent regions can be configured after the child regions are online.
==========
      
The following diagram provides a closer look at a region:

image:7150.png[]

In this region, we have several Red Hat CloudForms appliances acting as UI nodes and worker nodes. These worker nodes execute tasks on the providers in your environment.
The Region also uses a region database that reports to a master database on the main Red Hat CloudForms appliance. All appliances can connect to the authentication services (Active Directory, LDAP, Identity Management), outgoing mail (SMTP), and network services (SNMP).
	
=== CPU Sizing Assistant for a Dedicated VMDB Host

To predict the number of appliances that can be supported by a dedicated VMDB host, see https://access.redhat.com/labs/cfmedbsizer/[DB CPU Sizing Assistant].
	  
=== Database Sizing Assistant
      
Red Hat recommends allocating the virtual machine disk fully at the time of creation. Three main factors affect the size of your database over time:

* Virtual Machine Count: the most important factor in the calculation of virtual machine database (VMDB) size over time.
* Host Count: the number of hosts associated with the provider.
* Storage Count: the number of individual storage elements as seen from the perspective of the provider or host. It is not the total number of virtual disks for all virtual machines.

image:5780.png[]

