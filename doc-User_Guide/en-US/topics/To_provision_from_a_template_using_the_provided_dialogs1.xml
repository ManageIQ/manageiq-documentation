<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../User_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="To_provision_from_a_template_using_the_provided_dialogs1" remap="TID_15528">
	<title>Provisioning a Virtual Machine from a Template</title>
	<para>
		You can provision virtual machines through various methods. One method is to provision a virtual machine directly from a template stored on a provider.
	</para>
	<important>
		<para>
			To provision a virtual machine, you must have the "Automation Engine" role enabled.
		</para>
	</important>
	<procedure>
		<title>To Provision a Virtual Machine from a Template</title>
		<step>
			<para>
				Navigate to <menuchoice><guimenu>Infrastructure</guimenu> <guisubmenu>Virtual Machines</guisubmenu></menuchoice>.
			</para>
		</step>
		<step>
			<para>
				Click 
				<inlinemediaobject>
					<imageobject>
						<imagedata fileref="images/2007.png" />
					</imageobject>
				</inlinemediaobject><guilabel>(Lifecycle)</guilabel>, and then 
				<inlinemediaobject>
					<imageobject>
						<imagedata fileref="images/1848.png" />
					</imageobject>
				</inlinemediaobject><guilabel>(Provision VMs)</guilabel>.
			</para>
		</step>
		<step>
			<para>
				Select a template from the list presented.
			</para>
		</step>
		<step>
			<para>
				Click <guilabel>Continue</guilabel>.
			</para>
		</step>
		<step>
			<para>
				On the <guilabel>Request</guilabel> tab, enter information about this provisioning request. 
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/2326.png" />
					</imageobject>
				</mediaobject> In <guilabel>Request Information</guilabel>, type in at least a <guilabel>First Name</guilabel> and <guilabel>Last Name</guilabel> and an email address. This email is used to send the requester status emails during the provisioning process for items such as auto-approval, quota, provision complete, retirement, request pending approval, and request denied. The other information is optional. If the <productname>CloudForms Management Engine</productname> server is configured to use LDAP, you can use the <guilabel>Look Up</guilabel> button to populate the other fields based on the email address.
			</para>
			<note>
				<para>
					Parameters with a * next to the label are required to submit the provisioning request. To change the required parameters, see <xref linkend="Customizing_Provisioning_Dialogs1" />.
				</para>
			</note>
		</step>
		<step>
			<para>
				Click the <guilabel>Purpose</guilabel> tab to select the appropriate tags for the provisioned virtual machines.
			</para> 
			<!--mediaobject>
				<imageobject>
					<imagedata align="center" fileref="images/2327.png"/>
				</imageobject>
			</mediaobject-->
		</step>
		<step>
			<para>
				Click the <guilabel>Catalog</guilabel> tab to select the template to provision from. This tab is context sensitive based on provider.
			</para>
		</step>
		<step>
			<para>
				For templates on VMware providers:
			</para>
			<substeps>
				<step>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/2328.png" />
						</imageobject>
					</mediaobject>
					<para>
						For <guilabel>Provision Type</guilabel>, select <guimenuitem>VMware</guimenuitem> or <guimenuitem>PXE</guimenuitem>.
					</para>
					<substeps>
						<step>
							<para>
								If <guimenuitem>VMware</guimenuitem> is selected, select <guilabel>Linked Clone</guilabel> to create a linked clone to the virtual machine instead of a full clone. Since a snapshot is required to create a linked clone, this box is only enabled if a snapshot is present. Select the snapshot you want to use for the linked clone.
							</para>
						</step>
						<step>
							<para>
								If <guimenuitem>PXE</guimenuitem> is selected, select a PXE <guilabel>Server</guilabel> and <guilabel>Image</guilabel> to use for provisioning
							</para>
						</step>
					</substeps>
				</step>
				<step>
					<para>
						Under <guilabel>Count</guilabel>, select the number of virtual machines to create in this request.
					</para>
				</step>
				<step>
					<para>
						Use <guilabel>Naming</guilabel> to specify a virtual machine name and virtual machine description. When provisioning multiple virtual machines, a number will be appended to the virtual machine name.
					</para>
				</step>
			</substeps>
		</step>
		<step>
			<para>
				For templates on Red Hat providers:
			</para>
			<substeps>
				<step>
					<para>
						Select the <guilabel>Name</guilabel> of a template to use.
					</para>
				</step>
				<step>
					<para>
						For <guilabel>Provision Type</guilabel>, select either <guimenuitem>ISO</guimenuitem>, <guimenuitem>PXE</guimenuitem>, or <guimenuitem>Native Clone</guimenuitem>. You must select <guilabel>Native Clone</guilabel> in order to use a Cloud-Init template.
					</para>
					<substeps>
						<step>
							<para>
								If <guimenuitem>Native Clone</guimenuitem> is selected, select <guilabel>Linked Clone</guilabel> to create a linked clone to the virtual machine instead of a full clone. This is equivalent to <firstterm>Thin Template Provisioning</firstterm> in Red Hat Enterprise Virtualization. Since a snapshot is required to create a linked clone, this box is only enabled if a snapshot is present. Select the snapshot to use for the linked clone.
							</para>
						</step>
						<step>
							<para>
								If <guimenuitem>ISO</guimenuitem> is selected, select an ISO <guilabel>Image</guilabel> to use for provisioning
							</para>
						</step>
						<step>
							<para>
								If <guimenuitem>PXE</guimenuitem> is selected, select a PXE <guilabel>Server</guilabel> and <guilabel>Image</guilabel> to use for provisioning
							</para>
						</step>
					</substeps>
				</step>
				<step>
					<para>
						Under <guilabel>Count</guilabel>, select the number of virtual machines you want to create in this request.
					</para>
				</step>
				<step>
					<para>
						Use <guilabel>Naming</guilabel> to specify a <guilabel>VM Name</guilabel> and <guilabel>VM Description</guilabel>. When provisioning multiple virtual machines, a number will be appended to the <guilabel>VM Name</guilabel>.
					</para>
				</step>
			</substeps>
		</step>
		<step>
			<para>
				Click the <guilabel>Environment</guilabel> tab to decide where you want the new virtual machines to reside.
			</para>
			<substeps>
				<step>
					<para>
						If provisioning from a template on VMware, you can either let <productname>CloudForms Management Engine</productname> decide for you by checking <guilabel>Choose Automatically</guilabel>, or select a specific cluster, resource pool, folder, host, and datastore.
					</para>
				</step>
				<step>
					<para>
						If provisioning from a template on Red Hat, you can either let <productname>CloudForms Management Engine</productname> decide for you by checking <guilabel>Choose Automatically</guilabel>, or select a datacenter, cluster, host and datastore.
					</para>
				</step>
			</substeps>
		</step>
		<step>
			<para>
				Click the <guilabel>Hardware</guilabel> tab to set hardware options.
			</para>
			<mediaobject>
				<imageobject>
					<imagedata align="center" fileref="images/2330.png" />
				</imageobject>
			</mediaobject>
			<substeps>
				<step>
					<para>
						In <guilabel>VM Hardware</guilabel>, set the number of CPUs, amount of memory, and disk format: thin, pre-allocated/thick or same as the provisioning template (default).
					</para>
				</step>
				<step>
					<para>
						For VMware provisioning, set the <guilabel>VM Limits</guilabel> of CPU and memory the virtual machine can use.
					</para>
				</step>
				<step>
					<para>
						For VMware provisioning, set the <guilabel>VM Reservation</guilabel> amount of CPU and memory.
					</para>
				</step>
			</substeps>
		</step>
		<step>
			<para>
				Click <guilabel>Network</guilabel> to set the vLan adapter. Additional networking settings that are internal to the operating system appear on the <guilabel>Customize</guilabel> tab.
			</para>
			<mediaobject>
				<imageobject>
					<imagedata align="center" fileref="images/2335.png" />
				</imageobject>
			</mediaobject>
			<substeps>
				<step>
					<para>
						In <guilabel>Network Adapter Information</guilabel>, select the <guilabel>vLan</guilabel>.
					</para>
				</step>
			</substeps>
		</step>
		<step>
			<para>
				Click <guilabel>Customize</guilabel> to customize the operating system of the new virtual machine. These options vary based on the operating system of the template.
			</para>
			<mediaobject>
				<imageobject>
					<imagedata align="center" fileref="images/2336.png" />
				</imageobject>
			</mediaobject>
		</step>
		<step>
			<para>
				For Windows provisioning:
			</para>
			<substeps>
				<step>
					<para>
						To use a customer specification from the Provider, click <guilabel>Specification</guilabel>. To select an appropriate template, choose from the list in the custom specification area. The values that are honored by <productname>CloudForms Management Engine</productname> display.
					</para>
					<note>
						<para>
							Any values in the specification that do not show in the <productname>CloudForms Management Engine</productname> console's request dialogs are not used by <productname>CloudForms Management Engine</productname>. For example, for <productname>Windows</productname> operating systems, if you have any run once values in the specification, they are not used in creating the new virtual machines. Currently, for a <productname>Windows</productname> operating system, <productname>CloudForms Management Engine</productname> honors the unattended GUI, identification, workgroup information, user data, windows options, and server license. If more than one network card is specified, only the first is used.
						</para>
					</note>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/2337.png" />
						</imageobject>
					</mediaobject>
					<para>
						To modify the specification, select <guilabel>Override Specification Values</guilabel>.
					</para>
				</step>
				<step>
					<para>
						Select <guilabel>Sysprep Answer File</guilabel>, to upload a Sysprep file or use one that exists for a custom specification on the Provider where the template resides. To upload a file, click <guilabel>Browse</guilabel> to find the file, and then upload. To use an answer file in <guilabel>Customization Specification</guilabel>, click on the item. The answer file will automatically upload for viewing. You cannot make modifications to it.
					</para>
				</step>
			</substeps>
		</step>
		<step>
			<para>
				For Linux provisioning:
			</para>
			<substeps>
				<step>
					<para>
						Under <guilabel>Credentials</guilabel>, enter a <guilabel>Root Password</guilabel> for the <literal>root</literal> user to access the instance.
					</para>
				</step>
				<step>
					<para>
						Enter a <guilabel>IP Address Information</guilabel> for the instance. Leave as <guilabel>DHCP</guilabel> for automatic IP assignment from the provider.
					</para>
				</step>
				<step>
					<para>
						Enter any <guilabel>DNS</guilabel> information for the instance if necessary.
					</para>
				</step>
				<step>
					<para>
						Select <guilabel>Customize Template</guilabel> for additional instance configuration. Select from the Kickstart or Cloud-Init customization templates stored on your appliance.
					</para>
				</step>
			</substeps>
		</step>
		<step>
			<para>
				Click the <guilabel>Schedule</guilabel> tab to select when provisioning begins.
			</para>
			<substeps>
				<step>
					<para>
						In <guilabel>Schedule Info</guilabel>, select when to start provisioning. If you select <guilabel>Schedule</guilabel>, you will be prompted to enter a date and time. Select <guilabel>Stateless</guilabel> if you do not want the files deleted after the provision completes. A stateless provision does not write to the disk so it requires the PXE files on the next boot.
					</para>
				</step>
				<step>
					<para>
						In <guilabel>Lifespan</guilabel>, select to power on the virtual machines after they are created, and to set a retirement date. If you select a retirement period, you will be prompted for when you want a retirement warning.
					</para>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/2338.png" />
						</imageobject>
					</mediaobject>
				</step>
			</substeps>
		</step>
		<step>
			<para>
				Click <guibutton>Submit</guibutton>.
			</para>
		</step>
	</procedure>
	<formalpara>
		<title>Result:</title>
		<para>
			The provisioning request is sent for approval. For the provisioning to begin, a user with the administrator, approver, or super administrator account role must approve the request. The administrator and super administrator roles can also edit, delete, and deny the requests. You will be able to see all provisioning requests where you are either the requester or the approver.
		</para>
	</formalpara>
	<para>
		After submission, the appliance assigns each provision request a <guilabel>Request ID</guilabel>. If an error occurs during the approval or provisioning process, use this ID to locate the request in the appliance logs. The Request ID consists of the region associated with the request followed by the request number. As regions define a range of one trillion database IDs, this number can be several digits long.
	</para>
	<example>
		<title>Request ID Format</title>
		<para>
			Request 99 in region 123 results in Request ID 123000000000099.
		</para>
	</example>
</section>