<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.4.5" />
<title>Methods Available for Automation</title>
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revnumber, span#revdate, span#revremark {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock {
  padding-left: 2.0em;
  margin-right: 10%;
}
div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock {
  padding-left: 2.0em;
  margin-right: 10%;
}
div.verseblock > div.content {
  white-space: pre;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

@media print {
  div#footer-badges { display: none; }
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock-content {
  white-space: pre;
}
div.verseblock-attribution {
  padding-top: 0.75em;
  text-align: left;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}

/* IE6 sets dynamically generated links as visited. */
div#toc a:visited { color: blue; }
</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){generateToc(3)}
/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, October 2006. License: GPL */

function getText(el) {
  var text = "";
  for (var i = el.firstChild; i != null; i = i.nextSibling) {
    if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
      text += i.data;
    else if (i.firstChild != null)
      text += getText(i);
  }
  return text;
}

function TocEntry(el, text, toclevel) {
  this.element = el;
  this.text = text;
  this.toclevel = toclevel;
}

function tocEntries(el, toclevels) {
  var result = new Array;
  var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
  // Function that scans the DOM tree for header elements (the DOM2
  // nodeIterator API would be a better technique but not supported by all
  // browsers).
  var iterate = function (el) {
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
        var mo = re.exec(i.tagName)
        if (mo)
          result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
        iterate(i);
      }
    }
  }
  iterate(el);
  return result;
}

// This function does the work. toclevels = 1..4.
function generateToc(toclevels) {
  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementsByTagName("body")[0], toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "toc" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    document.getElementById("header").removeChild(toc);
}
/*]]>*/
</script>
</head>
<body>
<div id="header">
<h1>Methods Available for Automation</h1>
<span id="author">CloudForms Docs Team</span><br />
<span id="revnumber">version 1.0-0,</span>
<span id="revdate">Thu Feb 26 2015</span>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><div class="title">Abstract</div><p>This guide provides advanced methods for CloudForms Management Engine&#8217;s
automation functions. Methods can be used from within CloudForms
Management Engine to create custom actions and workflows for the objects
managed by CloudForms Management Engine. Information and procedures in
this book are relevant to CloudForms Management Engine administrators.
This document is organized by the object hierarchy in the Automate
Model.</p></div>
</div>
</div>
<h2 id="_introduction_to_red_hat_cloudforms">1. Introduction to Red Hat CloudForms</h2>
<div class="sectionbody">
<div class="paragraph"><p>CloudForms Management Engine delivers the insight, control, and
automation enterprises need to address the challenges of managing
virtual environments. This technology enables enterprises with existing
virtual infrastructures to improve visibility and control, and those
starting virtualization deployments to build and operate a well-managed
virtual infrastructure.</p></div>
<div class="paragraph"><p>Red Hat CloudForms 3.1 is comprised of a single component, the
CloudForms Management Engine. It has the following feature sets:</p></div>
<div class="ulist"><ul>
<li>
<p>
Insight: Discovery, Monitoring, Utilization, Performance, Reporting,
Analytics, Chargeback, and Trending.
</p>
</li>
<li>
<p>
Control: Security, Compliance, Alerting, and Policy-Based Resource,
and Configuration Enforcement.
</p>
</li>
<li>
<p>
Automate: IT Process, Task and Event, Provisioning, and Workload
Management and Orchestration.
</p>
</li>
<li>
<p>
Integrate: Systems Management, Tools and Processes, Event Consoles,
Configuration Management Database (CMDB), Role-based Administration
(RBA), and Web Services.
</p>
</li>
</ul></div>
<h3 id="_architecture">1.1. ⁠Architecture</h3><div style="clear:left"></div>
<div class="paragraph"><p>The diagram below describes the capabilities of CloudForms Management
Engine. Its features are designed to work together to provide robust
management and maintenance of your virtual infrastructure.</p></div>
<div class="paragraph"><div class="title">Features</div><p>⁠<span class="image">
<img src="images/1845.png" alt="images/1845.png" />
</span></p></div>
<div class="paragraph"><p>The architecture comprises the following components:</p></div>
<div class="ulist"><ul>
<li>
<p>
The CloudForms Management Engine Appliance (Appliance) which is
supplied as a secure, high-performance, preconfigured virtual machine.
It provides support for HTTPS communications.
</p>
</li>
<li>
<p>
The CloudForms Management Engine Server (Server) resides on the
Appliance. It is the software layer that communicates between the
SmartProxy and the Virtual Management Database. It includes support for
HTTPS communications.
</p>
</li>
<li>
<p>
The Virtual Management Database (VMDB) resides either on the Appliance
or another computer accessible to the Appliance. It is the definitive
source of intelligence collected about your Virtual Infrastructure. It
also holds status information regarding Appliance tasks.
</p>
</li>
<li>
<p>
The CloudForms Management Engine Console (Console) is the Web
interface used to view and control the Server and Appliance. It is
consumed through Web 2.0 mash-ups and web services (WS Management)
interfaces.
</p>
</li>
<li>
<p>
The SmartProxy can reside on the Appliance or on an ESX Server. If not
embedded in the Server, the SmartProxy can be deployed from the
Appliance. Each storage location must have a SmartProxy with visibility
to it. The SmartProxy acts on behalf of the Appliance communicating with
it over HTTPS on standard port 443.
</p>
</li>
</ul></div>
<h3 id="_requirements">1.2. ⁠Requirements</h3><div style="clear:left"></div>
<div class="paragraph"><p>To use CloudForms Management Engine, the following requirements must be
met:</p></div>
<div class="ulist"><ul>
<li>
<p>
One of the following web browsers:
</p>
<div class="ulist"><ul>
<li>
<p>
Mozilla Firefox for versions supported under Mozilla&#8217;s Extended
Support Release (ESR) ⁠<a href="#1">[1]</a>
</p>
</li>
<li>
<p>
Internet Explorer 8 or higher
</p>
</li>
<li>
<p>
Google Chrome for Business
</p>
</li>
</ul></div>
</li>
<li>
<p>
A monitor with minimum resolution of 1280x1024.
</p>
</li>
<li>
<p>
Adobe Flash Player 9 or above. At the time of publication, you can
access it at
<a href="http://www.adobe.com/products/flashplayer/">http://www.adobe.com/products/flashplayer/</a>.
</p>
</li>
<li>
<p>
The CloudForms Management Engine Appliance must already be installed
and activated in your enterprise environment.
</p>
</li>
<li>
<p>
The SmartProxy must have visibility to the virtual machines and cloud
instances that you want to control.
</p>
</li>
<li>
<p>
The resources that you want to control must have a SmartProxy
associated with them.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Important: Due to browser limitations, Red Hat supports logging in to only one tab
for each multi-tabbed browser. Console settings are saved for the active
tab only. For the same reason, CloudForms Management Engine does not
guarantee that the browser&#8217;s <strong>Back</strong> button will produce the desired
results. Red Hat recommends using the breadcrumbs provided in the
Console.</p></div>
<div class="paragraph" id="1"><p>[1] <a href="http://www.mozilla.org/en-US/firefox/organizations/faq/[http://www.mozilla.org/en-US/firefox/organizations/faq/">http://www.mozilla.org/en-US/firefox/organizations/faq/[http://www.mozilla.org/en-US/firefox/organizations/faq/</a></p></div>
<h3 id="_terminology">1.3. Terminology</h3><div style="clear:left"></div>
<div class="paragraph"><p><strong>The following terms are used throughout this document. Review them
before proceeding.</strong></p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Account Role
</dt>
<dd>
<p>
  A designation assigned to a user allowing or restricting a user to
  parts and functions of the CloudForms Management Engine console.
</p>
</dd>
<dt class="hdlist1">
Action
</dt>
<dd>
<p>
  An execution that is performed after a condition is evaluated.
</p>
</dd>
<dt class="hdlist1">
Alert
</dt>
<dd>
<p>
  CloudForms Management Engine alerts notify administrators and
  monitoring systems of critical configuration changes and threshold
  limits in the virtual environment. The notification can take the form
  of either an email or an SNMP trap.
</p>
</dd>
<dt class="hdlist1">
Analysis Profile
</dt>
<dd>
<p>
  A customized scan of hosts, virtual machines, or instances. You can
  collect information from categories, files, event logs, and registry
  entries.
</p>
</dd>
<dt class="hdlist1">
Cloud
</dt>
<dd>
<p>
  A pool of on-demand and highly available computing resources. The
  usage of these resources are scaled depending on the user requirements
  and metered for cost.
</p>
</dd>
<dt class="hdlist1">
CloudForms Management Engine Appliance
</dt>
<dd>
<p>
  A virtual machine on which the virtual management database (VMDB) and
  CloudForms Management Engine server reside.
</p>
</dd>
<dt class="hdlist1">
CloudForms Management Engine Console
</dt>
<dd>
<p>
  A web-based interface into the CloudForms Management Engine Appliance.
</p>
</dd>
<dt class="hdlist1">
CloudForms Management Engine Role
</dt>
<dd>
<p>
  A designation assigned to a CloudForms Management Engine server that
  defines what a CloudForms Management Engine server can do.
</p>
</dd>
<dt class="hdlist1">
CloudForms Management Engine Server
</dt>
<dd>
<p>
  The application that runs on the CloudForms Management Engine
  Appliance and communicates with the SmartProxy and the VMDB.
</p>
</dd>
<dt class="hdlist1">
Cluster
</dt>
<dd>
<p>
  Hosts that are grouped together to provide high availability and load
  balancing.
</p>
</dd>
<dt class="hdlist1">
Condition
</dt>
<dd>
<p>
  A test of criteria triggered by an event.
</p>
</dd>
<dt class="hdlist1">
Discovery
</dt>
<dd>
<p>
  Process run by the CloudForms Management Engine server which finds
  virtual machine and cloud providers.
</p>
</dd>
<dt class="hdlist1">
Drift
</dt>
<dd>
<p>
  The comparison of a virtual machine, instance, host, cluster to itself
  at different points in time.
</p>
</dd>
<dt class="hdlist1">
Event
</dt>
<dd>
<p>
  A trigger to check a condition.
</p>
</dd>
<dt class="hdlist1">
Event Monitor
</dt>
<dd>
<p>
  Software on the CloudForms Management Engine Appliance which monitors
  external providers for events and sends them to the CloudForms
  Management Engine server.
</p>
</dd>
<dt class="hdlist1">
Host
</dt>
<dd>
<p>
  A computer on which virtual machine monitor software is loaded.
</p>
</dd>
<dt class="hdlist1">
Instance/Cloud Instance
</dt>
<dd>
<p>
  A on-demand virtual machine based upon a predefined image and uses a
  scalable set of hardware resources such as CPU, memory, networking
  interfaces.
</p>
</dd>
<dt class="hdlist1">
Managed/Registered VM
</dt>
<dd>
<p>
  A virtual machine that is connected to a host and exists in the VMDB.
  Also, a template that is connected to a provider and exists in the
  VMDB. Note that templates cannot be connected to a host.
</p>
</dd>
<dt class="hdlist1">
Managed/Unregistered VM
</dt>
<dd>
<p>
  A virtual machine or template that resides on a repository or is no
  longer connected to a provider or host and exists in the VMDB. A
  virtual machine that was previously considered registered may become
  unregistered if the virtual machine was removed from provider
  inventory.
</p>
</dd>
<dt class="hdlist1">
Provider
</dt>
<dd>
<p>
  A computer on which software is loaded which manages multiple virtual
  machines that reside on multiple hosts.
</p>
</dd>
<dt class="hdlist1">
Policy
</dt>
<dd>
<p>
  A combination of an event, a condition, and an action used to manage a
  virtual machine.
</p>
</dd>
<dt class="hdlist1">
Policy Profile
</dt>
<dd>
<p>
  A set of policies.
</p>
</dd>
<dt class="hdlist1">
Refresh
</dt>
<dd>
<p>
  A process run by the CloudForms Management Engine server which checks
  for relationships of the provider or host to other resources, such as
  storage locations, repositories, virtual machines, or instances. It
  also checks the power states of those resources.
</p>
</dd>
<dt class="hdlist1">
Regions
</dt>
<dd>
<p>
  Regions are used to create a central database for reporting and
  charting. Regions are used primarily to consolidate multiple VMDBs
  into one master VMDB for reporting.
</p>
</dd>
<dt class="hdlist1">
Resource
</dt>
<dd>
<p>
  A host, provider, instance, virtual machine, repository, or datastore.
</p>
</dd>
<dt class="hdlist1">
Resource Pool
</dt>
<dd>
<p>
  A group of virtual machines across which CPU and memory resources are
  allocated.
</p>
</dd>
<dt class="hdlist1">
Repository
</dt>
<dd>
<p>
  A place on a datastore resource which contains virtual machines.
</p>
</dd>
<dt class="hdlist1">
SmartProxy
</dt>
<dd>
<p>
  The SmartProxy is a software agent that acts on behalf of the
  CloudForms Management Engine Appliance to perform actions on hosts,
  providers, storage and virtual machines.
 <br />
  The SmartProxy can be configured to reside on the CloudForms
  Management Engine Appliance or on an ESX server version. The
  SmartProxy can be deployed from the CloudForms Management Engine
  Appliance, and provides visibility to the VMFS storage. Each storage
  location must have a SmartProxy with visibility to it. The SmartProxy
  acts on behalf of the CloudForms Management Engine Appliance. If the
  SmartProxy is not embedded in the CloudForms Management Engine server,
  it communicates with the CloudForms Management Engine Appliance over
  HTTPS on standard port 443.
</p>
</dd>
<dt class="hdlist1">
SmartState Analysis
</dt>
<dd>
<p>
  Process run by the SmartProxy which collects the details of a virtual
  machine or instance. Such details include accounts, drivers, network
  information, hardware, and security patches. This process is also run
  by the CloudForms Management Engine server on hosts and clusters. The
  data is stored in the VMDB.
</p>
</dd>
<dt class="hdlist1">
SmartTags
</dt>
<dd>
<p>
  Descriptors that allow you to create a customized, searchable index
  for the resources in your clouds and infrastructure.
</p>
</dd>
<dt class="hdlist1">
Storage Location
</dt>
<dd>
<p>
  A device, such as a VMware datastore, where digital information
  resides that is connected to a resource.
</p>
</dd>
<dt class="hdlist1">
Tags
</dt>
<dd>
<p>
  Descriptive terms defined by a CloudForms Management Engine user or
  the system used to categorize a resource.
</p>
</dd>
<dt class="hdlist1">
Template
</dt>
<dd>
<p>
  A template is a copy of a preconfigured virtual machine, designed to
  capture installed software and software configurations, as well as the
  hardware configuration, of the original virtual machine.
</p>
</dd>
<dt class="hdlist1">
Unmanaged Virtual Machine
</dt>
<dd>
<p>
  Files discovered on a datastore that do not have a virtual machine
  associated with them in the VMDB. These files may be registered to a
  provider that the CloudForms Management Engine server does not have
  configuration information on. Possible causes may be that the provider
  has not been discovered or that the provider has been discovered, but
  no security credentials have been provided.
</p>
</dd>
<dt class="hdlist1">
Virtual Machine
</dt>
<dd>
<p>
  A software implementation of a system that functions similar to a
  physical machine. Virtual machines utilize the hardware infrastructure
  of a physical host, or a set of physical hosts, to provide a scalable
  and on-demand method of system provisioning.
</p>
</dd>
<dt class="hdlist1">
Virtual Management Database (VMDB)
</dt>
<dd>
<p>
  Database used by the CloudForms Management Engine Appliance to store
  information about your resources, users, and anything else required to
  manage your virtual enterprise.
</p>
</dd>
<dt class="hdlist1">
Virtual Thumbnail
</dt>
<dd>
<p>
  An icon divided into smaller areas that summarize the properties of a
  resource.
</p>
</dd>
<dt class="hdlist1">
Zones
</dt>
<dd>
<p>
  CloudForms Management Engine Infrastructure can be organized into
  zones to configure failover and to isolate traffic. Zones can be
  created based on your environment. Zones can be based on geographic
  location, network location, or function. When first started, new
  servers are put into the default zone.
</p>
</dd>
</dl></div>
</div>
<h2 id="_methods_available_for_use_with_cloudforms_management_engine">2. Methods Available for Use with CloudForms Management Engine</h2>
<div class="sectionbody">
<div class="paragraph"><p>Methods can be used from within CloudForms Management Engine to create
custom actions and workflows for the objects managed for your CloudForms
Management Engine Infrastructure. This document describes the methods
available for use in CloudForms Management Engine. This document is
organized by the object hierarchy in the Automate Model.</p></div>
<h3 id="_evm_root">2.1. ⁠$evm.root</h3><div style="clear:left"></div>
<div class="paragraph"><p>When an Automate method is launched, it has one global variable: <tt>$evm</tt>.
The <tt>$evm</tt> variable allows the method to communicate back to CloudForms
Management Engine. The <tt>$evm.root</tt> is the root object in the workspace,
it provides access to the data currently loaded in the CloudForms
Management Engine model. It use the objects data to solve more complex
problems by integrating with CloudForms Management Engine methods.</p></div>
<div class="paragraph"><p>The following is an excerpt from the <strong>InspectMe</strong> method that can be
found in the <strong>ManageIQ\System\Request</strong> namespace. The dumpRoot method
accesses the <tt>$evm.root</tt> object, and sends all of its attributes to the
CloudForms Management Engine Automate log for review. In the dumpServer
Method, the inspect method is run based on the value of the miq_server
obtained from the <tt>$evm.root</tt> object.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>  ​<span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpRoot</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump Root information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpRoot
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Root:&lt;$evm.root&gt; Begin Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Root:&lt;$evm.root&gt; Attributes - #{k}: #{v}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Root:&lt;$evm.root&gt; End Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​  <span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpServer</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Inputs: $evm.root['miq_server']</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump MIQ Server information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpServer
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Server:&lt;#{$evm.root['miq_server'].name}&gt; Begin Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">'miq_server'</span><span style="color: #990000">].</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Server:&lt;#{$evm.root['miq_server'].name}&gt; Attributes - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Server:&lt;#{$evm.root['miq_server'].name}&gt; End Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<div class="paragraph"><p>The result of dumpRoot is below. The value of miq_server is what gets
passed into the dumpServer method.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>​​[----] I, [2012-10-23T13:53:54.517279 #5320:f329024]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - EVM Automate Method Started
​[----] I, [2012-10-23T13:53:54.523637 #5320:f329024]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Begin Attributes
​[----] I, [2012-10-23T13:53:54.527552 #5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - miq_server: #&lt;MiqAeMethodService::MiqAeServiceMiqServer:0x0000001e76d900&gt;
​[----] I, [2012-10-23T13:53:54.528801 #5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - miq_server_id: 1
​[----] I, [2012-10-23T13:53:54.529961 #5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - object_name: Request
​[----] I, [2012-10-23T13:53:54.531067 #5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - request: inspectme
​[----] I, [2012-10-23T13:53:54.534054 #5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - vm: DEV-JaneM
​[----] I, [2012-10-23T13:53:54.535156 #5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - vm_id: 85
​[----] I, [2012-10-23T13:53:54.536238 #5320:ef8c538]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; Attributes - vmdb_object_type: vm
​[----] I, [2012-10-23T13:53:54.537159 #5320:f329024]  INFO -- : &lt;User-Defined Method&gt; [InspectMe] - Root:&lt;$evm.root&gt; End Attributes
​[----] I, [2012-10-23T13:53:54.537772 #5320:f329024]  INFO -- : &lt;User-Defined Method&gt;</tt></pre>
</div></div>
<h3 id="_method_hierarchy">2.2. Method Hierarchy</h3><div style="clear:left"></div>
<div class="paragraph"><p>The Automate Model inline methods have a hierarchy. The sublevels in the
hierarchy have access to the methods for itself and the levels above it.
For example, Red Hat Hosts have access to the Red Hat Host methods, Host
Methods, and Base Methods.</p></div>
<div class="paragraph"><p>The following nested list displays the hierarchy. Certain methods in
this list have links to additional methods detailed in this book.
Methods without links do not have any additional methods.</p></div>
<div class="ulist"><ul>
<li>
<p>
Top Level: Base - <a href="#Base Methods">Base Methods</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Authentication (authentication)
</p>
<div class="ulist"><ul>
<li>
<p>
Private Keys (auth_private_key)
</p>
<div class="ulist"><ul>
<li>
<p>
Key Pair for Clouds (auth_key_pair_cloud)
</p>
<div class="ulist"><ul>
<li>
<p>
Amazon (auth_key_pair_amazon)
</p>
</li>
<li>
<p>
OpenStack (auth_key_pair_openstack)
</p>
</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<p>
Availability Zones (availability_zone) - <a href="#Availability Zones (availability_zone)">Availability Zones (availability_zone)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Amazon (availability_zone_amazon)
</p>
</li>
<li>
<p>
OpenStack (availability_zone_openstack)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Classification (classification) - <a href="#Classifications (classification)">Classifications (classification)</a>
</p>
</li>
<li>
<p>
Cloud Networks (cloud_network) - <a href="#Cloud Networks (cloud_network)">Cloud Networks (cloud_network)</a>
</p>
</li>
<li>
<p>
Cloud Resource Quotas (cloud_resource_quota) - <a href="#Cloud Resource Quotas (cloud_resource_quota)">Cloud Resource Quotas (cloud_resource_quota)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
OpenStack (openstack_resource_quota)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Cloud Subnets (cloud_subnet) - <a href="#Cloud Subnets (cloud_subnet)">Cloud Subnets (cloud_subnet)</a>
</p>
</li>
<li>
<p>
Cloud Tenants (cloud_tenant) - <a href="#Cloud Tenants (cloud_tenant)">Cloud Tenants (cloud_tenant)</a>
</p>
</li>
<li>
<p>
Customization Templates (customization_template) - <a href="#Customization Template (customization_template)">Customization Template (customization_template)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Cloud Init (customization_template_cloud_init)
</p>
</li>
<li>
<p>
Kickstart (customization_template_kickstart)
</p>
</li>
<li>
<p>
Sysprep (customization_template_sysprep)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Cluster (ems_cluster) - <a href="#Clusters (ems_cluster)">Clusters (ems_cluster)</a>
</p>
</li>
<li>
<p>
Event (ems_event) - <a href="#Management System Events (ems_event)">Management System Events (ems_event)</a>
</p>
</li>
<li>
<p>
Folder (ems_folder) - <a href="#Management System Folders (ems_folder)">Management System Folders (ems_folder)</a>
</p>
</li>
<li>
<p>
Providers (ext_management_system) - <a href="#Providers (ext_management_system)">Providers (ext_management_system)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Cloud (ems_cloud)
</p>
<div class="ulist"><ul>
<li>
<p>
Amazon (ems_amazon)
</p>
</li>
<li>
<p>
Openstack (ems_openstack)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Infrastructue (ems_infra)
</p>
<div class="ulist"><ul>
<li>
<p>
Microsoft System Center VMM (ems_microsoft)
</p>
</li>
<li>
<p>
Red Hat Enterprise Virtualization (ems_redhat)
</p>
</li>
<li>
<p>
VMware vCenter (ems_vmware)
</p>
</li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<p>
Filesystems (filesystem)
</p>
</li>
<li>
<p>
Firewall Rules (filewall_rule) - <a href="#Firewall Rules (firewall_rule)">Firewall Rules (firewall_rule)</a>
</p>
</li>
<li>
<p>
Flavors - <a href="#Flavors (flavor)">[Flavors (flavor)]</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Amazon (flavor_amazon)
</p>
</li>
<li>
<p>
OpenStack (flavor_openstack)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Floating IPs (floating_ip) - <a href="#Floating IPs (floating_ip)">Floating IPs (floating_ip)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Amazon (floating_ip_amazon)
</p>
</li>
<li>
<p>
OpenStack (floating_ip_openstack)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Guest Applications (guest_application) - <a href="#Guest Applications (guest_application)">Guest Applications (guest_application)</a>
</p>
</li>
<li>
<p>
Guest Devices (guest_device) - <a href="#Guest Device (guest_device)">Guest Device (guest_device)</a>
</p>
</li>
<li>
<p>
Hardware (hardware) - <a href="#Hardware (hardware)">Hardware (hardware)</a>
</p>
</li>
<li>
<p>
Hosts (host) - <a href="#Hosts (host)">Hosts (host)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Red Hat Enterprise Virtualization (host_redhat)
</p>
</li>
<li>
<p>
VMware (host_vmware)
</p>
<div class="ulist"><ul>
<li>
<p>
VMware ESX (host_vmware_esx) - <a href="#Hosts: Vmware ESX (host_vmware_esx)">Hosts: Vmware ESX (host_vmware_esx)</a>
</p>
</li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<p>
ISO Images (iso_image)
</p>
</li>
<li>
<p>
Jobs (job)
</p>
</li>
<li>
<p>
LANs (lan) - <a href="#LAN (lan)">LAN (lan)</a>
</p>
</li>
<li>
<p>
Groups (miq_group) - <a href="#Groups (miq_group)">Groups (miq_group)</a>
</p>
</li>
<li>
<p>
Policies (miq_policy)
</p>
</li>
<li>
<p>
Proxies (miq_proxy) - <a href="#Proxies (miq_proxy)">Proxies (miq_proxy)</a>
</p>
</li>
<li>
<p>
Requests (miq_request) - <a href="#Request (miq_request)">Request (miq_request)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Automation (automation_request) - <a href="#Automation Request (automation_request)">Automation Request (automation_request)</a>
</p>
</li>
<li>
<p>
Host Provisioning (miq_host_provision_request) - <a href="#Host Provision Request (miq_host_provision_request)">Host Provision Request (miq_host_provision_request)</a>
</p>
</li>
<li>
<p>
VM Provisioning (miq_provision_request) - <a href="#VM Provision Request (miq_provision_request)">VM Provision Request (miq_provision_request)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
VM Templates (miq_provision_request_template)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Service Reconfiguration (service_reconfigure_request)
</p>
</li>
<li>
<p>
Service Template Provisioning (service_template_provision_request)
</p>
</li>
<li>
<p>
VM Migration (vm_migrate_request)
</p>
</li>
<li>
<p>
VM Reconfiguration (vm_reconfigure_request)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Request Task (miq_request_task) - <a href="#Request Task (miq_request_task)">Request Task (miq_request_task)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Automation (automation_task) - <a href="#Automation Task (automation_task)">Automation Task (automation_task)</a>
</p>
</li>
<li>
<p>
Host Provisioning (miq_host_provision) - <a href="#Host Provision Task (miq_host_provision)">Host Provision Task (miq_host_provision)</a>
</p>
</li>
<li>
<p>
VM Provisioning (miq_provision) - <a href="#VM Provision Task (miq_provision)">VM Provision Task (miq_provision)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Cloud (miq_provision_cloud) - <a href="#VM Provisioning for Clouds Task (miq_provision_cloud)">VM Provisioning for Clouds Task (miq_provision_cloud)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Amazon (miq_provision_amazon)
</p>
</li>
<li>
<p>
OpenStack (miq_provision_openstack)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Red Hat Enterprise Virtualization (miq_provision_redhat)
</p>
<div class="ulist"><ul>
<li>
<p>
Via ISO (miq_provision_redhat_via_iso)
</p>
</li>
<li>
<p>
Via PXE (miq_provision_redhat_via_pxe)
</p>
</li>
</ul></div>
</li>
<li>
<p>
VMware (miq_provision_vmware)
</p>
<div class="ulist"><ul>
<li>
<p>
Via NetApp RCU (miq_provision_vmware_via_net_app_rcu)
</p>
</li>
<li>
<p>
Via PXE (miq_provision_vmware_via_pxe)
</p>
</li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<p>
Service Reconfiguration (service_reconfigure_task) - <a href="#Service Reconfiguration Task (service_reconfigure_task)">Service Reconfiguration Task (service_reconfigure_task)</a>
</p>
</li>
<li>
<p>
Service Template Provisioning (service_template_provision_task) - <a href="#Service Template Provision Task (service_template_provision_task)">Service Template Provision Task (service_template_provision_task)</a>
</p>
</li>
<li>
<p>
VM Migratation (vm_migrate_task) - <a href="#VM Migrate Task (vm_migrate_task)">VM Migrate Task (vm_migrate_task)</a>
</p>
</li>
<li>
<p>
VM Reconfiguration (vm_reconfigure_task)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Servers (miq_server) - <a href="#Servers (miq_server)">Servers (miq_server)</a>
</p>
</li>
<li>
<p>
Networks (network) - <a href="#Network (network)">Network (network)</a>
</p>
</li>
<li>
<p>
Operating Systems (operating_system)
</p>
</li>
<li>
<p>
PXE Images (pxe_image) - <a href="#PXE Image (pxe_image)">PXE Image (pxe_image)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
iPXE (pxe_image_ipxe)
</p>
</li>
<li>
<p>
PXELINUX (pxe_image_pxelinux)
</p>
</li>
</ul></div>
</li>
<li>
<p>
PXE Servers (pxe_server) - <a href="#PXE Server (pxe_server)">PXE Server (pxe_server)</a>
</p>
</li>
<li>
<p>
Resource Pools (resource_pool)
</p>
</li>
<li>
<p>
Security Groups (security_group) - <a href="#Security Groups (security_group)">Security Groups (security_group)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Amazon (security_group_amazon)
</p>
</li>
<li>
<p>
OpenStack (security_group_openstack)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Services (service) - <a href="#Service (service)">Service (service)</a>
</p>
</li>
<li>
<p>
Service Resources (service_resource) - <a href="#Service Resource (service_resource)">Service Resource (service_resource)</a>
</p>
</li>
<li>
<p>
Service Templates (service_template) - <a href="#Service Template (service_template)">Service Template (service_template)</a>
</p>
</li>
<li>
<p>
Snapshots (snapshot) - <a href="#Snapshot (snapshot)">Snapshot (snapshot)</a>
</p>
</li>
<li>
<p>
Storages (storage) - <a href="#Datastores (storage)">Datastores (storage)</a>
</p>
</li>
<li>
<p>
Switches (switch) - <a href="#Switch (switch)">Switch (switch)</a>
</p>
</li>
<li>
<p>
Users (user) - <a href="#User (user)">User (user)</a>
</p>
</li>
<li>
<p>
VMs or Templates (vm_or_template) - <a href="#Virtual Machines and Templates (vm_or_template)">Virtual Machines and Templates (vm_or_template)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Templates (miq_template)
</p>
<div class="ulist"><ul>
<li>
<p>
Cloud (template_cloud)
</p>
<div class="ulist"><ul>
<li>
<p>
Amazon (template_amazon)
</p>
</li>
<li>
<p>
OpenStack (template_openstack)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Infrastructure (template_infra)
</p>
<div class="ulist"><ul>
<li>
<p>
Microsoft (template_microsoft)
</p>
</li>
<li>
<p>
Red Hat Enterprise Virtualization (template_redhat)
</p>
</li>
<li>
<p>
VMware (template_vmware)
</p>
</li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<p>
VMs (vm) - <a href="#VMs (vm)">VMs (vm)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Clouds (vm_cloud) - <a href="#VMs for Clouds (vm_cloud)">VMs for Clouds (vm_cloud)</a>
</p>
<div class="ulist"><ul>
<li>
<p>
Amazon (vm_amazon)
</p>
</li>
<li>
<p>
OpenStack (vm_openstack)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Infrastructure (vm_infra)
</p>
<div class="ulist"><ul>
<li>
<p>
Microsoft (vm_microsoft)
</p>
</li>
<li>
<p>
Red Hat Enterprise Virtualization (vm_redhat)
</p>
</li>
<li>
<p>
Vmware (vm_vmware)
</p>
</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<p>
Windows Images (windows_images) - <a href="#Windows Image (windows_image)">Windows Image (windows_image)</a>
</p>
</li>
</ul></div>
</li>
</ul></div>
<h3 id="_a_id_base_methods_a_base_methods">2.3. <a id="Base Methods"></a> Base Methods</h3><div style="clear:left"></div>
<div class="paragraph"><p>These methods may be used with all objects available in the Automate
Model.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                         </th>
<th align="left" valign="top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">inspect</p></td>
<td align="left" valign="top"><p class="table">Returns a string containing a list of attributes of the object. See the <strong>InspectMe</strong> method in <strong>Samples</strong> class</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">inspect_all</p></td>
<td align="left" valign="top"><p class="table">Returns all information for an object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">virtual_column_names</p></td>
<td align="left" valign="top"><p class="table">Returns the objects virtual columns names</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">virtual_columns_inspect</p></td>
<td align="left" valign="top"><p class="table">Returns the objects virtual columns and values</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">reload</p></td>
<td align="left" valign="top"><p class="table">Returns to original object to prevent the internal object from being returned</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">model_suffix</p></td>
<td align="left" valign="top"><p class="table">Returns objects suffix. For an object of type MiqAeServiceVmVmware, returns <strong>"Vmware"</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">tagged_with?(category, name)</p></td>
<td align="left" valign="top"><p class="table">Is the object tagged with the category and name specified?</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">tags(category = nil)-- this means that category is an optional parameter, with a default of nil</p></td>
<td align="left" valign="top"><p class="table">Returns the tags</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">tag_assign(tag)</p></td>
<td align="left" valign="top"><p class="table">Assigns tag to the object, except for the <tt>miq_provision</tt> object, which uses <tt>add_tag(category, tag_name)</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">tag_unassign(tag)</p></td>
<td align="left" valign="top"><p class="table">Unassigns tag to the object, except for the <tt>miq_provision</tt> object, which uses <tt>clear_tag(category, tag_name)</tt></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>The <strong>InspectMe</strong> <strong>Sample Method</strong> uses many of the Methods shown in this
document. The method returns attributes of the CloudForms Management
Engine Server and then returns attributes for the host, cluster, and
virtual machine from the provider of invocation. In many environments it
is linked to a button.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​​<span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​<span style="font-style: italic"><span style="color: #9A1900"># EVM Automate Method: InspectMe</span></span>
​<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​<span style="font-style: italic"><span style="color: #9A1900"># Notes: Dump the objects in storage to the automation.log</span></span>
​<span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​
<span style="font-weight: bold"><span style="color: #0000FF">begin</span></span>
​  <span style="color: #009900">@method</span> <span style="color: #990000">=</span> <span style="color: #FF0000">'InspectMe'</span>
​  <span style="color: #009900">@log_prefix</span> <span style="color: #990000">=</span> <span style="color: #FF0000">"[#{@method}]"</span>
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - EVM Automate Method Started"</span><span style="color: #990000">)</span>
​
​  <span style="font-style: italic"><span style="color: #9A1900"># Turn on verbose logging</span></span>
​  <span style="color: #009900">@debug</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span>
​
​​  <span style="font-style: italic"><span style="color: #9A1900"># List the types of object we will try to detect</span></span>
​  obj_types <span style="color: #990000">=</span> <span style="color: #990000">%</span>w<span style="color: #FF0000">{</span> vm host storage ems_cluster ext_management_system <span style="color: #FF0000">}</span>
​  obj_type <span style="color: #990000">=</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>detect <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span>v<span style="color: #990000">|</span> obj_types<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">include</span></span><span style="color: #990000">?(</span>k<span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​
​  <span style="font-style: italic"><span style="color: #9A1900"># uncomment below to dump root object attributes</span></span>
​  dumpRoot
​
​  <span style="font-style: italic"><span style="color: #9A1900"># uncomment below to dump miq_server object attributes</span></span>
​  dumpServer
​​
​  <span style="font-style: italic"><span style="color: #9A1900"># If obj_type is NOT nil</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> obj_type<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​    rootobj <span style="color: #990000">=</span> obj_type<span style="color: #990000">.</span>first
​    obj <span style="color: #990000">=</span> obj_type<span style="color: #990000">.</span>second
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Detected Object:&lt;#{rootobj}&gt;"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> rootobj
​    <span style="font-weight: bold"><span style="color: #0000FF">when</span></span> <span style="color: #FF0000">'host'</span> <span style="font-weight: bold"><span style="color: #0000FF">then</span></span> dumpHost<span style="color: #990000">(</span>obj<span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">when</span></span> <span style="color: #FF0000">'vm'</span> <span style="font-weight: bold"><span style="color: #0000FF">then</span></span> dumpVM<span style="color: #990000">(</span>obj<span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">when</span></span> <span style="color: #FF0000">'ems_cluster'</span> <span style="font-weight: bold"><span style="color: #0000FF">then</span></span> dumpCluster<span style="color: #990000">(</span>obj<span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">when</span></span> <span style="color: #FF0000">'ext_management_system'</span> <span style="font-weight: bold"><span style="color: #0000FF">then</span></span> dumpEMS<span style="color: #990000">(</span>obj<span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">when</span></span> <span style="color: #FF0000">'storage'</span> <span style="font-weight: bold"><span style="color: #0000FF">then</span></span> dumpStorage<span style="color: #990000">(</span>obj<span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Exit method</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - EVM Automate Method Ended"</span><span style="color: #990000">)</span>
​  exit MIQ_OK
​
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Set Ruby rescue behavior</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​<span style="font-weight: bold"><span style="color: #0000FF">rescue</span></span> <span style="color: #990000">=&gt;</span> err
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"error"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - [#{err}]\n#{err.backtrace.join("</span><span style="color: #990000">\</span>n<span style="color: #FF0000">")}"</span><span style="color: #990000">)</span>
​  exit MIQ_ABORT
​<span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h3 id="_a_id_availability_zones_availability_zone_a_availability_zones_availability_zone">2.4. <a id="Availability Zones (availability_zone)"></a> Availability Zones (availability_zone)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s VMs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms_and_templates</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s VMs and templates</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_subnets</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud subnets</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_classifications_classification_a_classifications_classification">2.5. <a id="Classifications (classification)"></a> Classifications (classification)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">parent</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s parent object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">namespace</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s namespace</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">category</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s category</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">name</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s name</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">to_tag</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s tag mapping</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_cloud_networks_cloud_network_a_cloud_networks_cloud_network">2.6. <a id="Cloud Networks (cloud_network)"></a> Cloud Networks (cloud_network)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_tenant</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud tenant</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_subnets</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud subnets</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">security_groups</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s security groups</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s VMs</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_cloud_resource_quotas_cloud_resource_quota_a_cloud_resource_quotas_cloud_resource_quota">2.7. <a id="Cloud Resource Quotas (cloud_resource_quota)"></a> Cloud Resource Quotas (cloud_resource_quota)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_tenant</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud tenant</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_cloud_subnets_cloud_subnet_a_cloud_subnets_cloud_subnet">2.8. <a id="Cloud Subnets (cloud_subnet)"></a> Cloud Subnets (cloud_subnet)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">cloud_network</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud network</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">availability_zone</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s availability zone</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s VMs</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_cloud_tenants_cloud_tenant_a_cloud_tenants_cloud_tenant">2.9. <a id="Cloud Tenants (cloud_tenant)"></a> Cloud Tenants (cloud_tenant)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">security_groups</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s security groups</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_networks</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud network</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s VMs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms_and_templates</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s VMs and templates</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_templates</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s templates</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">floating_ips</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s floating IP addresses</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_resource_quotas</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s quotas</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_customization_template_customization_template_a_customization_template_customization_template">2.10. <a id="Customization Template (customization_template)"></a> ⁠Customization Template (customization_template)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Pxe_images</p></td>
<td align="left" valign="top"><p class="table">Returns customization templates pxe images</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_clusters_ems_cluster_a_clusters_ems_cluster">2.11. <a id="Clusters (ems_cluster)"></a> Clusters (ems_cluster)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">all_resource_pools</p></td>
<td align="left" valign="top"><p class="table">Return all of the objects Resource Pools</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">all_vms</p></td>
<td align="left" valign="top"><p class="table">Return all of the objects Virtual Machines</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">default_resource_pool</p></td>
<td align="left" valign="top"><p class="table">Return the objects default Resource Pool</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_events</p></td>
<td align="left" valign="top"><p class="table">Returns an array of EmsEvent records associated with the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Return objects Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">hosts</p></td>
<td align="left" valign="top"><p class="table">Return objects Hosts</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">parent_folder</p></td>
<td align="left" valign="top"><p class="table">Return objects Parent Folder</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">register_host(host)</p></td>
<td align="left" valign="top"><p class="table">Register Host to this Cluster</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">resource_pools</p></td>
<td align="left" valign="top"><p class="table">Return objects Resource Pools</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">storages</p></td>
<td align="left" valign="top"><p class="table">Return objects datastores</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Return objects Virtual Machines</p></td>
</tr>
</tbody>
</table>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​​  <span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpCluster</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Inputs: $evm.root['ems_cluster']</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump Cluster information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpCluster<span style="color: #990000">(</span>cluster<span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Cluster:&lt;#{cluster.name}&gt; Begin Attributes"</span><span style="color: #990000">)</span>
​    cluster<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Cluster:&lt;#{cluster.name}&gt; Attributes - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Cluster:&lt;#{cluster.name}&gt; End Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Cluster:&lt;#{cluster.name}&gt; Begin Associations"</span><span style="color: #990000">)</span>
​    cluster<span style="color: #990000">.</span>associations<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>assc<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Cluster:&lt;#{cluster.name}&gt; Associations - #{assc}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Cluster:&lt;#{cluster.name}&gt; End Associations"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Cluster:&lt;#{cluster.name}&gt; Begin Virtual Columns"</span><span style="color: #990000">)</span>
​    cluster<span style="color: #990000">.</span>virtual_column_names<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>vcn<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Cluster:&lt;#{cluster.name}&gt; Virtual Columns - #{vcn}: #{cluster.send(vcn)}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Cluster:&lt;#{cluster.name}&gt; End Virtual Columns"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h3 id="_a_id_management_system_events_ems_event_a_management_system_events_ems_event">2.12. <a id="Management System Events (ems_event)"></a> Management System Events (ems_event)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s provider</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems</p></td>
<td align="left" valign="top"><p class="table">Shortcut to ext_management_system</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">src_vm</p></td>
<td align="left" valign="top"><p class="table">Source VM for the event</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vm</p></td>
<td align="left" valign="top"><p class="table">VM for the event</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">src_host</p></td>
<td align="left" valign="top"><p class="table">Source Host for the event</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">host</p></td>
<td align="left" valign="top"><p class="table">Host for the event</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">dest_vm</p></td>
<td align="left" valign="top"><p class="table">Destination VM for the event</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">service</p></td>
<td align="left" valign="top"><p class="table">Service for the event</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">dest_host</p></td>
<td align="left" valign="top"><p class="table">Destination Host for the event</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">refresh(*targets)</p></td>
<td align="left" valign="top"><p class="table">Refresh the target types specified (ems, vm, host, src_vm, src_host, dest_vm, or dest_host)</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_management_system_folders_ems_folder_a_management_system_folders_ems_folder">2.13. <a id="⁠Management System Folders (ems_folder)"></a> ⁠Management System Folders (ems_folder)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">hosts</p></td>
<td align="left" valign="top"><p class="table">Returns hosts that are in the folder</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns VMs that are in folder</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">register_host(host)</p></td>
<td align="left" valign="top"><p class="table">Registers specified host to the folder</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">folder_path(*options)</p></td>
<td align="left" valign="top"><p class="table">Returns folders path</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_providers_ext_management_system_a_providers_ext_management_system">2.14. <a id="Providers (ext_management_system)"></a> ⁠Providers (ext_management_system)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">authentication_password_encrypted</p></td>
<td align="left" valign="top"><p class="table">Returns credentials password encrypted</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">authentication_password</p></td>
<td align="left" valign="top"><p class="table">Returns credentials password unencrypted</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">authentication_userid</p></td>
<td align="left" valign="top"><p class="table">Returns credentials user id</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_clusters</p></td>
<td align="left" valign="top"><p class="table">Returns objects clusters</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_events</p></td>
<td align="left" valign="top"><p class="table">Returns an array of EmsEvent records associated with the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_folders</p></td>
<td align="left" valign="top"><p class="table">Returns objects folders</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">hosts</p></td>
<td align="left" valign="top"><p class="table">Returns objects hosts</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">refresh</p></td>
<td align="left" valign="top"><p class="table">Refreshes relationships and power states for objects related to the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">resource_pools</p></td>
<td align="left" valign="top"><p class="table">Returns objects resource pools</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">storages</p></td>
<td align="left" valign="top"><p class="table">Returns objects storages</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns objects vms</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">to_s</p></td>
<td align="left" valign="top"><p class="table">Converts object to string</p></td>
</tr>
</tbody>
</table>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​​  <span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpEMS</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Inputs: $evm.root['ext_management_system']</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump EMS information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpEMS<span style="color: #990000">(</span>ems<span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; Begin Attributes"</span><span style="color: #990000">)</span>
​    ems<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; Attributes - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; End Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; Begin Associations"</span><span style="color: #990000">)</span>
​    ems<span style="color: #990000">.</span>associations<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>assc<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; Associations - #{assc}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; End Associations"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; Begin EMS Folders"</span><span style="color: #990000">)</span>
​    ems<span style="color: #990000">.</span>ems_folders<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>ef<span style="color: #990000">|</span> ef<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span>v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; EMS Folder:&lt;#{ef.name}&gt; #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; End EMS Folders"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; Begin Virtual Columns"</span><span style="color: #990000">)</span>
​    ems<span style="color: #990000">.</span>virtual_column_names<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>vcn<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; Virtual Columns - #{vcn}: #{ems.send(vcn)}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - EMS:&lt;#{ems.name}&gt; End Virtual Columns"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h4 id="_a_id_cloud_providers_ems_cloud_a_cloud_providers_ems_cloud">2.14.1. <a id="Cloud Providers (ems_cloud)"></a> Cloud Providers (ems_cloud)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">availability_zones</p></td>
<td align="left" valign="top"><p class="table">Return the provider&#8217;s availability zones</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_networks</p></td>
<td align="left" valign="top"><p class="table">Return the provider&#8217;s available networks</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_networks</p></td>
<td align="left" valign="top"><p class="table">Return the provider&#8217;s available tenants</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">flavors</p></td>
<td align="left" valign="top"><p class="table">Return the provider&#8217;s hardware flavors</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">floating_ips</p></td>
<td align="left" valign="top"><p class="table">Return the provider&#8217;s floating IP addresses</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">key_pairs</p></td>
<td align="left" valign="top"><p class="table">Return the provider&#8217;s key pairs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">security_groups</p></td>
<td align="left" valign="top"><p class="table">Return the provider&#8217;s security groups</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_resource_quotas</p></td>
<td align="left" valign="top"><p class="table">Return the provider&#8217;s resource quotas</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_firewall_rules_firewall_rule_a_firewall_rules_firewall_rule">2.15. <a id="Firewall Rules (firewall_rule)"></a> ⁠Firewall Rules (firewall_rule)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">resource</p></td>
<td align="left" valign="top"><p class="table">Return object&#8217;s resource</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">source_security_group</p></td>
<td align="left" valign="top"><p class="table">Return object&#8217;s source security group</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_flavors_flavor_a_flavors_flavor">2.16. <a id="Flavors (flavor)"></a> Flavors (flavor)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s VMs</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_floating_ips_floating_ip_a_floating_ips_floating_ip">2.17. <a id="Floating IPs (floating_ip)"></a> Floating IPs (floating_ip)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vm</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s VMs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_tenant</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud tenant</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_guest_applications_guest_application_a_guest_applications_guest_application">2.18. <a id="Guest Applications (guest_application)"></a> Guest Applications (guest_application)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">vm</p></td>
<td align="left" valign="top"><p class="table">Returns objects VM</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">host</p></td>
<td align="left" valign="top"><p class="table">Returns objects Host</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_guest_device_guest_device_a_guest_device_guest_device">2.19. <a id="Guest Device (guest_device)"></a> Guest Device (guest_device)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">hardware</p></td>
<td align="left" valign="top"><p class="table">Returns objects hardware</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">switch</p></td>
<td align="left" valign="top"><p class="table">Returns objects switch</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">lan</p></td>
<td align="left" valign="top"><p class="table">Returns objects LAN</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">network</p></td>
<td align="left" valign="top"><p class="table">Returns objects network</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_hardware_hardware_a_hardware_hardware">2.20. <a id="Hardware (hardware)"></a> Hardware (hardware)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">ipaddresses</p></td>
<td align="left" valign="top"><p class="table">Returns objects IP addresses</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">guest_devices</p></td>
<td align="left" valign="top"><p class="table">Returns objects guest devices</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">storage_adapters</p></td>
<td align="left" valign="top"><p class="table">Returns objects storage adapters</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">nics</p></td>
<td align="left" valign="top"><p class="table">Returns objects nics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ports</p></td>
<td align="left" valign="top"><p class="table">Returns objects ports</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vm</p></td>
<td align="left" valign="top"><p class="table">Returns objects Virtual Machine</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">host</p></td>
<td align="left" valign="top"><p class="table">Returns objects Host</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">mac_addresses</p></td>
<td align="left" valign="top"><p class="table">Returns objects MAC addresses</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_hosts_host_a_hosts_host">2.21. <a id="Hosts (host)"></a> Hosts (host)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">authentication_password</p></td>
<td align="left" valign="top"><p class="table">Returns credential password</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">authentication_userid</p></td>
<td align="left" valign="top"><p class="table">Returns credential user</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">datacenter</p></td>
<td align="left" valign="top"><p class="table">Returns datacenter</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">directories</p></td>
<td align="left" valign="top"><p class="table">Returns list of directories for the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">domain</p></td>
<td align="left" valign="top"><p class="table">Returns the domain portion of the hostname</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_cluster</p></td>
<td align="left" valign="top"><p class="table">Returns cluster</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_events</p></td>
<td align="left" valign="top"><p class="table">Returns an array of EmsEvent records associated with the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_folder</p></td>
<td align="left" valign="top"><p class="table">Returns hosts folder on Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">event_log_threshold?(options)</p></td>
<td align="left" valign="top"><p class="table">Searches event log records to determine if an event has occurred x number of times within a defined time frame. Returns true if the number of matching records found are greater or equal to the specified freq_threshold, otherwise it returns false</p>
<p class="table">Options values:</p>
<p class="table"><strong>:message_filter_type</strong> - Must be one of "STARTS WITH", "ENDS WITH",
"INCLUDES", "REGULAR EXPRESSION"</p>
<p class="table"><strong>:message_filter_value</strong> - &lt;string value to search for&gt;</p>
<p class="table"><strong>:time_threshold</strong> - Options time interval to search. Example: 2.days
(Search the past 2 days of event logs) Default 10.days</p>
<p class="table"><strong>:freq_threshold</strong> - Number of occurrences to check for. Default = 2</p>
<p class="table"><strong>:source</strong>, <strong>:event_id</strong>, <strong>:level</strong>, <strong>:name</strong> - Options filter values</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">files</p></td>
<td align="left" valign="top"><p class="table">Returns list of files for the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">guest_applications</p></td>
<td align="left" valign="top"><p class="table">Returns Guest Applications</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">hardware</p></td>
<td align="left" valign="top"><p class="table">Returns hardware</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">lans</p></td>
<td align="left" valign="top"><p class="table">Returns LANs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">operating_system</p></td>
<td align="left" valign="top"><p class="table">Returns Operating System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">storages</p></td>
<td align="left" valign="top"><p class="table">Returns datastores</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">switches</p></td>
<td align="left" valign="top"><p class="table">Returns network switches</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns VMs.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">credentials(type = :remote)</p></td>
<td align="left" valign="top"><p class="table">Returns credentials for a Host for the specified type as an array for username/pwd. (Default type is :remote if no type is specified.)</p>
<p class="table">Supports 4 different types of credentials:</p>
<p class="table"><strong>:default</strong> = Default</p>
<p class="table"><strong>:remote</strong> = Remote Login (think SSH for ESX)</p>
<p class="table"><strong>:ws</strong> = Web Services</p>
<p class="table"><strong>:ipmi</strong> = IPMI</p>
<p class="table"><em>Example 1:</em></p>
<p class="table"><tt>cred = host.credentials</p>
<p class="table">cred =&gt; ["user", "pwd"]</tt></p>
<p class="table"><em>Example 2:</em></p>
<p class="table"><tt>user_str, pwd_str = host.credentials(:ipmi)</p>
<p class="table">user_str =&gt; "user"</p>
<p class="table">pwd_str =&gt; "pwd"</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_custom_keys</p></td>
<td align="left" valign="top"><p class="table">Returns Management Systems custom keys</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_custom_get(key)</p></td>
<td align="left" valign="top"><p class="table">Gets Value for specified Management Systems custom key</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_custom_set(attribute, value)</p></td>
<td align="left" valign="top"><p class="table">Sets value for specified custom key of the Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_keys</p></td>
<td align="left" valign="top"><p class="table">Lists CloudForms Management Engine Server custom keys</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_get(key)</p></td>
<td align="left" valign="top"><p class="table">Gets value for specified CloudForms Management Engine Server custom key</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_set(key, value)</p></td>
<td align="left" valign="top"><p class="table">Sets value for specified CloudForms Management Engine Server custom key</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ssh_exec(script)</p></td>
<td align="left" valign="top"><p class="table">Runs the specified script on the host</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_realtime_metric(metric, range, function)</p></td>
<td align="left" valign="top"><p class="table">Returns specified realtime metric</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">current_memory_usage</p></td>
<td align="left" valign="top"><p class="table">Returns current memory usage</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">current_cpu_usage</p></td>
<td align="left" valign="top"><p class="table">Returns current cpu usage</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">current_memory_headroom</p></td>
<td align="left" valign="top"><p class="table">Returns current memory headroom</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">to_s</p></td>
<td align="left" valign="top"><p class="table">Converts object to string</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">scan</p></td>
<td align="left" valign="top"><p class="table">Performs SmartState Analysis on the object</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>The following table lists the metric types available for the
<tt>get_realtime_metric(metric, range, function)</tt> method for hosts.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Metric                             </th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">v_derived_storage_used</p></td>
<td align="left" valign="top"><p class="table">Capacity - Used space in bytes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_pct_cpu_ready_delta_summation</p></td>
<td align="left" valign="top"><p class="table">CPU - Percentage ready</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_pct_cpu_wait_delta_summation</p></td>
<td align="left" valign="top"><p class="table">CPU - Percentage wait</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_pct_cpu_used_delta_summation</p></td>
<td align="left" valign="top"><p class="table">CPU - Percentage used</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_derived_host_count</p></td>
<td align="left" valign="top"><p class="table">State - Number of hosts (Hourly Count / Daily Average)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_derived_cpu_reserved_pct</p></td>
<td align="left" valign="top"><p class="table">CPU - Percentage available</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_derived_memory_reserved_pct</p></td>
<td align="left" valign="top"><p class="table">Memory - Percentage available</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>The following Ruby snippet demonstrates using the
<tt>get_realtime_metric(metric, range, function)</tt> method using the
<tt>v_pct_cpu_ready_delta_summation</tt> metric.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​​host <span style="color: #990000">=</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">'host'</span><span style="color: #990000">]</span>
​cpu_rdy <span style="color: #990000">=</span> host<span style="color: #990000">.</span>get_realtime_metric<span style="color: #990000">(:</span>v_pct_cpu_ready_delta_summation<span style="color: #990000">,</span> <span style="color: #990000">[</span><span style="color: #993399">15</span><span style="color: #990000">.</span>minutes<span style="color: #990000">.</span>ago<span style="color: #990000">.</span>utc<span style="color: #990000">,</span><span style="color: #993399">5</span><span style="color: #990000">.</span>minutes<span style="color: #990000">.</span>ago<span style="color: #990000">.</span>utc<span style="color: #990000">],</span> <span style="color: #990000">:</span>avg<span style="color: #990000">)</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​​  <span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpHost</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Inputs: $evm.root['host']</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump Host information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>
​
  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpHost<span style="color: #990000">(</span>host<span style="color: #990000">)</span>
​    host <span style="color: #990000">=</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>object<span style="color: #990000">[</span><span style="color: #FF0000">'host'</span><span style="color: #990000">]</span> <span style="color: #990000">||</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">'host'</span><span style="color: #990000">]</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Begin Attributes"</span><span style="color: #990000">)</span>
​    host<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Attributes - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; End Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Begin Associations"</span><span style="color: #990000">)</span>
​    host<span style="color: #990000">.</span>associations<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>assc<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Associations - #{assc}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; End Associations"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Begin Hardware"</span><span style="color: #990000">)</span>
​    host<span style="color: #990000">.</span>hardware<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span>v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Hardware - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; End Hardware"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Begin Lans"</span><span style="color: #990000">)</span>
​    host<span style="color: #990000">.</span>lans<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>lan<span style="color: #990000">|</span> lan<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span>v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Lan:&lt;#{lan.name}&gt; - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; End Lans"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Begin Switches"</span><span style="color: #990000">)</span>
​    host<span style="color: #990000">.</span>switches<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>switch<span style="color: #990000">|</span> switch<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span>v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Swtiche:&lt;#{switch.name}&gt; - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; End Switches"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Begin Operating System"</span><span style="color: #990000">)</span>
​    host<span style="color: #990000">.</span>operating_system<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Operating System - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; End Operating System"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Begin Guest Applications"</span><span style="color: #990000">)</span>
​    host<span style="color: #990000">.</span>guest_applications<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>guest_app<span style="color: #990000">|</span> guest_app<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Guest Application:&lt;#{guest_app.name}&gt; - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; End Guest Applications"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Begin Virtual Columns"</span><span style="color: #990000">)</span>
​    host<span style="color: #990000">.</span>virtual_column_names<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>vcn<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; Virtual Columns - #{vcn}: #{host.send(vcn).inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Host:&lt;#{host.name}&gt; End Virtual Columns"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h4 id="_a_id_hosts_vmware_esx_host_vmware_esx_a_hosts_vmware_esx_host_vmware_esx">2.21.1. <a id="Hosts: Vmware ESX (host_vmware_esx)"></a> Hosts: Vmware ESX (host_vmware_esx)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                                 </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">disable_vmotion(device = nil)</p></td>
<td align="left" valign="top"><p class="table">Disable vMotion</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">enable_vmotion(device = nil)</p></td>
<td align="left" valign="top"><p class="table">Enable vMotion</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">enter_maintenance_mode(timeout = 0, evacuate = false)</p></td>
<td align="left" valign="top"><p class="table">Put Host in Maintenance Mode</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">exit_maintenance_mode(timeout = 0)</p></td>
<td align="left" valign="top"><p class="table">Leave Maintenance Mode</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">in_maintenance_mode?</p></td>
<td align="left" valign="top"><p class="table">Check to see if the host is in Maintenance Mode</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">power_down_to_standby(timeout = 0, evacuate = false)</p></td>
<td align="left" valign="top"><p class="table">Put Host in standby</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">power_up_from_standby(timeout = 0)</p></td>
<td align="left" valign="top"><p class="table">Take Host out of standby</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">reboot(force = false)</p></td>
<td align="left" valign="top"><p class="table">Reboot Host</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">shutdown(force = false)</p></td>
<td align="left" valign="top"><p class="table">Shutdown Host</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vmotion_enabled?(device = nil)</p></td>
<td align="left" valign="top"><p class="table">Check to see if vMotion is enabled</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_lan_lan_a_lan_lan">2.22. <a id="LAN (lan)"></a> LAN (lan)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">switch</p></td>
<td align="left" valign="top"><p class="table">Returns objects switch</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">guest_devices</p></td>
<td align="left" valign="top"><p class="table">Returns objects guest devices</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns objects Virtual Machines</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">templates</p></td>
<td align="left" valign="top"><p class="table">Returns objects templates</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">hosts</p></td>
<td align="left" valign="top"><p class="table">Returns objects Hosts</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_groups_miq_group_a_groups_miq_group">2.23. <a id="Groups (miq_group)"></a> Groups (miq_group)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">users</p></td>
<td align="left" valign="top"><p class="table">Returns users in the current miq_group</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns Virtual Machines that this group owns</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_keys</p></td>
<td align="left" valign="top"><p class="table">Returns all custom keys for the group</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_get(key)</p></td>
<td align="left" valign="top"><p class="table">Returns the value of the specified custom key for the group</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_set(key, value)</p></td>
<td align="left" valign="top"><p class="table">Sets the value for the specified key</p></td>
</tr>
</tbody>
</table>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​  <span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpGroup</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Inputs: $evm.root['user'].miq_group</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump User's Group information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>

​  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpGroup
​    user <span style="color: #990000">=</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">'user'</span><span style="color: #990000">]</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> user<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      miq_group <span style="color: #990000">=</span> user<span style="color: #990000">.</span>miq_group
​      <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> miq_group<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​        <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - Group:&lt;#{miq_group.description}&gt; Begin Attributes [miq_group.attributes]"</span><span style="color: #990000">)</span>
​        miq_group<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@method} - Group:&lt;#{miq_group.description}&gt; Attributes - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">'user'</span><span style="color: #990000">].</span>miq_group<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​        <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - Group:&lt;#{miq_group.description}&gt; End Attributes [miq_group.attributes]"</span><span style="color: #990000">)</span>
​        <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​        <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - Group:&lt;#{miq_group.description}&gt; Begin Associations [miq_group.associations]"</span><span style="color: #990000">)</span>
​        miq_group<span style="color: #990000">.</span>associations<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>assc<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@method} - Group:&lt;#{miq_group.description}&gt; Associations - #{assc}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​        <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - Group:&lt;#{miq_group.description}&gt; End Associations [miq_group.associations]"</span><span style="color: #990000">)</span>
​        <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​        <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - Group:&lt;#{miq_group.description}&gt; Begin Virtual Columns [miq_group.virtual_column_names]"</span><span style="color: #990000">)</span>
​        miq_group<span style="color: #990000">.</span>virtual_column_names<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>vcn<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@method} - Group:&lt;#{miq_group.description}&gt; Virtual Columns - #{vcn}: #{miq_group.send(vcn).inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​        <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - Group:&lt;#{miq_group.description}&gt; End Virtual Columns [miq_group.virtual_column_names]"</span><span style="color: #990000">)</span>
​        <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​      <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​    <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h3 id="_a_id_request_miq_request_a_request_miq_request">2.24. <a id="Request (miq_request)"></a> Request (miq_request)</h3><div style="clear:left"></div>
<div class="paragraph"><p>Request objects are submitted to CloudForms Management Engine Server for
processing. After the request phase, the request becomes a task object.
The table below shows the relationship between a request object and a
task object.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Request Object                 </th>
<th align="left" valign="top">Task Object</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">automation_request</p></td>
<td align="left" valign="top"><p class="table">automation_task</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_host_provision_request</p></td>
<td align="left" valign="top"><p class="table">miq_host_provision</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_provision_request</p></td>
<td align="left" valign="top"><p class="table">miq_provision</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vm_reconfigure_request</p></td>
<td align="left" valign="top"><p class="table">vm_reconfigure_task</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">service_template_provision_request</p></td>
<td align="left" valign="top"><p class="table">service_template_provision_task</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vm_migrate_request</p></td>
<td align="left" valign="top"><p class="table">vm_migrate_task</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>If you set something on the request object, it will be inherited by the
task instance that does the work. This may be useful if you are
provisioning multiple virtual machines at a time and need to modify the
same setting for all. Otherwise, the item can be modified on the
individual task.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                             </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">add_tag(category, tag_name)</p></td>
<td align="left" valign="top"><p class="table">Add a tag to a provision instance by specifying the category and tag name</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>miq_provision.add_tag(:location, "CHI")</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">approve(approver,reason for approval)</p></td>
<td align="left" valign="top"><p class="table">Approves the miq_request.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>$evm.root["miq_request"].approve("admin", "Auto-Approved")</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">approvers</p></td>
<td align="left" valign="top"><p class="table">Returns request approvers.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">authorized?</p></td>
<td align="left" valign="top"><p class="table">Returns true if authorized, false if not.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">clear_tag(category=nil, tag_name=nil)</p></td>
<td align="left" valign="top"><p class="table">Without any parameters, the clear_tag method clears all tags from the provision request. Providing a category clears all tags selected in that category. Clear a specific category/tag by providing it.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>miq_provision.clear_tag(:location, "CHI")</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">deny</p></td>
<td align="left" valign="top"><p class="table">Denies the miq_request</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt># Deny the request</p>
<p class="table">$evm.log('info',"Request denied because of Quota")</p>
<p class="table">$evm.root["miq_request"].deny("admin", "Quota Exceeded")</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_classification(category)</p></td>
<td align="left" valign="top"><p class="table">Works the same as get_tag(category) but the returned data is a hash with :name and :description</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>request.get_classification(:department)</tt></p>
<p class="table"><em>Returns:</em></p>
<p class="table"><tt>[\{:name=&gt;"accounting", :description=&gt;"Accounting"}, {:name=&gt;"engineering", :description=&gt;"Engineering"}]</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_classifications</p></td>
<td align="left" valign="top"><p class="table">Works the same as get_tag but the returned tag data is a hash with :name and :description</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>request.get_classifications</tt></p>
<p class="table"><em>Returns:</em></p>
<p class="table"><tt>{:cc=&gt;\{:name=&gt;"001", :description=&gt;"Cost Center 001"}, :department=&gt;[\{:name=&gt;"accounting", :description=&gt;"Accounting"}, {:name=&gt;"engineering", :description=&gt;"Engineering"}]}</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_option(key)</p></td>
<td align="left" valign="top"><p class="table">Returns a value from the options hash based on the name of the key name passed in. Internally many of the values are stored as an array of items. (For example, a target host would be stored as the index to the host object in the db and the display name.) Calling this method will return the first item if it is an array. For non-array values the item is returned unmodified.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>miq_provision_request.get_option(:number_of_cpus)</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_tag(category)</p></td>
<td align="left" valign="top"><p class="table">Returns the tags selected for the specified tag category.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>request.get_tag(:department)</tt></p>
<p class="table"><em>Returns:</em></p>
<p class="table"><tt>["accounting", "engineering"]</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_tags</p></td>
<td align="left" valign="top"><p class="table">Get all selected tags stored in a hash by category. If more than one tag is selected in a category, the hash will contain an array of tag names. Otherwise it will contain the tag name as a string.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>request.get_tags</tt></p>
<p class="table"><em>Returns:</em></p>
<p class="table"><tt>{:cc=&gt;"001", :department=&gt;["accounting", "engineering"]}</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_request</p></td>
<td align="left" valign="top"><p class="table">(Legacy support) Internal Note: The miq_request instance use to be a separate instance from the specific request instance (like miq_provision_request). When the classes were refactored into 1 this method was added to allow existing code and automate methods to continue to run unchanged.)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_request_tasks</p></td>
<td align="left" valign="top"><p class="table">Returns the requests tasks</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">options</p></td>
<td align="left" valign="top"><p class="table">Returns a hash containing all the options set for the current provision object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">pending</p></td>
<td align="left" valign="top"><p class="table">Puts the object in a pending state for approval</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt># Raise automation event: request_pending</p>
<p class="table">$evm.root["miq_request"].pending</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">reason</p></td>
<td align="left" valign="top"><p class="table">Returns reason for approval or denial of request</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">requester</p></td>
<td align="left" valign="top"><p class="table">Returns the requester</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">resource</p></td>
<td align="left" valign="top"><p class="table">Returns the resource for the request</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_message(value)</p></td>
<td align="left" valign="top"><p class="table">Sets the message for the request</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_option(key, value)</p></td>
<td align="left" valign="top"><p class="table">Sets the specified key/value pair for the object</p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_automation_request_automation_request_a_automation_request_automation_request">2.24.1. <a id="Automation Request (automation_request)"></a> Automation Request (automation_request)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">automation_tasks</p></td>
<td align="left" valign="top"><p class="table">Returns objects automate tasks</p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_host_provision_request_miq_host_provision_request_a_host_provision_request_miq_host_provision_request">2.24.2. <a id="Host Provision Request (miq_host_provision_request)"></a> Host Provision Request (miq_host_provision_request)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">miq_host_provisions</p></td>
<td align="left" valign="top"><p class="table">Returns the miq_host_provisions objects</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ci_type</p></td>
<td align="left" valign="top"><p class="table">Returns the cloud infrastructure type: <tt>host</tt></p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_vm_provision_request_miq_provision_request_a_vm_provision_request_miq_provision_request">2.24.3. <a id="VM Provision Request (miq_provision_request)"></a> VM Provision Request (miq_provision_request)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                                 </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">check_quota(quota_type, options={})</p></td>
<td align="left" valign="top"><p class="table">Returns the quota information for the specified type</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ci_type</p></td>
<td align="left" valign="top"><p class="table">Returns the cloud infrastructure type: <em>vm</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_clusters</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Cluster objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_customization_templates</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Customization Templates filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_folders</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Folder objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_hosts</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Host objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_iso_images</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available ISO image objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_pxe_images</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available PXE Image objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_pxe_servers</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available PXE Server objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_resource_pools</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Resource Pool objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_resources(rsc_type)</p></td>
<td align="left" valign="top"><p class="table">Returns eligible resources given the type specified</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_storages</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Storage (Datastore) objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_windows_images</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Windows Image objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_folder_paths</p></td>
<td align="left" valign="top"><p class="table">Returns a hash where the key is an index and the value is the fully-qualified path name of the folder.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>{7 =&gt; Dev/Dept1/QA, 8 =&gt; Test/Dept2/QA}</tt></p>
<p class="table">This format is useful when a fully-qualified path is required to match the folder name. For example, if you had multiple QA folders under different departments in the sample above. To find the proper QA folder you need to evaluate the entire folder path.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_retirement_days</p></td>
<td align="left" valign="top"><p class="table">Returns the number of dates until retirement</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_provision</p></td>
<td align="left" valign="top"><p class="table">Returns the task.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_request</p></td>
<td align="left" valign="top"><p class="table">Returns the miq_provision_requests miq_request object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_cluster(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the cluster to use based on object returned from eligible_clusters</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_customization_template(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the customization_template to use based on object returned from eligible_customization_templates</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_folder(folder_path)</p></td>
<td align="left" valign="top"><p class="table">Set the folder to use based on object returned from eligible_folders. In addition, set_folder accepts the following folder types:</p>
<p class="table"><strong>Folder Paths</strong> - separated by forward slashes. Must include Data-center name. For example, <em>Prod/Discovered virtual machine</em> where <em>Prod</em> is the
Data-center name and <em>Discovered virtual machine</em> is the folder name.</p>
<p class="table"><strong>Object</strong> - object returned from the get_folder_paths method.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_host(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the host to use based on object returned from eligible_hosts</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_network_adapter(idx, nic_hash, value=nil)</p></td>
<td align="left" valign="top"><p class="table">Modifies the network card attached to the VM container</p>
<p class="table"><em>Available settings:</em></p>
<p class="table"><strong>:is_dvs</strong> true / false (Default: false)</p>
<p class="table"><strong>:network</strong> (Network Name)</p>
<p class="table"><strong>:mac_address</strong></p>
<p class="table"><strong>:devicetype</strong> (Default: VirtualPCNet32) Defined by VMware: <a href="http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.device.VirtualEthernetCard.html">http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.device.VirtualEthernetCard.html</a></p>
<p class="table"><strong>:connectable</strong> &#8658; {:allowguestcontrol &#8658; true / false} (Default: true)</p>
<p class="table"><strong>:connectable</strong> &#8658; {:startconnected &#8658; true / false} (Default: true)</p>
<p class="table"><strong>:connectable</strong> &#8658; {:connected &#8658; true / false} (Default: true)</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>prov.set_network_adapter(1, {:network =&gt; dvs_net1, :is_dvs =&gt; true} )</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_network_address_mode(mode)</p></td>
<td align="left" valign="top"><p class="table">Sets IP address type. Available modes are dhcp and static</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_nic_settings(idx, nic_hash, value=nil)</p></td>
<td align="left" valign="top"><p class="table">Modifies the network interface settings at the operating system level</p>
<p class="table"><em>Available settings:</em></p>
<p class="table"><strong>:addr_mode</strong> "dhcp" / "static" (Default: Statis)</p>
<p class="table"><strong>:ip_addr</strong></p>
<p class="table"><strong>:subnet_mask</strong></p>
<p class="table"><strong>:gateway</strong></p>
<p class="table"><strong>:dns_domain</strong></p>
<p class="table"><strong>:dns_servers</strong> (Windows Only) Comma separated values</p>
<p class="table"><strong>:sysprep_netbios_mode</strong> (Windows Only) Defined by VMware: <a href="http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.customization.IPSettings.NetBIOSMode.html">http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.customization.IPSettings.NetBIOSMode.html</a></p>
<p class="table"><strong>:wins_servers</strong> Passed as a string specifying the Primary and Secondary WINS servers separated by a comma. <tt>&lt;PrimaryWINS&gt;, &lt;SecondaryWINS&gt;</tt></p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>prov.set_nic_settings(1, {:ip_addr=&gt;10.226.133.55, :subnet_mask=&gt;'255.255.255.192', :gateway=&gt;'10.226.133.5', :addr_mode=&gt;["static", "Static"] } )</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_iso_image(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the iso_image to use based on object returned from eligible_iso_images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_pxe_image(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the pxe_image to use based on object returned from eligible_pxe_images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_pxe_server(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the pxe_server to use based on object returned from eligible_pxe_servers</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_resource_pool(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the resource_pool to use based on object returned from eligible_resource_pools</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_resource(rsc)</p></td>
<td align="left" valign="top"><p class="table">Sets the resource for the request. (Helper method, should not be called directly)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_retirement_days</p></td>
<td align="left" valign="top"><p class="table">Set the number of days until retirement</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_storage(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the Datastore (storage object) to use based on object returned from eligible_storages</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_vm_notes(note)</p></td>
<td align="left" valign="top"><p class="table">Sets text for the VM notes (aka annotation) field</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_windows_image(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the windows_image to use based on object returned from eligible_windows_images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">source_type</p></td>
<td align="left" valign="top"><p class="table">Returns the provision source type. (values are <em>vm</em> or <em>template</em>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">src_vm_id</p></td>
<td align="left" valign="top"><p class="table">Returns ID of the template being cloned</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">target_type</p></td>
<td align="left" valign="top"><p class="table">Returns the provision target type. (values are <em>vm</em> or <em>template</em>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vm_template</p></td>
<td align="left" valign="top"><p class="table">Returns the requests template</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_request_task_miq_request_task_a_request_task_miq_request_task">2.25. <a id="Request Task (miq_request_task)"></a> Request Task (miq_request_task)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                                 </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">add_tag(category, tag_name)</p></td>
<td align="left" valign="top"><p class="table">Add a tag to a provision instance by specifying the category and tag name.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>miq_provision.add_tag(:location, "CHI")</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">clear_tag(category=nil, tag_name=nil)</p></td>
<td align="left" valign="top"><p class="table">Without any parameters, the clear_tag method will clear all tags from the provision request. Providing a category will clear all tags selected in that category. Clear a specific category/tag by providing it.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>miq_provision.clear_tag(:location, "CHI")</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">destination</p></td>
<td align="left" valign="top"><p class="table">Returns the destination object. (The resultant object from running the task. In the case of provisioning, this would be the newly created VM.)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">execute</p></td>
<td align="left" valign="top"><p class="table">Executes or processes the request.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">finished(msg)</p></td>
<td align="left" valign="top"><p class="table">Sets the task to finished with the supplied message.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_classification(category)</p></td>
<td align="left" valign="top"><p class="table">Works the same as get_tag(category) but the returned data is a hash with :name and :description.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>request.get_classification(:department)</tt></p>
<p class="table"><em>Returns:</em></p>
<p class="table"><tt>[{:name=&gt;"accounting", :description=&gt;"Accounting"}, {:name=&gt;"engineering", :description=&gt;"Engineering"}]</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_classifications</p></td>
<td align="left" valign="top"><p class="table">Works the same as get_tag but the returned tag data is a hash with :name and :description.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>request.get_classifications</tt></p>
<p class="table"><em>Returns:</em></p>
<p class="table"><tt>{:cc=&gt;{:name=&gt;"001", :description=&gt;"Cost Center 001"}, :department=&gt;[{:name=&gt;"accounting", :description=&gt;"Accounting"}, {:name=&gt;"engineering", :description=&gt;"Engineering"}]}</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_option_last(key)</p></td>
<td align="left" valign="top"><p class="table">This method is the same as get_option, except that it returns the last array value.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_option(key)</p></td>
<td align="left" valign="top"><p class="table">Returns a value from the options hash based on the name of the key name passed in. Internally many of the values are stored as an array of items. (For example, a target host would be stored as the index to the host object in the db and the display name.) Calling this method will return the first item if it is an array. For non-array values the item is returned unmodified.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>miq_provision_request.get_option(:number_of_cpus)</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_tag(category)</p></td>
<td align="left" valign="top"><p class="table">Returns the tags selected for the specified tag category.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>request.get_tag(:department)</tt></p>
<p class="table"><em>Returns:</em></p>
<p class="table"><tt>["accounting", "engineering"]</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_tags</p></td>
<td align="left" valign="top"><p class="table">Get all selected tags stored in a hash by category. If more than one tag is selected in a category, the hash will contain an array of tag names. Otherwise it will contain the tag name as a string.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>request.get_tag</tt></p>
<p class="table"><em>Returns:</em></p>
<p class="table"><tt>{:cc=&gt;"001", :department=&gt;["accounting", "engineering"]}</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">message=(msg)</p></td>
<td align="left" valign="top"><p class="table">Sets the message for the request task.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_request</p></td>
<td align="left" valign="top"><p class="table">Returns the miq_request for the task.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_request_task</p></td>
<td align="left" valign="top"><p class="table">Returns the parent miq_request task.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_request_tasks</p></td>
<td align="left" valign="top"><p class="table">Returns the children miq_request tasks.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">options</p></td>
<td align="left" valign="top"><p class="table">Returns a hash containing all the options set for the current object.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_option(key, value)</p></td>
<td align="left" valign="top"><p class="table">Updates a key/value pair in the options hash for the provision object. Often the value is required to be an array.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">source</p></td>
<td align="left" valign="top"><p class="table">Returns the source object. (The source, or input, object that the task runs against. In the case of provisioning, this would be the VM or template selected to be provisioned.)</p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_automation_task_automation_task_a_automation_task_automation_task">2.25.1. <a id="Automation Task (automation_task)"></a> Automation Task (automation_task)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                 </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">automation_request</p></td>
<td align="left" valign="top"><p class="table">Returns associated automation_request object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">status</p></td>
<td align="left" valign="top"><p class="table">Returns status of the task</p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_host_provision_task_miq_host_provision_a_host_provision_task_miq_host_provision">2.25.2. <a id="Host Provision Task (miq_host_provision)"></a> ⁠Host Provision Task (miq_host_provision)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">host</p></td>
<td align="left" valign="top"><p class="table">Returns objects host</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_host_provision_request</p></td>
<td align="left" valign="top"><p class="table">Returns the request that created the task</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">status</p></td>
<td align="left" valign="top"><p class="table">Returns status of host provision</p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_vm_provision_task_miq_provision_a_vm_provision_task_miq_provision">2.25.3. <a id="VM Provision Task (miq_provision)"></a> VM Provision Task (miq_provision)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                                 </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">check_quota(quota_type, options={})</p></td>
<td align="left" valign="top"><p class="table">Returns the quota information for the specified type</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_clusters</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Cluster objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_customization_templates</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Customization Templates</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_folders</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Folder objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_hosts</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Host objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_iso_images</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available ISO Image objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_pxe_images</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available PXE Image objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_pxe_servers</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available PXE Servers filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_resource_pools</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Resource Pool objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_resources(rsc_type)</p></td>
<td align="left" valign="top"><p class="table">Returns the eligible resources for the resource type specified</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_storages</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Storage (Datastore) objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">eligible_windows_images</p></td>
<td align="left" valign="top"><p class="table">Returns an array of available Windows Image objects filtered by previously selected resources</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_domain_details</p></td>
<td align="left" valign="top"><p class="table">Returns domain information</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_domain_name</p></td>
<td align="left" valign="top"><p class="table">Returns domain name</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_folder_paths</p></td>
<td align="left" valign="top"><p class="table">Returns a hash where the key is an index and the value is the fully-qualified path name of the folder.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>{7 =&gt; Dev/Dept1/QA, 8 =&gt; Test/Dept2/QA})</tt>.</p>
<p class="table">This format is useful when a fully-qualified path is required to match the folder name. For example, if you had multiple QA folders under different departments in the sample above. To find the proper QA folder you need to evaluate the entire folder path.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_network_details</p></td>
<td align="left" valign="top"><p class="table">Returns network information</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_network_scope</p></td>
<td align="left" valign="top"><p class="table">Returns network scope</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_provision_request</p></td>
<td align="left" valign="top"><p class="table">Returns the provision request object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_cluster(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the cluster to use based on object returned from eligible_clusters</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_customization_spec(name=nil, override=false)</p></td>
<td align="left" valign="top"><p class="table">Sets the name of the custom spec to use as defined by its name in Virtual Center</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_customization_template(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the customization_template to use based on object returned from eligible_customization_templates</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_dvs(portgroup, switch = portgroup)</p></td>
<td align="left" valign="top"><p class="table">Set the name of the Distributed Virtual Switch (portgroup). An options &lt;switch&gt; name can also be passed</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>miq_provision.set_dvs('default')</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_folder(folder_path)</p></td>
<td align="left" valign="top"><p class="table">Set the folder to use based on object returned from eligible_folders. In addition, set_folder accepts the following folder types:</p>
<p class="table"><strong>Folder Paths</strong> - separated by forward slashes. Must include Data-center name.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><em>Prod/Discovered virtual machine</em> where <em>Prod</em> is the Data-center name and <em>Discovered virtual machine</em> is the folder name.</p>
<p class="table"><strong>Object</strong> - object returned from the get_folder_paths method</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_host(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the host to use based on object returned from eligible_hosts</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_network_adapter(idx, nic_hash, value=nil)</p></td>
<td align="left" valign="top"><p class="table">Modifies the network card attached to the VM container</p>
<p class="table"><em>Available settings:</em></p>
<p class="table"><strong>:is_dvs</strong> true / false (Default: false)</p>
<p class="table"><strong>:network</strong> (Network Name)</p>
<p class="table"><strong>:mac_address</strong></p>
<p class="table"><strong>:devicetype</strong> (Default: VirtualPCNet32) Defined by VMware: <a href="http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.device.VirtualEthernetCard.html">http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.device.VirtualEthernetCard.html</a></p>
<p class="table"><strong>:connectable</strong> &#8658; {:allowguestcontrol &#8658; true / false} (Default: true)</p>
<p class="table"><strong>:connectable</strong> &#8658; {:startconnected &#8658; true / false} (Default: true)</p>
<p class="table"><strong>:connectable</strong> &#8658; {:connected &#8658; true / false} (Default: true)</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>prov.set_network_adapter(1, {:network =&gt; dvs_net1, :is_dvs =&gt; true} )</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_network_address_mode(mode)</p></td>
<td align="left" valign="top"><p class="table">Available modes are dhcp and static</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_nic_settings(idx, nic_hash, value=nil)</p></td>
<td align="left" valign="top"><p class="table">Modifies the network interface settings at the operating system level</p>
<p class="table"><em>Available settings:</em></p>
<p class="table"><strong>:addr_mode</strong> "dhcp" / "static" (Default: Statis)</p>
<p class="table"><strong>:ip_addr</strong></p>
<p class="table"><strong>:subnet_mask</strong></p>
<p class="table"><strong>:gateway</strong></p>
<p class="table"><strong>:dns_domain</strong></p>
<p class="table"><strong>:dns_servers</strong> (Windows Only) Comma separated values</p>
<p class="table"><strong>:sysprep_netbios_mode</strong> (Windows Only) Defined by VMware: <a href="http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.customization.IPSettings.NetBIOSMode.html">http://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.vm.customization.IPSettings.NetBIOSMode.html</a></p>
<p class="table"><strong>:wins_servers</strong> Passed as a string specifying the Primary and Secondary WINS servers separated by a comma. "&lt;PrimaryWINS&gt;, &lt;SecondaryWINS&gt;"</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>prov.set_nic_settings(1, {:ip_addr=&gt;10.226.133.55, :subnet_mask=&gt;'255.255.255.192', :gateway=&gt;'10.226.133.5', :addr_mode=&gt;["static", "Static"] } )</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_iso_image(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the iso_image to use based on object returned from eligible_iso_images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_pxe_image(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the pxe_image to use based on object returned from eligible_pxe_images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_pxe_server(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the pxe_server to use based on object returned from eligible_pxe_servers</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_resource_pool(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the resource_pool to use based on object returned from eligible_resource_pools</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_storage(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the Datastore (storage object) to use based on object returned from eligible_storages</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_vlan(vlan)</p></td>
<td align="left" valign="top"><p class="table">Sets the name of the VLan to use</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>miq_provision.set_vlan('default')</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_vm_notes(note)</p></td>
<td align="left" valign="top"><p class="table">Sets text for the VM notes (aka annotation) field</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_vm_notes(notes)</p></td>
<td align="left" valign="top"><p class="table">Sets text for the VM notes (aka annotation) field</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_windows_image(rsc)</p></td>
<td align="left" valign="top"><p class="table">Set the windows_image to use based on object returned from eligible_windows_images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">source_type</p></td>
<td align="left" valign="top"><p class="table">Returns the provision source type. (values are <em>vm</em> or <em>template</em>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">status</p></td>
<td align="left" valign="top"><p class="table">Returns provision status</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">target_type</p></td>
<td align="left" valign="top"><p class="table">Returns the provision target type. (values are <em>vm</em> or <em>template</em>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vdi_farm</p></td>
<td align="left" valign="top"><p class="table">Returns VDI Farm information</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vm</p></td>
<td align="left" valign="top"><p class="table">The newly created vm</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vm_template</p></td>
<td align="left" valign="top"><p class="table">Returns the template selected to be provisioned</p></td>
</tr>
</tbody>
</table>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​​<span style="font-weight: bold"><span style="color: #0000FF">begin</span></span>
​  miq_provision <span style="color: #990000">=</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">"miq_provision"</span><span style="color: #990000">]</span> <span style="color: #990000">||</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">'miq_provision'</span><span style="color: #990000">]</span>
​  prov <span style="color: #990000">=</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">"miq_provision"</span><span style="color: #990000">]</span>
​  user <span style="color: #990000">=</span> prov<span style="color: #990000">.</span>miq_request<span style="color: #990000">.</span>requester
​  <span style="font-weight: bold"><span style="color: #0000FF">raise</span></span> <span style="color: #FF0000">"User not specified"</span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> user<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​
​  <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Process Change Request Number and set VM Annotation</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​  intake <span style="color: #990000">=</span> prov<span style="color: #990000">.</span>get_option<span style="color: #990000">(:</span>vm_description<span style="color: #990000">)</span>
​  intake <span style="color: #990000">=</span> <span style="color: #FF0000">"Change Request#: #{intake}"</span>
​  prov<span style="color: #990000">.</span>set_option<span style="color: #990000">(:</span>vm_description<span style="color: #990000">,</span>intake<span style="color: #990000">)</span>
​
​  <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Set the customization spec based on the environment tag chosen in the dialog</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​  tags <span style="color: #990000">=</span> prov<span style="color: #990000">.</span>get_tags
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"Tags: #{tags.inspect}"</span><span style="color: #990000">)</span>
​  env <span style="color: #990000">=</span> tags<span style="color: #990000">[:</span>environment<span style="color: #990000">]</span>
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"Mapping custom spec based on Category Environment &lt;#{env}&gt; chosen in the dialog"</span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> env<span style="color: #990000">.</span>eql? <span style="color: #FF0000">"dev"</span>
​    customization_spec <span style="color: #990000">=</span> <span style="color: #FF0000">"Dev-Specification"</span>
​    miq_provision<span style="color: #990000">.</span>set_customization_spec<span style="color: #990000">(</span>customization_spec<span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> env<span style="color: #990000">.</span>eql? <span style="color: #FF0000">"stg"</span>
​    customization_spec <span style="color: #990000">=</span> <span style="color: #FF0000">"Stg-Specification"</span>
​    miq_provision<span style="color: #990000">.</span>set_customization_spec<span style="color: #990000">(</span>customization_spec<span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​  <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Set the VM Notes as follows:</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​  vm_notes <span style="color: #990000">=</span> <span style="color: #FF0000">"#{intake}"</span>
​  vm_notes <span style="color: #990000">+=</span>  <span style="color: #FF0000">"\nOwner: #{miq_provision.get_option(:owner_first_name)} #{miq_provision.get_option(:owner_last_name)}"</span>
​  vm_notes <span style="color: #990000">+=</span> <span style="color: #FF0000">"\nEmail: #{miq_provision.get_option(:owner_email)}"</span>
​  vm_notes <span style="color: #990000">+=</span> <span style="color: #FF0000">"\nSource Template: #{miq_provision.vm_template.name}"</span>
​  miq_provision<span style="color: #990000">.</span>set_vm_notes<span style="color: #990000">(</span>vm_notes<span style="color: #990000">)</span>
​
​  <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Drop the VM in the targeted folder</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># In VC a folder must exist that matches the LDAP Group</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># VM will be placed in the Folder</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> prov<span style="color: #990000">.</span>get_option<span style="color: #990000">(:</span>placement_folder_name<span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​    <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​    <span style="font-style: italic"><span style="color: #9A1900"># If you want to use a Default folder, set folder = below to the default</span></span>
​    <span style="font-style: italic"><span style="color: #9A1900">###################################</span></span>
​    <span style="font-style: italic"><span style="color: #9A1900">#    folder = "22F DC/LAB FARM/GSE/Intel/Infrastructure/ManageIQ/SelfServiceVMs"</span></span>
​    folder <span style="color: #990000">=</span> <span style="color: #FF0000">"DC1/Infrastructure/ManageIQ/SelfService"</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"Placing VM in VC folder: &lt;#{folder}"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"Set_folder called with [#{folder.inspect}]"</span><span style="color: #990000">)</span>
​
​    miq_provision<span style="color: #990000">.</span>set_folder<span style="color: #990000">(</span>folder<span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​  <span style="font-style: italic"><span style="color: #9A1900">####################################################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Set the IP Address based on the :mac_address entered in the dialog</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">####################################################</span></span>
​  ipaddr <span style="color: #990000">=</span> prov<span style="color: #990000">.</span>get_option<span style="color: #990000">(:</span>mac_address<span style="color: #990000">)</span>
​
​  <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">!</span> ipaddr<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​    <span style="font-style: italic"><span style="color: #9A1900"># Set provisioning options to override options</span></span>
​    prov<span style="color: #990000">.</span>set_option<span style="color: #990000">(:</span>sysprep_spec_override<span style="color: #990000">,</span> <span style="color: #990000">[</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">])</span>
​    prov<span style="color: #990000">.</span>set_option<span style="color: #990000">(:</span>addr_mode<span style="color: #990000">,</span> <span style="color: #990000">[</span><span style="color: #FF0000">"static"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"Static"</span><span style="color: #990000">])</span>
​    prov<span style="color: #990000">.</span>set_option<span style="color: #990000">(:</span>ip_addr<span style="color: #990000">,</span> ipaddr<span style="color: #990000">)</span>
​    <span style="font-style: italic"><span style="color: #9A1900"># Reset :mac_address to nil</span></span>
​    prov<span style="color: #990000">.</span>set_option<span style="color: #990000">(:</span>mac_address<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"Provision Options: #{prov.options.inspect}"</span><span style="color: #990000">)</span>
​
​  exit MIQ_OK
​
​<span style="font-weight: bold"><span style="color: #0000FF">rescue</span></span> <span style="color: #990000">=&gt;</span> err
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"Set_folder err [#{err}]\n#{err.backtrace.join("</span><span style="color: #990000">\</span>n<span style="color: #FF0000">")}"</span><span style="color: #990000">)</span>
​<span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h4 id="_a_id_vm_provisioning_for_clouds_task_miq_provision_cloud_a_vm_provisioning_for_clouds_task_miq_provision_cloud">2.25.4. <a id="VM Provisioning for Clouds Task (miq_provision_cloud)"></a> VM Provisioning for Clouds Task (miq_provision_cloud)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">availability_zones</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s availability zones</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">instance_types</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s instance types</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">security_groups</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s security groups</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">floating_ip_addresses</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s floating IP addresses</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_networks</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud network</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_subnets</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud subnet</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">guest_access_key_pairs</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s guest key pair</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_tenants</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud tenant</p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_service_template_provision_task_service_template_provision_task_a_service_template_provision_task_service_template_provision_task">2.25.5. <a id="Service Template Provision Task (service_template_provision_task)"></a> Service Template Provision Task (service_template_provision_task)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                         </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">dialog_options</p></td>
<td align="left" valign="top"><p class="table">Returns objects dialog options hash</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_dialog_option(key)</p></td>
<td align="left" valign="top"><p class="table">Returns objects dialog value for the specified key</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">service_resource</p></td>
<td align="left" valign="top"><p class="table">Returns the service resource for the task</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_dialog_option(key, value)</p></td>
<td align="left" valign="top"><p class="table">Sets a dialog option</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>set_dialog_option('memory',memory_size)</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">status</p></td>
<td align="left" valign="top"><p class="table">Returns the tasks status</p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_service_reconfiguration_task_service_reconfigure_task_a_service_reconfiguration_task_service_reconfigure_task">2.25.6. <a id="Service Reconfiguration Task (service_reconfigure_task)"></a> Service Reconfiguration Task (service_reconfigure_task)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                         </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">dialog_options</p></td>
<td align="left" valign="top"><p class="table">Show all dialog options for object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_dialog_option(key)</p></td>
<td align="left" valign="top"><p class="table">Show a dialog option based stored in key</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_dialog_option(key, value)</p></td>
<td align="left" valign="top"><p class="table">Set value as a dialog option in key</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">status</p></td>
<td align="left" valign="top"><p class="table">Returns status of the task</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">finished(msg)</p></td>
<td align="left" valign="top"><p class="table">Sets the task to finished with the supplied message</p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_vm_migrate_task_vm_migrate_task_a_vm_migrate_task_vm_migrate_task">2.25.7. <a id="VM Migrate Task (vm_migrate_task)"></a> VM Migrate Task (vm_migrate_task)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method             </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">status</p></td>
<td align="left" valign="top"><p class="table">Returns status of the migration task</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_proxies_miq_proxy_a_proxies_miq_proxy">2.26. <a id="Proxies (miq_proxy)"></a> ⁠Proxies (miq_proxy)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method             </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">host</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s hosts</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">powershell(script, returns = <em>string</em>)</p></td>
<td align="left" valign="top"><p class="table">Submits a powershell script</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_servers_miq_server_a_servers_miq_server">2.27. <a id="Servers (miq_server)"></a> Servers (miq_server)</h3><div style="clear:left"></div>
<div class="paragraph"><p>These methods are available to the CloudForms Management Engine Server.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method             </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">zone</p></td>
<td align="left" valign="top"><p class="table">Returns CloudForms Management Engine Servers Zone</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">region_number</p></td>
<td align="left" valign="top"><p class="table">Returns CloudForms Management Engine Servers Region Number</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">region_name</p></td>
<td align="left" valign="top"><p class="table">Returns CloudForms Management Engine Servers Region Name</p></td>
</tr>
</tbody>
</table>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​  <span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpServer</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Inputs: $evm.root['miq_server']</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump MIQ Server information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpServer
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - Server:&lt;#{$evm.root['miq_server'].name}&gt; Begin Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">'miq_server'</span><span style="color: #990000">].</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@method} - Server:&lt;#{$evm.root['miq_server'].name}&gt; Attributes - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - Server:&lt;#{$evm.root['miq_server'].name}&gt; End Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h3 id="_a_id_network_network_a_network_network">2.28. <a id="Network (network)"></a> Network (network)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method             </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">hardware</p></td>
<td align="left" valign="top"><p class="table">Returns objects hardware</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">guest_device</p></td>
<td align="left" valign="top"><p class="table">Returns objects guest devices</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_pxe_image_pxe_image_a_pxe_image_pxe_image">2.29. <a id="PXE Image (pxe_image)"></a> PXE Image (pxe_image)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">customization_templates</p></td>
<td align="left" valign="top"><p class="table">Returns objects customization templates</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">pxe_server</p></td>
<td align="left" valign="top"><p class="table">Returns objects pxe server</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_pxe_server_pxe_server_a_pxe_server_pxe_server">2.30. <a id="PXE Server (pxe_server)"></a> ⁠PXE Server (pxe_server)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">advertised_images</p></td>
<td align="left" valign="top"><p class="table">Returns objects advertised images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">advertised_pxe_images</p></td>
<td align="left" valign="top"><p class="table">Returns objects advertised pxe images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">default_pxe_image_for_windows</p></td>
<td align="left" valign="top"><p class="table">Returns objects default pxe image for windows</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">discovered_images</p></td>
<td align="left" valign="top"><p class="table">Returns objects discovered images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">discovered_pxe_images</p></td>
<td align="left" valign="top"><p class="table">Returns objects discovered pxe images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">images</p></td>
<td align="left" valign="top"><p class="table">Returns objects images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">pxe_images</p></td>
<td align="left" valign="top"><p class="table">Returns objects pxe_images</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">windows_images</p></td>
<td align="left" valign="top"><p class="table">Returns objects windows images</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_security_groups_security_group_a_security_groups_security_group">2.31. <a id="Security Groups (security_group)"></a> Security Groups (security_group)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_network</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud network</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_tenant</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud tenant</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">firewall_rules</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s firewall rules</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s VMs</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_service_service_a_service_service">2.32. <a id="Service (service)"></a> ⁠Service (service)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">custom_keys</p></td>
<td align="left" valign="top"><p class="table">Returns custom keys</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">customer_get</p></td>
<td align="left" valign="top"><p class="table">Gets Value for specified custom key</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_set(attribute, value)</p></td>
<td align="left" valign="top"><p class="table">Sets value for specified custom key</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">display=(display)</p></td>
<td align="left" valign="top"><p class="table">Set display option</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">group=(group)</p></td>
<td align="left" valign="top"><p class="table">Sets group that owns the service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">name=(new_name)</p></td>
<td align="left" valign="top"><p class="table">Sets name of service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">owner=(owner)</p></td>
<td align="left" valign="top"><p class="table">Sets owner of the service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">retire_now</p></td>
<td align="left" valign="top"><p class="table">Retire Service immediately</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">retirement_warn=(seconds)</p></td>
<td align="left" valign="top"><p class="table">Sets when to send retirement warning</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">retires_on=(date)</p></td>
<td align="left" valign="top"><p class="table">Sets retirement date</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">shutdown_guest</p></td>
<td align="left" valign="top"><p class="table">Shuts downs guest operating system of the Service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">start</p></td>
<td align="left" valign="top"><p class="table">Start the Service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">stop</p></td>
<td align="left" valign="top"><p class="table">Stop the Service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">suspend</p></td>
<td align="left" valign="top"><p class="table">Suspend the Service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Show all virtual machines associated with this service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">direct_vms</p></td>
<td align="left" valign="top"><p class="table">Show virtual machines directly associated with this service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">indirect_vms</p></td>
<td align="left" valign="top"><p class="table">Show virtual machines associated with lower level services in the hierarchy</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">root_service</p></td>
<td align="left" valign="top"><p class="table">Show the top level service in the hierarchy for the target service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">all_service_children</p></td>
<td align="left" valign="top"><p class="table">Show all lower level services to the target service in the hierarchy</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">direct_service_children</p></td>
<td align="left" valign="top"><p class="table">Show direct services associated with the target service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">indirect_service_children</p></td>
<td align="left" valign="top"><p class="table">Show services associated with lower level services of the target service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">parent_service</p></td>
<td align="left" valign="top"><p class="table">Show the parent service for the target service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">description=(new_description)</p></td>
<td align="left" valign="top"><p class="table">Sets the service description</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">remove_from_vmdb</p></td>
<td align="left" valign="top"><p class="table">Delete the service from the database</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">dialog_options</p></td>
<td align="left" valign="top"><p class="table">Returns all dialog options</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_dialog_option(key)</p></td>
<td align="left" valign="top"><p class="table">Returns a specific dialog option specified by <tt>key</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">set_dialog_option(key, value)</p></td>
<td align="left" valign="top"><p class="table">Sets <tt>value</tt> of a dialog option specified by <tt>key</tt></p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_service_resource_service_resource_a_service_resource_service_resource">2.33. <a id="Service Resource (service_resource)"></a> ⁠Service Resource (service_resource)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method             </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">service</p></td>
<td align="left" valign="top"><p class="table">Returns the associated service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">service_template</p></td>
<td align="left" valign="top"><p class="table">Returns the associated service template</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">resource</p></td>
<td align="left" valign="top"><p class="table">Returns the resource for the request</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">source</p></td>
<td align="left" valign="top"><p class="table">Returns the source object</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_service_template_service_template_a_service_template_service_template">2.34. <a id="Service Template (service_template)"></a> Service Template (service_template)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method         </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">group=(group)</p></td>
<td align="left" valign="top"><p class="table">Sets group for the service template</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">owner=(owner)</p></td>
<td align="left" valign="top"><p class="table">Sets owner for the service template</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_snapshot_snapshot_a_snapshot_snapshot">2.35. <a id="Snapshot (snapshot)"></a> Snapshot (snapshot)</h3><div style="clear:left"></div>
<div class="paragraph"><p>These methods can be used on Snapshots</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                 </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">vm</p></td>
<td align="left" valign="top"><p class="table">Returns Snapshots VM</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">current?</p></td>
<td align="left" valign="top"><p class="table">Checks to see if this is the current snapshot</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_current_snapshot</p></td>
<td align="left" valign="top"><p class="table">Returns the current snapshot id</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">revert_to</p></td>
<td align="left" valign="top"><p class="table">Reverts to specified snapshot</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">remove</p></td>
<td align="left" valign="top"><p class="table">Removes specified snapshot</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_datastores_storage_a_datastores_storage">2.36. <a id="Datastores (storage)"></a> Datastores (storage)</h3><div style="clear:left"></div>
<div class="paragraph"><p>|============================================⁠========================
|Method                     |Use
|ext_management_systems     |Returns objects Management System
|hosts                      |Returns objects Hosts
|vms                        |Returns objects Virtual Machines
|unregistered_vms           |Returns objects unregistered Virtual Machines
|to_s                       |Converts object to string
|scan                       |Performs SmartState Analysis on the object
|============================================⁠========================</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> ​ <span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpStorage</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Inputs: $evm.root['storage']</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump Storage information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>
​
  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpStorage<span style="color: #990000">(</span>storage<span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Storage:&lt;#{storage.name}&gt; Begin Attributes"</span><span style="color: #990000">)</span>
​    storage<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Storage:&lt;#{storage.name}&gt; Attributes - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Storage:&lt;#{storage.name}&gt; End Attributes"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Storage:&lt;#{storage.name}&gt; Begin Associations"</span><span style="color: #990000">)</span>
​    storage<span style="color: #990000">.</span>associations<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>assc<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Storage:&lt;#{storage.name}&gt; Associations - #{assc}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Storage:&lt;#{storage.name}&gt; End Associations"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Storage:&lt;#{storage.name}&gt; Begin Virtual Columns"</span><span style="color: #990000">)</span>
​    storage<span style="color: #990000">.</span>virtual_column_names<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>vcn<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - Storage:&lt;#{storage.name}&gt; Virtual Columns - #{vcn}: #{storage.send(vcn)}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - Storage:&lt;#{storage.name}&gt; End Virtual Columns"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h3 id="_a_id_switch_switch_a_switch_switch">2.37. <a id="Switch (switch)"></a> Switch (switch)</h3><div style="clear:left"></div>
<div class="paragraph"><p>These methods can be used on Switches.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method         </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">host</p></td>
<td align="left" valign="top"><p class="table">Returns switch&#8217;s Host</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">guest_devices</p></td>
<td align="left" valign="top"><p class="table">Returns switch&#8217;s guest devices</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">lans</p></td>
<td align="left" valign="top"><p class="table">Returns switch&#8217;s lans</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_user_user_a_user_user">2.38. <a id="User (user)"></a> ⁠User (user)</h3><div style="clear:left"></div>
<div class="paragraph"><p>These methods can be used on the currently logged on user.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">current_group</p></td>
<td align="left" valign="top"><p class="table">Returns user&#8217;s assigned internal group</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_get(key)</p></td>
<td align="left" valign="top"><p class="table">Returns the custom key value specified by "key"</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_keys</p></td>
<td align="left" valign="top"><p class="table">Returns an array of custom keys</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_set(key,value)</p></td>
<td align="left" valign="top"><p class="table">Sets custom value for "key" to "value"</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">email</p></td>
<td align="left" valign="top"><p class="table">Returns user&#8217;s email address</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_ladap_attribute(name)</p></td>
<td align="left" valign="top"><p class="table">Returns the value of the specified LDAP attribute</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_ldap_atttribute_names</p></td>
<td align="left" valign="top"><p class="table">Returns user&#8217;s LDAP attribute names</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ldap_group</p></td>
<td align="left" valign="top"><p class="table">Returns user&#8217;s assigned LDAP group</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_requests</p></td>
<td align="left" valign="top"><p class="table">Returns user&#8217;s requests</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">name</p></td>
<td align="left" valign="top"><p class="table">Returns user&#8217;s name</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">userid</p></td>
<td align="left" valign="top"><p class="table">Returns user&#8217;s userid</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">vms</p></td>
<td align="left" valign="top"><p class="table">Returns Virtual Machines that this user owns</p></td>
</tr>
</tbody>
</table>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​  <span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpUser</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Inputs: $evm.root['user']</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump User information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>

​  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpUser
​    user <span style="color: #990000">=</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">'user'</span><span style="color: #990000">]</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> user<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - User:&lt;#{user.name}&gt; Begin Attributes [user.attributes]"</span><span style="color: #990000">)</span>
​      user<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@method} - User:&lt;#{user.name}&gt; Attributes - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - User:&lt;#{user.name}&gt; End Attributes [user.attributes]"</span><span style="color: #990000">)</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - User:&lt;#{user.name}&gt; Begin Associations [user.associations]"</span><span style="color: #990000">)</span>
​      user<span style="color: #990000">.</span>associations<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>assc<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@method} - User:&lt;#{user.name}&gt; Associations - #{assc}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - User:&lt;#{user.name}&gt; End Associations [user.associations]"</span><span style="color: #990000">)</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - User:&lt;#{user.name}&gt; Begin Virtual Columns [user.virtual_column_names]"</span><span style="color: #990000">)</span>
​      user<span style="color: #990000">.</span>virtual_column_names<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>vcn<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@method} - User:&lt;#{user.name}&gt; Virtual Columns - #{vcn}: #{user.send(vcn).inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - User:&lt;#{user.name}&gt; End Virtual Columns [user.virtual_column_names]"</span><span style="color: #990000">)</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h3 id="_a_id_virtual_machines_and_templates_vm_or_template_a_virtual_machines_and_templates_vm_or_template">2.39. <a id="Virtual Machines and Templates (vm_or_template)"></a> ⁠Virtual Machines and Templates (vm_or_template)</h3><div style="clear:left"></div>
<div class="paragraph"><p>The following methods can be used on a virtual machine or template
object.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                         </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">changed_vm_value?</p></td>
<td align="left" valign="top"><p class="table">Checks the 2 most recent drift state captures, and answers whether the specified value changed between them</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">collect_running_processes</p></td>
<td align="left" valign="top"><p class="table">Collects the running processes of the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">create_snapshot(name, desc = nil)</p></td>
<td align="left" valign="top"><p class="table">Create a snapshot of the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_get(key)</p></td>
<td align="left" valign="top"><p class="table">Get the value of specified CloudForms Management Engine Server key from the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_keys</p></td>
<td align="left" valign="top"><p class="table">List all CloudForms Management Engine Server custom keys for the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">custom_set(key, value)</p></td>
<td align="left" valign="top"><p class="table">Set a custom CloudForms Management Engine Server key value</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">datacenter</p></td>
<td align="left" valign="top"><p class="table">Returns objects Datacenter</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">direct_service</p></td>
<td align="left" valign="top"><p class="table">Show the direct service relationship of the virtual machine</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">directories</p></td>
<td align="left" valign="top"><p class="table">Returns number of directories on the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_blue_folder (this will be reworked to be more VMware-specific)</p></td>
<td align="left" valign="top"><p class="table">Returns objects blue folder from VMware. These are the folders showing in VM and Templates view in VMware</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_cluster</p></td>
<td align="left" valign="top"><p class="table">Returns objects cluster</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_custom_get(key)</p></td>
<td align="left" valign="top"><p class="table">Gets specified key of custom Management System Attribute</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_custom_keys</p></td>
<td align="left" valign="top"><p class="table">List the custom keys defined by the Management System for the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_custom_set(attribute, value)</p></td>
<td align="left" valign="top"><p class="table">Sets specified key and value of custom Management System Attribute</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_folder</p></td>
<td align="left" valign="top"><p class="table">Returns objects folder on Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ems_ref_string</p></td>
<td align="left" valign="top"><p class="table">Returns unique identifier the Management System uses to identify this resource. For example, in VMware a VM would return a value like: <tt>vm-26622</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">event_log_threshold? (options)</p></td>
<td align="left" valign="top"><p class="table">Searches event log records to determine if an event has occurred x number of times within a defined time frame. Returns true if the number of matching records found are greater or equal to the specified freq_threshold, otherwise it returns false</p>
<p class="table"><em>Options:</em></p>
<p class="table"><strong>:message_filter_type</strong> - Must be one of "STARTS WITH", "ENDS WITH", "INCLUDES", "REGULAR EXPRESSION"</p>
<p class="table"><strong>:message_filter_value</strong> - &lt;string value to search for&gt;</p>
<p class="table"><strong>:time_threshold</strong> - Options time interval to search. Example: 2.days (Search the past 2 days of event logs) Default 10.days</p>
<p class="table"><strong>:freq_threshold</strong> - Number of occurrences to check for. Default = 2</p>
<p class="table"><strong>:source</strong>, <strong>:event_id</strong>, <strong>:level</strong>, <strong>:name</strong> - Options filter values</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">event_threshold?(options)</p></td>
<td align="left" valign="top"><p class="table">Checks if an event (or multiple events) have occurred X number of times in N seconds. The values below are used if no data is passed</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>event_threshold?(options = {:time_threshold =&gt; 30.minutes, :event_types =&gt; ["MigrateVM_Task_Complete"], :freq_threshold =&gt; 2})</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ext_management_system</p></td>
<td align="left" valign="top"><p class="table">Returns objects Management System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">files</p></td>
<td align="left" valign="top"><p class="table">Returns number of files on the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">get_realtime_metric(metric, range, function)</p></td>
<td align="left" valign="top"><p class="table">Returns specified realtime metric</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">group=(group)</p></td>
<td align="left" valign="top"><p class="table">Sets objects group</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">guest_applications</p></td>
<td align="left" valign="top"><p class="table">Returns objects Guest Application list</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">hardware</p></td>
<td align="left" valign="top"><p class="table">Returns objects Hardware</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">host</p></td>
<td align="left" valign="top"><p class="table">Returns objects Host</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">migrate(host, pool = nil, priority = "defaultPriority", state = nil)</p></td>
<td align="left" valign="top"><p class="table">Migrates the object to another host. The only required parameter is host</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">miq_provision</p></td>
<td align="left" valign="top"><p class="table">If VM was created using CloudForms Management Engine Server provisioning, this is the miq_provision task instance that created the VM</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">operating_system</p></td>
<td align="left" valign="top"><p class="table">Returns objects Operating System</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">owner</p></td>
<td align="left" valign="top"><p class="table">Return objects owner</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">owner=(owner)</p></td>
<td align="left" valign="top"><p class="table">Sets objects owner</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">performances_maintains_value_for_duration?</p></td>
<td align="left" valign="top"><p class="table">Based on options given, checks to see if a performance threshold is maintained for a time period</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>vm.performances_maintains_value_for_duration?(:column =&gt; "cpu_usage_rate_average", :operator =&gt; "=", :value =&gt; 3.51, :duration =&gt; 20.minutes)</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">reboot_guest</p></td>
<td align="left" valign="top"><p class="table">Reboots the guest operating system</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">reconfigured_hardware_value?</p></td>
<td align="left" valign="top"><p class="table">Checks if hardware value has been reconfigured</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">refresh</p></td>
<td align="left" valign="top"><p class="table">Refresh power states and relationships of the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">registered?</p></td>
<td align="left" valign="top"><p class="table">Is the object registered?</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">remove_all_snapshots</p></td>
<td align="left" valign="top"><p class="table">Remove all of the objects snapshots</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">remove_from_disk</p></td>
<td align="left" valign="top"><p class="table">Removes the object from disk</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">remove_from_vmdb</p></td>
<td align="left" valign="top"><p class="table">Removes the object from the VMDB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">remove_snapshot(snapshot_id)</p></td>
<td align="left" valign="top"><p class="table">Remove a specific snapshot based on the snapshot_id</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">resource_pool</p></td>
<td align="left" valign="top"><p class="table">Returns objects Resource Pool</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">retire_now</p></td>
<td align="left" valign="top"><p class="table">Retire the object immediately</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">retirement_warn=(seconds)</p></td>
<td align="left" valign="top"><p class="table">Send a retirement warning</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">retires_on=(date)</p></td>
<td align="left" valign="top"><p class="table">Retire the object on date specified</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">revert_to_snapshot(snapshot_id)</p></td>
<td align="left" valign="top"><p class="table">Revert to a snapshot based on the snapshot_id</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">scan(scan_categories = nil)</p></td>
<td align="left" valign="top"><p class="table">Perform SmartState Analysis on the object. Scan_categories is optional</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">service</p></td>
<td align="left" valign="top"><p class="table">Show the top-level service for a virtual machine in a service hierarchy. For the immediate parent service relationship of a virtual machine, use direct_service</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">shutdownGuest</p></td>
<td align="left" valign="top"><p class="table">Shuts down the guest operating system of the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">snapshots</p></td>
<td align="left" valign="top"><p class="table">Returns list of snapshots for the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">standby_guest</p></td>
<td align="left" valign="top"><p class="table">Puts the operating system on standby</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">start</p></td>
<td align="left" valign="top"><p class="table">Starts the object. See Samples/PowerOn_DHOB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">stop</p></td>
<td align="left" valign="top"><p class="table">Stops the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">storage</p></td>
<td align="left" valign="top"><p class="table">Returns objects Datastore</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">suspend</p></td>
<td align="left" valign="top"><p class="table">Suspends the object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">to_s</p></td>
<td align="left" valign="top"><p class="table">Converts object to string</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">unlink_storage</p></td>
<td align="left" valign="top"><p class="table">Removes the reference to the VM&#8217;s Datastore</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">unregister</p></td>
<td align="left" valign="top"><p class="table">Unregisters the object from the Management System</p></td>
</tr>
</tbody>
</table>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​  <span style="font-style: italic"><span style="color: #9A1900">#########################</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Method: dumpVM</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Inputs: $evm.root['vm']</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900"># Description: Dump VM information</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
​  <span style="font-style: italic"><span style="color: #9A1900">##########################</span></span>

​  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> dumpVM<span style="color: #990000">(</span>vm<span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Attributes [vm.attributes]"</span><span style="color: #990000">)</span>
​    vm<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Attributes - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End Attributes [vm.attributes]"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Associations [vm.associations]"</span><span style="color: #990000">)</span>
​    vm<span style="color: #990000">.</span>associations<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>assc<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Associations - #{assc}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End Associations [vm.associations]"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Hardware Attributes [vm.hardware]"</span><span style="color: #990000">)</span>
​    vm<span style="color: #990000">.</span>hardware<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span>v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Hardware - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End Hardware Attributes [vm.hardware]"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Hardware Associations [vm.hardware.associations]"</span><span style="color: #990000">)</span>
​    vm<span style="color: #990000">.</span>hardware<span style="color: #990000">.</span>associations<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>assc<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; hardware Associations - #{assc}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End hardware Associations [vm.hardware.associations]"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Neworks [vm.hardware.nics]"</span><span style="color: #990000">)</span>
​    vm<span style="color: #990000">.</span>hardware<span style="color: #990000">.</span>nics<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>nic<span style="color: #990000">|</span> nic<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span>v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; VLAN:&lt;#{nic.device_name}&gt; - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End Networks [vm.hardware.nics]"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​
​    <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> vm<span style="color: #990000">.</span>ext_management_system<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin EMS [vm.ext_management_system]"</span><span style="color: #990000">)</span>
​      vm<span style="color: #990000">.</span>ext_management_system<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>ems_k<span style="color: #990000">,</span> ems_v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; EMS:&lt;#{vm.ext_management_system.name}&gt; #{ems_k} - #{ems_v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End EMS [vm.ext_management_system]"</span><span style="color: #990000">)</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​    <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> vm<span style="color: #990000">.</span>owner<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Owner [vm.owner]"</span><span style="color: #990000">)</span>
​      vm<span style="color: #990000">.</span>owner<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span>v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Owner - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End Owner [vm.owner]"</span><span style="color: #990000">)</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​    <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> vm<span style="color: #990000">.</span>operating_system<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Operating System [vm.operating_system]"</span><span style="color: #990000">)</span>
​      vm<span style="color: #990000">.</span>operating_system<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Operating System - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End Operating System [vm.operating_system]"</span><span style="color: #990000">)</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​    <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> vm<span style="color: #990000">.</span>guest_applications<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Guest Applications"</span><span style="color: #990000">)</span>
​      vm<span style="color: #990000">.</span>guest_applications<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>guest_app<span style="color: #990000">|</span> guest_app<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Guest Application:&lt;#{guest_app.name}&gt; - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}}</span> <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> vm<span style="color: #990000">.</span>guest_applications<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End Guest Applications"</span><span style="color: #990000">)</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​    <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> vm<span style="color: #990000">.</span>snapshots<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Snapshots"</span><span style="color: #990000">)</span>
​      vm<span style="color: #990000">.</span>snapshots<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>ss<span style="color: #990000">|</span> ss<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>k<span style="color: #990000">,</span> v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Snapshot:&lt;#{ss.name}&gt; - #{k}: #{v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}}</span> <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> vm<span style="color: #990000">.</span>snapshots<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End Snapshots"</span><span style="color: #990000">)</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​    <span style="font-weight: bold"><span style="color: #0000FF">unless</span></span> vm<span style="color: #990000">.</span>storage<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">nil</span></span><span style="color: #990000">?</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin VM Storage [vm.storage]"</span><span style="color: #990000">)</span>
​      vm<span style="color: #990000">.</span>storage<span style="color: #990000">.</span>attributes<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>stor_k<span style="color: #990000">,</span> stor_v<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Storage:&lt;#{vm.storage.name}&gt; #{stor_k} - #{stor_v.inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End VM Storage [vm.storage]"</span><span style="color: #990000">)</span>
​      <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​    <span style="font-weight: bold"><span style="color: #0000FF">end</span></span>
​
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Begin Virtual Columns -----"</span><span style="color: #990000">)</span>
​    vm<span style="color: #990000">.</span>virtual_column_names<span style="color: #990000">.</span>sort<span style="color: #990000">.</span>each <span style="color: #FF0000">{</span> <span style="color: #990000">|</span>vcn<span style="color: #990000">|</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; Virtual Columns - #{vcn}: #{vm.send(vcn).inspect}"</span><span style="color: #990000">)</span><span style="color: #FF0000">}</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@log_prefix} - VM:&lt;#{vm.name}&gt; End Virtual Columns -----"</span><span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">""</span><span style="color: #990000">)</span>
​  <span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>  ​​<span style="font-style: italic"><span style="color: #9A1900">####################</span></span>
  <span style="font-style: italic"><span style="color: #9A1900">#</span></span>
  ​<span style="font-style: italic"><span style="color: #9A1900"># Method: createSnapshot</span></span>
  ​<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
  ​<span style="font-style: italic"><span style="color: #9A1900">####################</span></span>
  ​
  <span style="font-weight: bold"><span style="color: #0000FF">def</span></span> createSnapshot<span style="color: #990000">(</span>vm<span style="color: #990000">,</span> snap_name<span style="color: #990000">,</span> snap_desc<span style="color: #990000">=</span>snap_name<span style="color: #990000">)</span>
​    <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span><span style="color: #FF0000">"#{@method} - VM:&lt;#{vm.name}&gt; Creating Snapshot:&lt;#{snap_name}&gt; Description:&lt;#{snap_desc}&gt;"</span><span style="color: #990000">)</span>
    ​vm<span style="color: #990000">.</span>create_snapshot<span style="color: #990000">(</span>snap_name<span style="color: #990000">,</span> snap_desc<span style="color: #990000">)</span>
  ​<span style="font-weight: bold"><span style="color: #0000FF">end</span></span></tt></pre></div></div>
<h4 id="_a_id_vms_vm_a_vms_vm">2.39.1. <a id="VMs (vm)"></a> VMs (vm)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">add_to_service(service)</p></td>
<td align="left" valign="top"><p class="table">Adds the VM to a service object</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">remove_from_service</p></td>
<td align="left" valign="top"><p class="table">Removes the VM from its parent service</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>The following table lists the metric types available for the
<tt>get_realtime_metric(metric, range, function)</tt> method for virtual
machines.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Metric                             </th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">v_derived_storage_used</p></td>
<td align="left" valign="top"><p class="table">Capacity - Used space in bytes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_pct_cpu_ready_delta_summation</p></td>
<td align="left" valign="top"><p class="table">CPU - Percentage ready</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_pct_cpu_wait_delta_summation</p></td>
<td align="left" valign="top"><p class="table">CPU - Percentage wait</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_pct_cpu_used_delta_summation</p></td>
<td align="left" valign="top"><p class="table">CPU - Percentage used</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_derived_vm_count</p></td>
<td align="left" valign="top"><p class="table">State - Peak average virtual machines (Hourly Count / Daily Average)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_derived_cpu_reserved_pct</p></td>
<td align="left" valign="top"><p class="table">CPU - Percentage available</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">v_derived_memory_reserved_pct</p></td>
<td align="left" valign="top"><p class="table">Memory - Percentage available</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>The following Ruby snippet demonstrates using the
<tt>get_realtime_metric(metric, range, function)</tt> method using the
<tt>v_pct_cpu_ready_delta_summation</tt> metric.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​host <span style="color: #990000">=</span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>root<span style="color: #990000">[</span><span style="color: #FF0000">'vm'</span><span style="color: #990000">]</span>
​cpu_rdy <span style="color: #990000">=</span> vm<span style="color: #990000">.</span>get_realtime_metric<span style="color: #990000">(:</span>v_pct_cpu_ready_delta_summation<span style="color: #990000">,</span> <span style="color: #990000">[</span><span style="color: #993399">15</span><span style="color: #990000">.</span>minutes<span style="color: #990000">.</span>ago<span style="color: #990000">.</span>utc<span style="color: #990000">,</span><span style="color: #993399">5</span><span style="color: #990000">.</span>minutes<span style="color: #990000">.</span>ago<span style="color: #990000">.</span>utc<span style="color: #990000">],</span> <span style="color: #990000">:</span>avg<span style="color: #990000">)</span></tt></pre></div></div>
<h4 id="_a_id_vms_for_clouds_vm_cloud_a_vms_for_clouds_vm_cloud">2.39.2. <a id="VMs for Clouds (vm_cloud)"></a> VMs for Clouds (vm_cloud)</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                 </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">availability_zone</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s availability zone</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">flavor</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s favor</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_network</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud network</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cloud_subnet</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s cloud subnet</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">floating_ip</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s floating IPs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">security_groups</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s security groups</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">key_pairs</p></td>
<td align="left" valign="top"><p class="table">Returns object&#8217;s key pairs</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_windows_image_windows_image_a_windows_image_windows_image">2.40. <a id="Windows Image (windows_image)"></a> Windows Image (windows_image)</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method                     </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">customization_templates</p></td>
<td align="left" valign="top"><p class="table">Returns the images customization templates.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">pxe_server</p></td>
<td align="left" valign="top"><p class="table">Returns the images pxe server.</p></td>
</tr>
</tbody>
</table>
</div>
<h3 id="_a_id_creating_categories_and_tags_a_creating_categories_and_tags">2.41. <a id="Creating Categories and Tags"></a> Creating Categories and Tags</h3><div style="clear:left"></div>
<div class="paragraph"><p>These methods are invoked using $evm.execute. See after the table for
usage examples.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method(<em>parameter</em>)        </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">category_exists?</p></td>
<td align="left" valign="top"><p class="table">Checks to see if a tag category exists. Usually used with unless or if to then create a category that does not exist.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>$evm.execute('category_exists?', "department")</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">category_create</p></td>
<td align="left" valign="top"><p class="table">Creates a new category and sets if only one tag value from this category can be assigned to a configuration item (using the single_value option).</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>$evm.execute('category_create', :name =&gt; "department", :single_value =&gt; false, :description =&gt; "Department")</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">tag_exists?</p></td>
<td align="left" valign="top"><p class="table">Checks to see if a tag exists in a category.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>$evm.execute(tag_exists?', "department", finance)</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">tag_create</p></td>
<td align="left" valign="top"><p class="table">Creates a new tag in the specified category.</p>
<p class="table"><em>Example:</em></p>
<p class="table"><tt>$evm.execute(tag_create', "department", :name =&gt; "finance", :description =&gt; "Finance")</tt></p></td>
</tr>
</tbody>
</table>
</div>
<h4 id="_a_id_category_and_tags_methods_example_a_category_and_tags_methods_example">2.41.1. <a id="Category and Tags Methods Example"></a> Category and Tags Methods Example</h4>
<div class="paragraph"><p>In this example, the VMDB is checked to see if the <strong>Department</strong> category
exists. If it does, then a message is logged. If not, the category is
created and a message is logged. Values are then added to the category.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>​<span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #009900">$evm</span><span style="color: #990000">.</span>execute<span style="color: #990000">(</span><span style="color: #FF0000">'category_exists?'</span><span style="color: #990000">,</span> <span style="color: #FF0000">"department"</span><span style="color: #990000">)</span>
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"Classification department exists"</span><span style="color: #990000">)</span>
​<span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"Classification department doesn't exist, creating category"</span><span style="color: #990000">)</span>
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>execute<span style="color: #990000">(</span><span style="color: #FF0000">'category_create'</span><span style="color: #990000">,</span> <span style="color: #990000">:</span>name <span style="color: #990000">=&gt;</span> <span style="color: #FF0000">"department"</span><span style="color: #990000">,</span> <span style="color: #990000">:</span>single_value <span style="color: #990000">=&gt;</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">,</span> <span style="color: #990000">:</span>description <span style="color: #990000">=&gt;</span> <span style="color: #FF0000">"Department"</span><span style="color: #990000">)</span>
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>log<span style="color: #990000">(</span><span style="color: #FF0000">"info"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"Adding new tag in Department Category"</span><span style="color: #990000">)</span>
​  <span style="color: #009900">$evm</span><span style="color: #990000">.</span>execute<span style="color: #990000">(</span>tag_create'<span style="color: #990000">,</span> <span style="color: #FF0000">"department"</span><span style="color: #990000">,</span> <span style="color: #990000">:</span>name <span style="color: #990000">=&gt;</span> <span style="color: #FF0000">"finance"</span><span style="color: #990000">,</span> <span style="color: #990000">:</span>description <span style="color: #990000">=&gt;</span> <span style="color: #FF0000">"Finance"</span><span style="color: #990000">)</span></tt></pre></div></div>
<h3 id="_a_id_quota_a_quota">2.42. <a id="Quota"></a> Quota</h3><div style="clear:left"></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top">Method(<em>parameter</em>)                                    </th>
<th align="left" valign="top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">vms_by_owner, vms_by_group, vms_by_owner_and_group</p></td>
<td align="left" valign="top"><p class="table">Collect stats about existing VMs by owner or in the same LDAP group as the owner in the current request.</p>
<p class="table"><em>Example return object:</em></p>
<p class="table"><tt>{:class_name=&gt;"Vm", :count=&gt;5, :ids=&gt;[22, 120, 121, 122, 117], :cpu=&gt;6, :memory=&gt;5120, :allocated_storage=&gt;29032972288, :used_storage=&gt;29032972288}</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">retired_vms_by_owner, retired_vms_by_group, retired_vms_by_owner_and_group</p></td>
<td align="left" valign="top"><p class="table">Collect stats about retired VMs, that have not been deleted from the host, by owner or in the same LDAP group as the owner in the current request.</p>
<p class="table"><em>Example return object:</em></p>
<p class="table"><tt>{:class_name=&gt;"Vm", :count=&gt;5, :ids=&gt;[22, 120, 121, 122, 117], :cpu=&gt;6, :memory=&gt;5120, :allocated_storage=&gt;29032972288, :used_storage=&gt;29032972288}</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">provisions_by_owner, provisions_by_group</p></td>
<td align="left" valign="top"><p class="table">Collect stats based on provisions running on the same day as the current request (based on scheduled date or immediate) by owner or in the same LDAP group as the owner. (Results do not include Provision Requests that have not been approved.)</p>
<p class="table"><em>Example return object:</em></p>
<p class="table"><tt>{:class_name=&gt;"MiqProvisionRequest", :count=&gt;6, :ids=&gt;[115, 116, 104, 102, 105, 112], :cpu=&gt;6, :memory=&gt;1536, , :storage=&gt;62914560}</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">requests_by_owner, requests_by_group</p></td>
<td align="left" valign="top"><p class="table">Collect stats based on provision requests made the same day as the request by the same owner or LDAP group as the owner in the current request, regardless of when the provision request is scheduled to run. (Results do not include Provision Requests that have been denied.)</p>
<p class="table"><em>Example return object:</em></p>
<p class="table"><tt>{:class_name=&gt;"MiqProvisionRequest", :count=&gt;6, :ids=&gt;[115, 116, 104, 102, 105, 112], :cpu=&gt;6, :memory=&gt;1536, , :storage=&gt;62914560}</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">active_provisions_by_owner, active_provisions_by_group, active_provisions</p></td>
<td align="left" valign="top"><p class="table">Collect stats based on currently active provision requests by the same owner or LDAP group as the owner in the current request.</p>
<p class="table"><em>Example return object:</em></p>
<p class="table"><tt>{:class_name=&gt;"MiqProvisionRequest", :count=&gt;6, :ids=&gt;[115, 116, 104, 102, 105, 112], :cpu=&gt;6, :memory=&gt;1536, , :storage=&gt;62914560}</tt></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0-0<br />
Last updated 2015-02-27 10:31:45 EST
</div>
</div>
</body>
</html>
