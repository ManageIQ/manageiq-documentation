<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Scripting_Actions_in_CloudForms.ent">
%BOOK_ENTITIES;
]>
<chapter id="chap-Red_Hat_CloudForms-Scripting_Actions_in_CloudForms-Automate_Model">
	<title>Automate Model</title>
	 <para>
		<productname>CloudForms Management Engine</productname> Automate enables real-time, bi-directional process integration. This provides users with a method to implement adaptive automation for management events and administrative or operational activities.
	</para>
	 <xi:include href="topics/Automate_Model2.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/Creating_a_Domain.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/Editing_a_Domain.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/Deleting_a_Domain.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/Changing_Priority_Order_of_Domains.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/Creating_a_Namespace.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/To_create_a_class1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/To_create_a_schema_for_a_class1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/To_edit_a_field_in_a_schema1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/Editing_Schema_Sequence.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/To_add_an_instance_to_a_class1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <xi:include href="topics/Copying_a_Class_or_Instance.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	 <section id="sect-Red_Hat_CloudForms-Scripting_Actions_in_CloudForms-Automate_Model-Relationships">
		<title>Relationships</title>
		 <para>
			Relationships are used to connect to other instances in the <guilabel>Automation Datastore</guilabel>. Relationships are formed using URI syntax. The following can also be passed through a relationship:
		</para>
		 <itemizedlist>
			<listitem>
				<para>
					Use <guilabel>#</guilabel> to set the message to send to the item in the relationship.
				</para>

			</listitem>
			 <listitem>
				<para>
					To pass an input to the method use <guilabel>?</guilabel> followed by the item to pass.
				</para>

			</listitem>
			 <listitem>
				<para>
					If you want to use a substitution, the syntax is <guilabel>${}</guilabel> with the substitution located between the brackets.
				</para>

			</listitem>

		</itemizedlist>
		 <para>

		</para>
		 <informaltable frame="all">
			<tgroup cols="2">
				<thead>
					<row>
						<entry> <para>
							Example
						</para>
						 </entry>
						 <entry> <para>
							Explanation
						</para>
						 </entry>

					</row>

				</thead>
				 <tbody>
					<row>
						<entry> <para>
							/Cloud/VM/Provisioning/Naming/Default#create
						</para>
						 </entry>
						 <entry> <para>
							This relationships uses the Default instance of the Naming class, which provides a means for other classes to name virtual machines. The relationship sends the <literal>create</literal> message to the class.
						</para>
						 </entry>

					</row>
					 <row>
						<entry> <para>
							/Cloud/VM/Provisioning/StateMachines/VMProvision_VM/AcquireMACAddress#${#ae_message}
						</para>
						 </entry>
						 <entry> <para>
							This relationships substitutes the message to send to the AcquireMACAddress instance of the VMProvision_VM class with the value in <literal>ae_message</literal>.
						</para>
						 </entry>

					</row>
					 <row>
						<entry> <para>
							/Cloud/VM/Retirement/Email/vm_retirement_emails?event=vm_retired
						</para>
						 </entry>
						 <entry> <para>
							Invokes the vm_retirement_emails instance of the Email class. Also sends the value <literal>vm_retired</literal> in the <literal>event</literal> attribute, which is used in the vm_retirement_emails method.
						</para>
						 </entry>

					</row>
					 <row>
						<entry> <para>
							/Service/Lifecycle/Retirement?service_id=${process#service_id}
						</para>
						 </entry>
						 <entry> <para>
							Invokes the Retirement instance of the Lifecycle class and send a replacement value in <literal>process#service_id</literal> to the <literal>service_id</literal> attribute.
						</para>
						 </entry>

					</row>

				</tbody>

			</tgroup>

		</informaltable>
		 <para>

		</para>

	</section>
	 <section id="sect-Red_Hat_CloudForms-Scripting_Actions_in_CloudForms-Automate_Model-Methods">
		<title>Methods</title>
		 <para>
			Methods are pieces of code associated with a class or object to perform a task. <productname>CloudForms Management Engine</productname> allows for Ruby methods. You can create your own methods or use relationships to link to pre-existing ones. <!--  In addition, you can use <productname>Windows</productname> PowerShell to create these methods. If you will be using PowerShell, you must install a SmartProxy on a <productname>Windows</productname> computer with network access to a <productname>CloudForms Management Engine</productname> Appliance in the <productname>CloudForms Management Engine</productname> Zone where you are running Automation.  -->
		</para>
		 <para>
			Red Hat CloudForms ships with a core set of Ruby gems used by the CloudForms Management Engine Rails Application. The Ruby gems in this set are subject to change, and have changed since CloudForms 3.1 (CloudForms Management Engine 5.3). If you are calling gems using Automate that are no longer in the CloudForms Management Engine Appliance, you can install them by using the <command>gem install</command> command.
		</para>
		 <para>
			While gems can be imported into automation methods using <code>require</code>, it is recommended that the authors of the automation methods clearly document the use of gems either in the core set or a custom set. It is the responsibility of the author of such custom automation to own the life cycle of any gem being referenced in those methods.
		</para>
		 <para>
			The <ulink url="https://access.redhat.com/documentation/en-US/Red_Hat_CloudForms/3.2/html/Release_Notes/index.html">Red Hat CloudForms 3.2 Release Notes</ulink> list Ruby gems that have been added, updated, or removed in the latest version of CloudForms Management Engine.
		</para>
		 <para>
			For lists of Ruby gems included in different CloudForms Management Engine releases, see the following article:
		</para>
		 <itemizedlist>
			<listitem>
				<para>
					<ulink url="https://access.redhat.com/articles/1534753">https://access.redhat.com/articles/1534753</ulink>
				</para>

			</listitem>

		</itemizedlist>
		 <xi:include href="topics/To_create_a_method1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		 <xi:include href="topics/Creating_a_Dynamic_Content_Dialog.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />

	</section>
	 <section id="sect-Red_Hat_CloudForms-Scripting_Actions_in_CloudForms-Automate_Model-Simulation">
		<title>Simulation</title>
		 <xi:include href="topics/Simulation1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		 <xi:include href="topics/To_simulate_an_Automate_Model1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />

	</section>
	 <section id="sect-Red_Hat_CloudForms-Scripting_Actions_in_CloudForms-Automate_Model-Importing_Exporting_and_Resetting_the_Datastore">
		<title>Importing, Exporting, and Resetting the Datastore</title>
		 <xi:include href="topics/Importing_Exporting_and_Resetting_the_Datastore1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		 <xi:include href="topics/To_export_all_Classes_classes1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		 <xi:include href="topics/To_import_Datastore_classes1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		 <xi:include href="topics/To_reset_the_Datastore_to_the_default1.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />

	</section>

</chapter>

