
[[authentications]]
== Authentications

Management of authentications is provided via the following collection:

[source,data]
----
/api/authentications
----

Full CRUD actions on authentications is available:

* link:#querying-authentications[Querying Authentications]
* link:#creating-authentications[Creating Authentications]
* link:#editing-authentications[Editing Authentications]
* link:#deleting-authentications[Deleting Authentications]

[[querying-authentications]]
=== Querying Authentications

Querying all authentications in the system is simply:

----
GET /api/authentications
----

Getting details on a specific authentication:

----
GET /api/authentications/:id
----

One can also query authentications of a configuration script payload's manager as follows:

----
GET /api/configuration_script_payloads/:id/authentications
----

Or getting details on a specific authentication:

----
GET /api/configuration_script_payloads/:id/authentications/:authentication_id
----

[[creating-authentications]]
=== Creating Authentications

Authentications can be created via a POST to the authentications collection or via the *create* action
signature which also allows creation of multiple authentications in a single request.

----
POST /api/authentications
----

[source,json]
----
{
  "description" : "Authentication Description",
  "name" : "SomeCredentials",
  "related" : {},
  "type" : "ManageIQ::Providers::AnsibleTower::AutomationManager::Credential",
  "manager_resource" : { "href" : "http://localhost:3000/api/providers/7" }
}
----

or creating multiple authentications:

[source,json]
----
{
  "action" : "create",
  "resources" : [
    { "description" : "System Credentials", "name" : "SystemCreds", ... },
    { "description" : "Admin Credentials",  "name" : "AdminCreds", ... },
    ...
  ]
}
----

Optionally, authentications can be created for a provider of a specific configuration script payload,
thus eliminating the need of specifying a provider.

----
POST /api/configuration_script_payloads/:id/authentications
----

[source,json]
----
{
  "description" : "Authentication Description",
  "name" : "SomeCredentials",
  "related" : {},
  "type" : "ManageIQ::Providers::AnsibleTower::AutomationManager::Credential"
}
----

Also supporting bulk creates:

[source,json]
----
{
  "action" : "create",
  "resources" : [
    { "description" : "System Credentials", "name" : "SystemCreds", ... },
    { "description" : "Admin Credentials",  "name" : "AdminCreds", ... },
    ...
  ]
}
----


[NOTE]
====
Please refer to the link:../appendices/resource_attributes.html#authentications[Resource Attributes]
page for a list of available attributes when creating authentications.
====

[[editing-authentications]]
=== Editing Authentications

----
POST /api/authentications/:id
----

[source,json]
----
{
  "action" : "edit",
  "resource" : {
    "name" : "UpdatedCredentials"
  }
}
----

or editing multiple authentications:

----
POST /api/authentications
----

[source,json]
----
{
  "action" : "edit",
  "resources" : [
    {
      "href" : "http://localhost:3000/api/authentications/101",
      "description" : "Updated Sample Credentials 1",
      "name" : "UpdatedCredentials1"
    },
    {
      "href" : "http://localhost:3000/api/authentications/102",
      "description" : "Updated Sample Credentials 2",
      "name" : "UpdatedCredentials2"
    },
    ...
  ]
}
----


[[deleting-authentications]]
=== Deleting Authentications

Authentications can be deleted via either the *delete* POST action or via the DELETE HTTP method.

----
POST /api/authentications/101
----

[source,json]
----
{
  "action" : "delete"
}
----

or simply:

----
DELETE /api/authentications/101
----

Deleting multiple authentications can be done as follows:

----
POST /api/authentications
----

[source,json]
----
{
  "action" : "delete",
  "resources" : [
    { "href" : "http://localhost:3000/api/authentications/101" },
    { "href" : "http://localhost:3000/api/authentications/102" },
    ...
  ]
}
----

